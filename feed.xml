<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title>ã²ã’ãƒ¡ãƒ¢</title>
    <link href="https://matsubara0507.github.io/feed.xml" rel="self" />
    <link href="https://matsubara0507.github.io" />
    <id>https://matsubara0507.github.io/feed.xml</id>
    <author>
        <name>MATSUBARA Nobutada</name>
        <email></email>
    </author>
    <updated>2018-10-28T00:00:00Z</updated>
    <entry>
    <title>GHC 8.6 ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ããªã‹ã£ãŸ</title>
    <link href="https://matsubara0507.github.io/posts/2018-10-28-ghc-8-6-error-no-gmp.html" />
    <id>https://matsubara0507.github.io/posts/2018-10-28-ghc-8-6-error-no-gmp.html</id>
    <published>2018-10-28T00:00:00Z</published>
    <updated>2018-10-28T00:00:00Z</updated>
    <summary type="html"><![CDATA[<article class="post card" itemscope itemtype="http://schema.org/BlogPosting">
 <div class="card-content">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">GHC 8.6 ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ããªã‹ã£ãŸ</h1>
    <p class="post-meta">
      <time datetime="2018-10-28" itemprop="datePublished">
        Oct 28, 2018
      </time>
      
      
      <div class="tags">
          <i class="fa fa-tags"></i> <a href="/tags/Haskell.html">Haskell</a>
      </div>
      
    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>å¯¾ã—ãŸã“ã¨ã§ã¯ãªã„ã‚“ã ã‘ã©ï¼Œæ—¥æœ¬èªã®è¨˜äº‹ãŒç„¡ã£ã‹ãŸã®ã§ãƒ¡ãƒ¢ï¼ ã¡ãªã¿ã« OS ã¯ macOS Sierra (10.12.6) ã§ã™ï¼</p>
<h2 id="ghc-8.6-ã§ãƒ“ãƒ«ãƒ‰ã§ããªã„">GHC 8.6 ã§ãƒ“ãƒ«ãƒ‰ã§ããªã„</h2>
<p>ç¾åœ¨ stackage ã® Nightly ã¯æœ€æ–°ã® GHC ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã‚ã‚‹ 8.6 ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ï¼ çµæ§‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚‚æƒã£ã¦ããŸã®ã§ï¼Œè‡ªåˆ†ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚‚ãƒ“ãƒ«ãƒ‰ã—ã¦ã¿ã‚ˆã†ã‹ãªã¨æ€ã£ã¦ï¼Œresolver ã‚’ Nightly ã«å¤‰ãˆã¦ <code>stack build</code> ã—ãŸã‚‰ä¸‹è¨˜ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸï¼</p>
<pre class="shell"><code>$ stack build
Downloaded nightly-2018-10-26 build plan.    
Preparing to install GHC to an isolated location.
This will not interfere with any system-level installation.
Downloaded ghc-8.6.1.                                      
Installing GHC ...                                                                         
Received ExitFailure 2 when running
Raw command: /usr/bin/make install
Run from: /Users/username/.stack/programs/x86_64-osx/ghc-8.6.1.temp/ghc-8.6.1/</code></pre>
<p><code>--vebose</code> ã‚’ä»˜ã‘ã¦è©³ç´°ã‚’è¦‹ã¦ã¿ã‚‹ï¼</p>
<pre class="shell"><code>$ stack build --verbose
Version 1.9.1, Git revision f9d0042c141660e1d38f797e1d426be4a99b2a3c (6168 commits) x86_64 hpack-0.31.0
2018-10-28 13:31:22.068195: [debug] Checking for project config at: /Users/username/git/haskell/servant-kotlin/stack.yaml
2018-10-28 13:31:22.069706: [debug] Loading project config file stack.yaml
 .
 .
 .
2018-10-28 13:32:21.355443: [debug] /Library/Developer/CommandLineTools/usr/bin/ranlib: file: /Users/username/.stack/programs/x86_64-osx/ghc-8.6.1/lib/ghc-8.6.1/rts/libHSrts_thr_p.a(Select.thr_p_o) has no symbols
2018-10-28 13:32:21.621133: [debug] &quot;utils/ghc-cabal/dist-install/build/tmp/ghc-cabal-bindist&quot; copy libraries/ghc-prim dist-install &quot;strip&quot; &#39;&#39; &#39;/Users/username/.stack/programs/x86_64-osx/ghc-8.6.1&#39; &#39;/Users/username/.stack/programs/x86_64-osx/ghc-8.6.1/lib/ghc-8.6.1&#39; &#39;/Users/username/.stack/programs/x86_64-osx/ghc-8.6.1/share/doc/ghc-8.6.1/html/libraries&#39; &#39;v p dyn&#39;  
2018-10-28 13:32:21.841900: [debug] dyld: Library not loaded: /usr/local/opt/gmp/lib/libgmp.10.dylib
2018-10-28 13:32:21.842003: [debug]   Referenced from: /Users/username/.stack/programs/x86_64-osx/ghc-8.6.1.temp/ghc-8.6.1/libraries/base/dist-install/build/libHSbase-4.12.0.0-ghc8.6.1.dylib
2018-10-28 13:32:21.842062: [debug]   Reason: image not found
2018-10-28 13:32:21.842273: [debug] make[1]: *** [install_packages] Abort trap: 6
2018-10-28 13:32:21.844303: [debug] make: *** [install] Error 2
Installing GHC ...
Received ExitFailure 2 when running
Raw command: /usr/bin/make install
Run from: /Users/username/.stack/programs/x86_64-osx/ghc-8.6.1.temp/ghc-8.6.1/</code></pre>
<p>ã©ã†ã‚„ã‚‰ <code>/usr/local/opt/gmp/lib/libgmp.10.dylib</code> ãŒç„¡ã„ã¿ãŸã„ã ï¼</p>
<pre class="shell"><code>$ ls /usr/local/opt/gmp/lib/libgmp.10.dylib
ls: /usr/local/opt/gmp/lib/libgmp.10.dylib: No such file or directory</code></pre>
<p>ã“ã‚Œã§æ¤œç´¢ã™ã‚‹ã¨ï¼ŒRuby ã«é–¢ã™ã‚‹ã“ã¨ã ãŒ <a href="https://stackoverflow.com/questions/34912946">StackOverflow ãŒã‚ã£ãŸ</a>ï¼ æ›°ãï¼Œ<code>gmp</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å…¥ã‚Œã‚Œã°è‰¯ã„ã‚‰ã—ã„ï¼ˆå¤šãã®äººã¯ä»–ã®ã©ã“ã‹ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å…¥ã£ã¦ã‚‹ã®ã‹ã‚‚ï¼‰ï¼</p>
<pre class="shell"><code>$ brew reinstall gmp
==&gt; Reinstalling gmp
==&gt; Downloading https://homebrew.bintray.com/bottles/gmp-6.1.2_2.sierra.bottle.tar.gz
######################################################################## 100.0%
==&gt; Pouring gmp-6.1.2_2.sierra.bottle.tar.gz
ğŸº  /usr/local/Cellar/gmp/6.1.2_2: 18 files, 3.1MB

$ ls /usr/local/opt/gmp/lib/libgmp.10.dylib
/usr/local/opt/gmp/lib/libgmp.10.dylib</code></pre>
<p>ã“ã‚Œã§ GHC 8.6 ã§ <code>stack build</code> ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸï¼</p>
<h2 id="ãŠã—ã¾ã„">ãŠã—ã¾ã„</h2>
<p>ã¾ãä¸€å¿œã­ï¼Œä¸€å¿œãƒ¡ãƒ¢ã—ãŸï¼</p>
  </div>
</div>
</article>
]]></summary>
</entry>
<entry>
    <title>stack-templates ã‚’é›†ã‚ã‚‹ with GraphQL</title>
    <link href="https://matsubara0507.github.io/posts/2018-10-14-collect-stack-templates.html" />
    <id>https://matsubara0507.github.io/posts/2018-10-14-collect-stack-templates.html</id>
    <published>2018-10-14T00:00:00Z</published>
    <updated>2018-10-14T00:00:00Z</updated>
    <summary type="html"><![CDATA[<article class="post card" itemscope itemtype="http://schema.org/BlogPosting">
 <div class="card-content">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">stack-templates ã‚’é›†ã‚ã‚‹ with GraphQL</h1>
    <p class="post-meta">
      <time datetime="2018-10-14" itemprop="datePublished">
        Oct 14, 2018
      </time>
      
      
      <div class="tags">
          <i class="fa fa-tags"></i> <a href="/tags/Haskell.html">Haskell</a> <a href="/tags/GraphQL.html">GraphQL</a>
      </div>
      
    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Haskell Day ã®ä»•è¾¼ã¿ãƒ‘ãƒ¼ãƒˆ1ã§ã™(2ãŒã‚ã‚‹ã‹ã¯çŸ¥ã‚‰ãªã„)ï¼ stack ã®æ¬¡æœŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ v1.9 ã§è¿½åŠ ã•ã‚Œã‚‹ namespaced template ã‚’è©¦ã—ã¦ã¿ã¾ã—ãŸï¼</p>
<p>ã¡ãªã¿ã«ï¼Œç¾åœ¨ v1.9 ã¯ãƒ—ãƒ¬ãƒªãƒªãƒ¼ã‚¹ã«ãªã£ãŸã®ã§ï¼Œä¸‹è¨˜ã‚³ãƒãƒ³ãƒ‰ã§ç°¡å˜ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ãã¾ã™ï¼</p>
<pre><code>$ stack upgrade --binary-version 1.9.0.1</code></pre>
<h2 id="namespaced-template">namespaced template</h2>
<p><code>stack new</code> ã§æŒ‡å®šã§ãã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ï¼ŒGitHub ãªã©ã®ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‹ã‚‰ã‚‚å–ã£ã¦ã“ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸæ©Ÿèƒ½ï¼ è©³ã—ãã¯é–‹ç™ºæ®µéšã‹ã‚‰ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—ã—ã¦ã‚‹ e-bigmoon ã•ã‚“ã®è¨˜äº‹ã‚’èª­ã‚€ã¨è‰¯ã„ï¼</p>
<ul>
<li><a href="https://haskell.e-bigmoon.com/posts/2018/06-27-namespaced-templates.html">namespaced templates - BIGMOON haskellers blog</a></li>
</ul>
<h3 id="ä½œã£ã¦ã¿ãŸ">ä½œã£ã¦ã¿ãŸ</h3>
<p>GitHub ãªã©ã§ <code>stack-templates</code> ã¨ã„ã†åå‰ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œã‚Šï¼Œ<code>hsfiles</code> ã¨ã„ã†æ‹¡å¼µå­ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã«ç½®ãï¼ ä»Šå›ã¼ãã¯ <a href="https://github.com/matsubara0507/stack-templates">matsubara0507/stack-templates</a> ã¨ã„ã†ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œã‚Šï¼Œï¼’ã¤ç¨‹ä½œã£ã¦ã¿ãŸï¼</p>
<ul>
<li><code>get-opt-cli.hsfiles</code> : <a href="http://hackage.haskell.org/package/base/docs/System-Console-GetOpt.html"><code>System.Console.GetOpt</code></a> ã‚’ç”¨ã„ãŸCLIã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</li>
<li><code>optparse-applicative-cli.hsfiles</code> : <a href="http://hackage.haskell.org/package/optparse-applicative">optparse-applicative</a> ã‚’ç”¨ã„ãŸCLIã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</li>
</ul>
<p>ã©ã¡ã‚‰ã‚‚ï¼Œã‚ˆãCLIã‚’ä½œã‚‹ã¨ãã®æ›¸ãæ–¹ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦èµ·ã“ã—ãŸã‚‚ã®ï¼ æ™®æ®µã¯ <a href="http://hackage.haskell.org/package/rio">rio</a> ã¨ <a href="http://hackage.haskell.org/package/extensible">extensible</a> ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ï¼Œå˜ç´”ã« optparse-applicative ãªã©ã‚’ä½¿ã£ãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã„ã†è¨³ã§ã‚‚ãªã„ï¼</p>
<h3 id="ãƒ†ã‚¹ãƒˆã™ã‚‹">ãƒ†ã‚¹ãƒˆã™ã‚‹</h3>
<p>ã§ãã‚Œã°ï¼Œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ <code>stack new</code> ã—ã¦ <code>stack build</code> ã—ãŸæ™‚ç‚¹ã§ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚’é€šã£ã¦ã»ã—ã„ï¼ ã¨ã„ã†ã“ã¨ã§ <code>stack new</code> ã—ã¦ <code>stack build</code> ã‚’è©¦ã—ã¦ãã‚Œã‚‹ãƒ†ã‚¹ãƒˆã‚’ <a href="https://github.com/matsubara0507/stack-templates/blob/7abc95184241c2df9f81ec1a45f9a662a98db05a/.travis.yml">TravisCI</a> ã«æ›¸ã„ãŸï¼</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="fu">matrix:</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">  <span class="fu">include:</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">  <span class="kw">-</span> <span class="fu">env:</span><span class="at"> TEMPLATE=&quot;get-opt-cli&quot; ARGS=&quot;--resolver lts-12&quot;</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">    <span class="fu">compiler:</span><span class="at"> </span><span class="st">&quot;: #stack 8.4.3&quot;</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5">    <span class="fu">addons:</span><span class="at"> </span><span class="kw">{</span><span class="fu">apt:</span><span class="at"> </span><span class="kw">{</span><span class="fu">packages:</span><span class="at"> </span><span class="kw">[</span>libgmp-dev<span class="kw">]}}</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">  <span class="kw">-</span> <span class="fu">env:</span><span class="at"> TEMPLATE=&quot;optparse-applicative-cli&quot; ARGS=&quot;--resolver lts-12&quot;</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7">    <span class="fu">compiler:</span><span class="at"> </span><span class="st">&quot;: #stack 8.4.3&quot;</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8">    <span class="fu">addons:</span><span class="at"> </span><span class="kw">{</span><span class="fu">apt:</span><span class="at"> </span><span class="kw">{</span><span class="fu">packages:</span><span class="at"> </span><span class="kw">[</span>libgmp-dev<span class="kw">]}}</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="fu">before_install:</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co"># install stack</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="fu">install:</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="kw">-</span> stack new sample <span class="st">&quot;./$TEMPLATE&quot;</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="kw">-</span> |</a>
<a class="sourceLine" id="cb2-16" data-line-number="16">  set -ex</a>
<a class="sourceLine" id="cb2-17" data-line-number="17">  cd sample</a>
<a class="sourceLine" id="cb2-18" data-line-number="18">  stack --no-terminal --install-ghc $ARGS test --bench --only-dependencies</a>
<a class="sourceLine" id="cb2-19" data-line-number="19">  set +ex</a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="fu">script:</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="kw">-</span> |</a>
<a class="sourceLine" id="cb2-22" data-line-number="22">  set -ex</a>
<a class="sourceLine" id="cb2-23" data-line-number="23">  stack --no-terminal $ARGS test --bench --no-run-benchmarks --no-haddock-deps</a>
<a class="sourceLine" id="cb2-24" data-line-number="24">  set +ex</a></code></pre></div>
<p><a href="https://github.com/commercialhaskell/stack-templates/blob/879f95dc44b24201bc64fcf8f4b9e2192c23dad4/test-templates.hs">commercialhaskell/stack-templates ã§ã‚‚ãƒ†ã‚¹ãƒˆã¯æ›¸ã„ã¦ã‚ã‚‹</a>ãŒã¼ãã®ã¯ã™ã”ã„ã‚·ãƒ³ãƒ—ãƒ«ã ï¼</p>
<h2 id="stack-templates-ã‚’é›†ã‚ã‚‹">stack-templates ã‚’é›†ã‚ã‚‹</h2>
<p>ã•ã¦ï¼Œã“ã‚Œã ã‘ã§ã¯å®Œå…¨ã« e-bigmoon ã•ã‚“ã®åŠ£åŒ–è¨˜äº‹ã ï¼ ãªã®ã§ï¼Œstack-templates ã‚’ GitHub ã‹ã‚‰é›†ã‚ã¦ãã‚‹ CLI ãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚‹ã“ã¨ã«ã—ãŸï¼</p>
<p>è©¦ã—ãŸã¨ã“ã‚ï¼ŒGitHub ã®æ¤œç´¢ã§ <code>stack-template in:name</code> ã¨æ¤œç´¢ã™ã‚Œã°ï¼Œãã‚Œãªã‚Šã«ãƒ’ãƒƒãƒˆã™ã‚‹ã“ã¨ãŒã‚ã‹ã£ãŸ(é–“é•ã„ã‚‚å¤šã„ãŒ)ï¼ ãªã®ã§ï¼Œã–ã£ãã‚Šã¨ã—ãŸæ‰‹é †ã¯:</p>
<ol type="1">
<li>æ¤œç´¢ç³»ã® GitHub API ã‚’å©ã</li>
<li>stack-templates ã¨ã„ã†åå‰ã®ãƒªãƒã‚¸ãƒˆãƒªã® <code>*.hsfiles</code> ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘æŠ½å‡º</li>
<li>ãã‚Œã‚‰ã‚’å‡ºåŠ›</li>
</ol>
<p>ã“ã“ã§ GitHub API v3 (RESTful API)ã‚’åˆ©ç”¨ã™ã‚‹ã¨ï¼Œãƒªãƒã‚¸ãƒˆãƒªã®ãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã‚’å–å¾—ã™ã‚‹ã®ã«æ¤œç´¢ç³»ã® API ã‚’å©ã„ã¦ã‹ã‚‰ï¼Œå„ãƒªãƒã‚¸ãƒˆãƒªã® API ã‚’å©ãå¿…è¦ãŒã‚ã‚‹ï¼ ãã‚Œã¯é¢å€’ã ï¼ ãªã®ã§ï¼Œã“ã“æ•°å¹´æ³¨ç›®ã‚’é›†ã‚ã¦ã„ã‚‹(ï¼Ÿ) GraphQL API (GitHub API v4)ã‚’è©¦ã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ãŸï¼</p>
<h3 id="graphql">GraphQL</h3>
<p>ã¡ã‚‡ã†ã©ã“ã®å‰ã«ï¼Œå‹äººã‹ã‚‰ã€ŒGraphQL ã¯ã„ã„ãï¼ŒAPI ã‚’ãªã‚“ã©ã‚‚å©ãå¿…è¦ãŒãªã„ï¼ã€ã¨ç´¹ä»‹ã•ã‚ŒãŸã®ã§è©¦ã—ã¦ã¿ãŸï¼</p>
<p>GitHub ã® API ã§ã¯ <code>api.github.com/graphql</code> ã¨ã„ã†ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«å¯¾ã—ï¼ŒPOST ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚¯ã‚¨ãƒªã‚’é€ä¿¡ã™ã‚‹ï¼</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" data-line-number="1">$ <span class="ex">curl</span> \</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">  -H <span class="st">&quot;Authorization: bearer token&quot;</span> \</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">  -X POST \</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">  -d <span class="st">&quot;{ </span><span class="dt">\&quot;</span><span class="st">query</span><span class="dt">\&quot;</span><span class="st">: </span><span class="dt">\&quot;</span><span class="st"> ... </span><span class="dt">\&quot;</span><span class="st"> }&quot;</span> \</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">  https://api.github.com/graphql</a></code></pre></div>
<p><code>...</code> ã®ã¨ã“ã‚ã«ã‚¯ã‚¨ãƒªã‚’è¨˜è¿°ã™ã‚‹ï¼ ã‚¯ã‚¨ãƒªã¯ç°¡å˜ãª DSL ã®ã‚ˆã†ã«ãªã£ã¦ãŠã‚Šï¼Œã‚¯ã‚¨ãƒªã«ã‚ˆã£ã¦ã©ã‚“ãªå½¢ã® JSON ãŒè¿”ã£ã¦ãã‚‹ã‹(å‹ã®ã‚ˆã†ãªã‚‚ã®)ã‚„ã©ã‚“ãªå€¤ãŒè¿”ã£ã¦ãã‚‹ã‹ãŒæ±ºã¾ã‚‹ï¼ ä¾‹ãˆã° <code>stack-template in:name</code> æ¤œç´¢ã—ã¦ãƒ’ãƒƒãƒˆã—ãŸãƒªãƒã‚¸ãƒˆãƒªã®åå‰ã ã‘ã‚’å–å¾—ã—ã¦ã¿ã‚ˆã†ï¼ ãã®å ´åˆã¯æ¬¡ã®ã‚ˆã†ãªã‚¯ã‚¨ãƒªã‚’æ›¸ãï¼</p>
<pre><code>query{
  search(query: &quot;stack-template in:name&quot;, type: REPOSITORY, first: 2) {
    repositoryCount,
    edges{
      node{ ... on Repository{ nameWithOwner } }
    }
  }
}</code></pre>
<p><code>first</code> ã¯æ¤œç´¢ã«ãƒ’ãƒƒãƒˆã—ãŸæœ€åˆã®2ã¤ã‚’è¿”ã™ã¨ã„ã†æ„å‘³ï¼ ä¸Šé™ã¯ 100 ã§ï¼Œ<code>first</code> ãªã„ã—ã¯é€†ã®æ„å‘³ã® <code>last</code> ã®ã©ã¡ã‚‰ã‹ã¯æŒ‡å®šã‚’ã™ã‚‹å¿…è¦ãŒã‚ã‚‹(ãã†ã„ã†ã‚¨ãƒ©ãƒ¼ãŒè¿”ã£ã¦ãã‚‹)ï¼ <code>repositoryCount</code> ã¯æ¤œç´¢ã§ãƒ’ãƒƒãƒˆã—ãŸãƒªãƒã‚¸ãƒˆãƒªã®ç·æ•°ã§ï¼Œ<code>edges</code> ã®ã¨ã“ã‚ã¯ãƒªãƒã‚¸ãƒˆãƒªã® <code>nameWithOwner</code> ã‚’è¿”ã™ã‚ˆã†ã«æŒ‡å®šã—ã¦ã„ã‚‹ï¼ ã“ã®ã‚ˆã†ã« <code>{}</code> ã®ä¸­ã§ã¯ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§ï¼Œè¿”ã™ JSON ã®å½¢ã‚’æŒ‡å®šã§ãã‚‹ï¼ å…·ä½“çš„ã«ä½•ãŒæŒ‡å®šã§ãã‚‹ã‹ã¯ <a href="https://developer.github.com/v4/query/">GitHub API v4 ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã‚’è¦‹ã‚‹ã¨è‰¯ã„ï¼ è©¦ã—ã« curl ã§å©ã„ã¦ã¿ã‚‹(ã‚¯ã‚¨ãƒªå†…ã® <code>&quot;</code> ã‚’ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã™ã‚‹ã“ã¨ã‚’å¿˜ã‚Œãšã«):</p>
<pre><code>$ curl -H &quot;Authorization: bearer XXX&quot; -X POST -d &quot;{ \&quot;query\&quot;: \&quot; ... \&quot; }&quot; https://api.github.com/graphql
{&quot;data&quot;:{&quot;search&quot;:{&quot;repositoryCount&quot;:76,&quot;edges&quot;:[{&quot;node&quot;:{&quot;nameWithOwner&quot;:&quot;Azure/AzureStack-QuickStart-Templates&quot;}},{&quot;node&quot;:{&quot;nameWithOwner&quot;:&quot;commercialhaskell/stack-templates&quot;}}]}}}</code></pre>
<p>Connection ã¨ã‹ Fields ã¨ã‹ã®ç”¨èªã«ã¤ã„ã¦ã¯è‡ªåˆ†ã‚‚ã‚ˆãã‚ã‹ã£ã¦ãªã„ã®ã§è‡ªåˆ†ã§èª¿ã¹ã¦ãã ã•ã„ï¼ ä»Šã®ã¨ã“ã‚ï¼Œé›°å›²æ°—ã§ä½¿ã£ã¦ã‚‹(ç¬‘)</p>
<h3 id="ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é›†ã‚ã‚‹">ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é›†ã‚ã‚‹</h3>
<p>ã•ã¦ï¼Œå‰è¿°ã—ãŸçµæœ(ãƒªãƒã‚¸ãƒˆãƒªå)ã ã‘ãŒæ¬²ã—ã„ãªã‚‰ GitHub API v3 ã§ã‚‚ååˆ†ã ï¼ ã•ã‚‰ã«ï¼Œãƒ•ã‚¡ã‚¤ãƒ«ã‚‚å–å¾—ã—ã¦ã¿ã‚ˆã†ï¼ <a href="https://developer.github.com/v4/object/repository/">Repository ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a> ã‚’çœºã‚ã‚‹ã¨ <code>object</code> ã¨ã„ã† Field ãŒã‚ã‚‹ï¼ å¯Ÿã™ã‚‹ã«ï¼Œãƒªãƒã‚¸ãƒˆãƒªã®ä»»æ„ã®ãƒ–ãƒ©ãƒ³ãƒ(<code>expression</code> ã§æŒ‡å®šã—ãŸã‚‚ã®)ã®ã‚³ãƒŸãƒƒãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã—ã¦ãã‚Œã‚‹ã®ã ã‚ã†ï¼ (ãŸã¶ã‚“)stack-templates ã¯å…¨éƒ¨ master ãŒå‰æãªã®ã§ï¼Œmaster ã®ã‚³ãƒŸãƒƒãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–ã£ã¦ãã‚‹ï¼</p>
<pre><code>... on Repository{
  nameWithOwner,
  object(expression:&quot;master&quot;){
    ... on Commit { }
  }
}</code></pre>
<p>ã¡ãªã¿ã« <code>... on Commit</code> ã¨ã„ã†ã®ã¯ Inline Fragments ã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ã§ï¼Œobject ã®å‹(ã‚µãƒ–ã‚¿ã‚¤ãƒ—ï¼Ÿ)ãŒ <code>Commit</code> ã ã£ãŸå ´åˆã« <code>Commit{}</code> ä»¥ä¸‹ã® Field ã‚’è¿”ã™ãã†ã ï¼ git ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãªã®ã§ä»–ã«ã‚‚ <code>Tree</code> ã‚„ <code>Blob</code> ãŒã‚ã‚‹ï¼</p>
<p>ã•ã¦ï¼Œã‚ã¨ã¯ git ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®çŸ¥è­˜ãŒã‚ã‚Œã°ç°¡å˜ã«ã‹ã‘ã‚‹ï¼ ã‚³ãƒŸãƒƒãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ãƒ„ãƒªãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼Œè¦ã™ã‚‹ã«ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒãƒƒã‚·ãƒ¥ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã®ã§<a href="https://developer.github.com/v4/object/commit/">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã‹ã‚‰ãã‚Œã£ã½ã„ã®ã‚’è¦‹ã¤ã‘ã‚‹ï¼ ãƒ„ãƒªãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ï¼Œãã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å«ã¾ã‚Œã‚‹ãƒ–ãƒ­ãƒ–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ(ãƒ•ã‚¡ã‚¤ãƒ«)ã¨ãƒ„ãƒªãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ(ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª)ã®ãƒãƒƒã‚·ãƒ¥ãŒè¨˜è¼‰ã•ã‚Œã¦ã‚‹ï¼ stack-templates ã¯(ä»Šã®ã¨ã“ã‚)ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã« <code>*.hsfiles</code> ã‚’ç½®ã‹ãªã„ã¨ã„ã‘ãªã„ã®ã§ï¼Œãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŸã¡ã®åå‰ã‚’å–å¾—ã—ã‚ˆã†:</p>
<pre><code>... on Repository{
  nameWithOwner,
  object(expression:&quot;master&quot;){
    ... on Commit { tree{ entries{ name, type } } }
  }
}</code></pre>
<p><code>type</code> ã«ã¯ <code>blob</code> ã‚„ã‚‰ <code>tree</code> ã‚„ã‚‰ãŒå…¥ã‚‹ï¼ ã“ã‚Œã§ï¼Œæ¤œç´¢ã«ãƒ’ãƒƒãƒˆã—ãŸå…¨ã¦ã®ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ <code>master</code> ã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã«ã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–å¾—ã™ã‚‹ã‚¯ã‚¨ãƒªãŒå‡ºæ¥ä¸ŠãŒã£ãŸï¼</p>
<h3 id="ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³">ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³</h3>
<p>ä»Šã®ã¨ã“ã‚ï¼Œæ¤œç´¢ã«ãƒ’ãƒƒãƒˆã™ã‚‹ãƒªãƒã‚¸ãƒˆãƒªæ•°ã¯76å€‹ãªã®ã§ <code>first: 100</code> ã¨ã™ã‚Œã°å…¨ã¦å–å¾—ã§ãã‚‹ãŒï¼Œä»Šå¾Œãƒ’ãƒƒãƒˆæ•°ãŒ100ã‚’è¶…ãˆãŸã¨ãã‚ˆã†ã«ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã®ä»•çµ„ã¿ã‚’æ•´ãˆã¦ãŠãï¼ ã‚„ã‚Šæ–¹ã¯ç°¡å˜ã§ï¼Œ<code>search</code> Connection ã®ã¨ã“ã‚ã§ <a href=""><code>pageInfo</code></a> ã¨ã„ã† Field ã‚’è¿½åŠ ã™ã‚‹ï¼</p>
<pre><code>search(query: &quot;stack-template in:name&quot;, type: REPOSITORY, first: 1) {
  repositoryCount,
  pageInfo{
    endCursor,
    hasNextPage
  },
  edges{
    node{ ... on Repository{ .... } }
  }
}</code></pre>
<p><code>hasNextPage</code> ã¯æ¬¡ã®ãƒšãƒ¼ã‚¸ãŒå­˜åœ¨ã™ã‚‹ã‹ã©ã†ã‹ã‚’çœŸå½å€¤ã§è¿”ã—ã¦ãã‚Œã‚‹ï¼ <code>endCursor</code> ã¯ã“ã®ãƒšãƒ¼ã‚¸ã®æœ€å¾Œã‚’è¡¨ã™ãƒãƒƒã‚·ãƒ¥å€¤ï¼Ÿã§ï¼Œ<code>search</code> Connection ã®å¼•æ•°(<code>type</code> ã¨ã‹ <code>first</code> ã¨ã‹ã®ã¨ã“)ã« <code>after</code> ã§æŒ‡å®šã™ã‚‹ã“ã¨ã§ï¼Œãã‚Œä»¥é™ã®çµæœã‚’å–ã£ã¦ãã‚‹ï¼ ã“ã®ã‚ˆã†ãª <code>pageInfo</code> ã®æƒ…å ±ã•ãˆã‚ã‚Œã°ï¼Œãƒ—ãƒ­ã‚°ãƒ©ãƒ å†…ã§ãƒ«ãƒ¼ãƒ—ã•ã›ã‚‹ã“ã¨ã¯å®¹æ˜“ã ã‚ã†ï¼</p>
<h3 id="ã¾ã¨ã‚ã‚‹ã¨">ã¾ã¨ã‚ã‚‹ã¨</h3>
<p>æ¬¡ã®ã‚ˆã†ãªã‚¯ã‚¨ãƒªã«ãªã£ãŸ:</p>
<pre><code>query{
  search(query: &quot;stack-template in:name&quot;, type: REPOSITORY, first: 100) {
    repositoryCount,
    pageInfo{
      endCursor,
      hasNextPage
    },
    edges{
      node{ ... on Repository{
        nameWithOwner,
        object(expression:&quot;master&quot;){
          ... on Commit { tree{ entries{ name, type } } }
        }
      } }
    }
  }
}</code></pre>
<p>ã“ã‚Œã‚’ curl ã®å¼•æ•°ã«ä¸ãˆã¦å©ãã ã‘ã§ 100 å€‹åˆ†ã®ãƒªãƒã‚¸ãƒˆãƒªã®å…¨ã¦ã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã‚’å–å¾—ã§ãã‚‹ï¼</p>
<h3 id="stack-tpls">stack-tpls</h3>
<p>å®Ÿéš›ã«ä½œã£ãŸ CLI ãƒ„ãƒ¼ãƒ«ã¯ <a href="https://github.com/matsubara0507/stack-tpls"><code>matsubara0507/stack-tpls</code></a> ã¨ã„ã†ãƒªãƒã‚¸ãƒˆãƒªã«ç½®ã„ã¦ã‚ã‚‹ï¼ ä½¿ã„æ–¹ã¯ README ã«æ›¸ã„ã¦ã‚ã‚‹ï¼ ä¸€è¦§ã‚’å–å¾—ã™ã‚‹ã«ã¯ <code>stack-tpls --list</code> ã¨æ‰“ã¦ã°è‰¯ã„ï¼</p>
<pre><code>$ stack-tpls --list
github:commercialhaskell/chrisdone.hsfiles
github:commercialhaskell/foundation.hsfiles
 .
 .
 .</code></pre>
<p>ã“ã®çµæœã‚’ <code>stack new</code> ã®å¼•æ•°ã«ä¸ãˆã‚‹ã“ã¨ã§ãã®ã¾ã¾åˆ©ç”¨ã§ãã‚‹ï¼ ã¾ãŸï¼Œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä¸­èº«ã‚’ç¢ºèªã—ãŸã„å ´åˆã¯ï¼Œ<code>stack-tpls github:commercialhaskell/chrisdone.hsfiles</code> ã¨å¼•æ•°ã«ä¸ãˆã‚‹ã“ã¨ã§ Raw ã‚’å–ã£ã¦ãã¦ãã‚Œã‚‹ï¼ ãƒªãƒ³ã‚¯ã ã‘ãŒæ¬²ã—ã„å ´åˆã¯ <code>--link</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹ã¨è‰¯ã„ï¼</p>
<pre><code>$ stack-tpls --link github:commercialhaskell/rio.hsfiles
https://github.com/commercialhaskell/stack-templates/blob/master/rio.hsfiles</code></pre>
<h3 id="todo">ToDo</h3>
<p>ä¸€é€±é–“ã»ã©å‰ã®æ€ã„ã¤ãã‹ã‚‰ã®çªè²«ã§ä½œã£ãŸã®ã§ã‚¤ãƒ­ã‚¤ãƒ­ã¨æŠœã‘ã¦ã‚‹ç®‡æ‰€ãŒã‚ã£ã¦:</p>
<ul>
<li>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒé›‘</li>
<li>GitLab ã¨ BitBucket ã«ã¯å¯¾å¿œã—ã¦ã„ãªã„</li>
<li>GraphQL ã®ä½¿ã„æ–¹ãŒã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆã˜ã‚ƒãªã„</li>
</ul>
<p>ç‰¹ã«æœ€å¾Œã®ãŒã™ã”ã„æ°—ã«ãªã£ã¦ã„ã¦ï¼Œç¾çŠ¶ã¯å®Œå…¨ã«æ–‡å­—åˆ—ã‚’åŸ‹ã‚è¾¼ã‚“ã§ã„ã‚‹ã ã‘ãªã®ã ï¼ ã§ãã‚Œã°ï¼Œå¼·åŠ›ãªå‹ã‚·ã‚¹ãƒ†ãƒ ã‚’åˆ©ç”¨ã—ãŸ GitHub GraphQL Client ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œã‚ŠãŸã„(ãªã‚“ã‹æ˜”ã« Haskell-jp ã§è©±é¡Œã«ä¸ŠãŒã£ãŸãªã)ï¼</p>
<h2 id="ãŠã—ã¾ã„">ãŠã—ã¾ã„</h2>
<p>GraphQLï¼Œã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã«å–ã£ã¦ã™ã”ã„ä¾¿åˆ©ï¼</p>
  </div>
</div>
</article>
]]></summary>
</entry>
<entry>
    <title>Haskell Servant ã§ GitHub Webhook</title>
    <link href="https://matsubara0507.github.io/posts/2018-08-18-haskell-github-webhook.html" />
    <id>https://matsubara0507.github.io/posts/2018-08-18-haskell-github-webhook.html</id>
    <published>2018-08-18T00:00:00Z</published>
    <updated>2018-08-18T00:00:00Z</updated>
    <summary type="html"><![CDATA[<article class="post card" itemscope itemtype="http://schema.org/BlogPosting">
 <div class="card-content">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Haskell Servant ã§ GitHub Webhook</h1>
    <p class="post-meta">
      <time datetime="2018-08-18" itemprop="datePublished">
        Aug 18, 2018
      </time>
      
      
      <div class="tags">
          <i class="fa fa-tags"></i> <a href="/tags/Haskell.html">Haskell</a> <a href="/tags/rio.html">rio</a>
      </div>
      
    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>ä¹…ã€…ã®æŠ•ç¨¿ï¼ ã¨ã‚ã‚‹äº‹æƒ…ã§ GitHub Webhook ç”¨ã®ã‚µãƒ¼ãƒãƒ¼ã‚’ Haskell ã§æ›¸ã„ãŸã®ã§ãã®ãƒ¡ãƒ¢æ›¸ãã§ã™ï¼</p>
<h2 id="ã‚„ã£ãŸã“ã¨">ã‚„ã£ãŸã“ã¨</h2>
<ul>
<li><a href="http://hackage.haskell.org/package/rio">rio</a> ã®ãƒ­ã‚¬ãƒ¼ã‚’ Servant ã§ä½¿ã†</li>
<li><a href="http://hackage.haskell.org/package/servant-github-webhook">servant-github-webhook</a> ã‚’ä½¿ã£ã¦ Webhook ç”¨ã® Servant ã‚µãƒ¼ãƒãƒ¼ã®æ§‹ç¯‰</li>
</ul>
<p>å®Ÿéš›ã«æ›¸ã„ãŸã‚³ãƒ¼ãƒ‰ã¯<a href="https://github.com/matsubara0507/git-plantation/commit/b93ed3398b30dbba105a580d58e947f131cf1a9a">ã“ã®è¾ºã‚Š</a>ã‚’è¦‹ã‚‹ã¨è‰¯ã„ã‹ãªï¼ è‰²ã€…ã¨é€”ä¸­ã®ã†ãˆï¼Œãã‚‚ãã‚‚ GitHub Webhook ãŒãƒ¡ã‚¤ãƒ³ã§ã¯ãªã„ãƒªãƒã‚¸ãƒˆãƒªãªã®ã§è¦‹ã«ãã„æ°—ãŒã™ã‚‹ã‘ã©ï¼</p>
<h2 id="servant-ã§-rio-ãƒ¢ãƒŠãƒ‰">Servant ã§ rio ãƒ¢ãƒŠãƒ‰</h2>
<p>ã“ã‚Œã¯ã¾ããŠã¾ã‘ã§ã™ã­ï¼ rio ã¯ãƒ­ã‚®ãƒ³ã‚°ã¨ã‹ãŒä¾¿åˆ©ãªã®ã§ï¼Œå…ˆã«ç´¹ä»‹ã—ã¦ä»¥é™ã§åˆ©ç”¨ã™ã‚‹ï¼</p>
<h3 id="ãƒ­ã‚¬ãƒ¼ã®æº–å‚™">ãƒ­ã‚¬ãƒ¼ã®æº–å‚™</h3>
<p>ã¾ãšã¯ãƒ­ã‚®ãƒ³ã‚°ç”¨ã®ãƒ¢ãƒŠãƒ‰ã‚’å®šç¾©ã™ã‚‹ï¼</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="ot">{-# LANGUAGE DataKinds        #-}</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="ot">{-# LANGUAGE OverloadedLabels #-}</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="ot">{-# LANGUAGE TypeOperators    #-}</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw">import</span>           <span class="dt">RIO</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="kw">import</span>           <span class="dt">Data.Extensible</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="kw">type</span> <span class="dt">Env</span> <span class="fu">=</span> <span class="dt">Record</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9">  <span class="ch">&#39;[ &quot;logger&quot; &gt;: LogFunc</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10">   ]</a>
<a class="sourceLine" id="cb1-11" data-line-number="11"></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="kw">instance</span> <span class="dt">HasLogFunc</span> <span class="dt">Env</span> <span class="kw">where</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13">  logFuncL <span class="fu">=</span> lens (view <span class="fu">#</span>logger) (\x y <span class="ot">-&gt;</span> x <span class="fu">&amp;</span> <span class="fu">#</span>logger <span class="ot">`set`</span> y)</a></code></pre></div>
<p>ã„ã‚ã‚†ã‚‹ Has ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã„ã†ã‚„ã¤ï¼ ã“ã‚Œã§ <code>RIO Env</code> ã¨ã„ã†ã®ãŒãƒ­ã‚¬ãƒ¼ã‚’æ‰±ãˆã‚‹ãƒ¢ãƒŠãƒ‰ã¨ãªã‚‹ï¼</p>
<h3 id="servant-ã§ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒŠãƒ‰">Servant ã§ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒŠãƒ‰</h3>
<p>Servent Server ã®ãƒ¡ã‚¤ãƒ³é–¢æ•°ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«å®šç¾©ã§ãã‚‹ï¼</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">import</span>           <span class="dt">RIO</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw">import</span>           <span class="dt">Data.Extensible</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="kw">import</span> <span class="kw">qualified</span> <span class="dt">Network.Wai.Handler.Warp</span> <span class="kw">as</span> <span class="dt">Warp</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="kw">import</span>           <span class="dt">Servant</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="ot">main ::</span> <span class="dt">IO</span> ()</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">main <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9">  logOpts <span class="ot">&lt;-</span> logOptionsHandle stdout <span class="dt">False</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10">  withLogFunc logOpts <span class="fu">$</span> \logger <span class="ot">-&gt;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11">    <span class="kw">let</span> env <span class="fu">=</span> <span class="fu">#</span>logger <span class="fu">@=</span> logger</a>
<a class="sourceLine" id="cb2-12" data-line-number="12">           <span class="fu">&lt;:</span><span class="ot"> nil ::</span> <span class="dt">Env</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13">    hPutBuilder stdout <span class="st">&quot;Listening on port 8080&quot;</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14">    Warp.run <span class="dv">8080</span> <span class="fu">$</span> app env</a>
<a class="sourceLine" id="cb2-15" data-line-number="15"></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="ot">app ::</span> <span class="dt">Env</span> <span class="ot">-&gt;</span> <span class="dt">Application</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17">app <span class="fu">=</span> undefined</a></code></pre></div>
<p>ã•ã¦ï¼Œå•é¡Œã¯ã“ã® <code>app</code> é–¢æ•°ã ï¼ æ™®é€šã¯ <a href="http://hackage.haskell.org/package/servant-server-0.14.1/docs/Servant-Server.html#t:Server"><code>Server</code></a> å‹ã¨ <a href="http://hackage.haskell.org/package/servant-server-0.14.1/docs/Servant-Server.html#v:serve"><code>serve</code></a> é–¢æ•°ã‚’ç”¨ã„ã¦æ¬¡ã®ã‚ˆã†ã«æ›¸ãï¼</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">type</span> <span class="dt">API</span> <span class="fu">=</span> <span class="fu">...</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="ot">api ::</span> <span class="dt">Proxy</span> <span class="dt">API</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">api <span class="fu">=</span> <span class="dt">Proxy</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="ot">server ::</span> <span class="dt">Server</span> <span class="dt">API</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">server <span class="fu">=</span> <span class="fu">...</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="ot">app ::</span> <span class="dt">Application</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10">app <span class="fu">=</span>  serve api server</a></code></pre></div>
<p><code>Server</code> å‹ã®ä»£ã‚ã‚Šã«ï¼Œã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒŠãƒ‰ã‚’åˆ©ç”¨ã™ã‚‹ã«ã¯ <a href="http://hackage.haskell.org/package/servant-server-0.14.1/docs/Servant-Server.html#t:ServerT"><code>ServerT</code></a> å‹ã¨ <a href="http://hackage.haskell.org/package/servant-server-0.14.1/docs/Servant-Server.html#v:hoistServer"><code>hoistServer</code></a> é–¢æ•°ã‚’ç”¨ã„ã‚‹ï¼ ãã‚Œãã‚Œã®å‹å®šç¾©ã¯æ¬¡ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ï¼</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">type</span> <span class="dt">Server</span> api <span class="fu">=</span> <span class="dt">ServerT</span> api <span class="dt">Handler</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="ot">serve ::</span> <span class="dt">HasServer</span> api <span class="ch">&#39;[] =&gt; Proxy api -&gt; Server api -&gt; Application</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="ot">hoistServer ::</span> <span class="dt">HasServer</span> api <span class="ch">&#39;[] =&gt; Proxy api -&gt; (forall x. m x -&gt; n x) -&gt; ServerT api m -&gt; ServerT api n</span></a></code></pre></div>
<p>ã•ãã‚ã¨ã¯å‹ãƒ‘ã‚ºãƒ«ã ï¼</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="ot">server ::</span> <span class="dt">ServerT</span> (<span class="dt">RIO</span> <span class="dt">Env</span>) <span class="dt">API</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">server <span class="fu">=</span> <span class="fu">...</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="ot">app ::</span> <span class="dt">Env</span> <span class="ot">-&gt;</span> <span class="dt">Application</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5">app env <span class="fu">=</span> serve api <span class="fu">$</span> hoistServer api (runRIO env) server</a></code></pre></div>
<p>ã“ã‚Œã§ã€€<code>server</code> é–¢æ•°ã§å‘¼ã³å‡ºã™ï¼Œ API ã”ã¨ã®é–¢æ•°ã§ <code>logInfo</code> ã®ã‚ˆã†ãª rio ã®ãƒ­ã‚®ãƒ³ã‚°é–¢æ•°ã‚’å‘¼ã¶ã“ã¨ãŒã§ãã‚‹ï¼</p>
<h2 id="servant-ã§-github-webhhok">Servant ã§ GitHub Webhhok</h2>
<p>ã•ã¦è‰²ã€…æº–å‚™ãŒã§ããŸã®ã§ï¼Œã„ã‚ˆã„ã‚ˆ GitHub Webhook ã®æ–¹ã«è©±ã‚’ç§»ã™ï¼ Haskell Servant ã§ GitHub Webhook ã‚’ä½¿ã†ã«ã¯ <a href="http://hackage.haskell.org/package/servant-github-webhook">servant-github-webhook</a>ã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã†ï¼ æ„å¤–ã¨ï¼Œã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä½¿ã„æ–¹ã‚’æ›¸ã„ãŸè¨˜äº‹ãŒãªãæ‰‹é–“å–ã£ãŸã®ã§ã¾ã¨ã‚ã‚‹ï¼</p>
<h3 id="ping-api-ã‚’ä½œã‚‹">ping API ã‚’ä½œã‚‹</h3>
<p>ping API ã¯ GitHub Webhook ã®è¨­å®šãŒã†ã¾ãã§ãã¦ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ API ã ï¼</p>
<p><img src="/assets/haskell-github-webhook/ping-event.jpg" /></p>
<p>ping API ã¯æ¬¡ã®ã‚ˆã†ã«è¨­å®šã™ã‚Œã°è‰¯ã„ï¼</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">import</span>           <span class="dt">GitHub.Data.Webhooks.Events</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw">import</span>           <span class="dt">Servant</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="kw">import</span>           <span class="dt">Servant.GitHub.Webhook</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="kw">type</span> <span class="dt">API</span> <span class="fu">=</span> <span class="st">&quot;hook&quot;</span> <span class="fu">:&gt;</span> <span class="dt">WebhookAPI</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="kw">type</span> <span class="dt">WebhookAPI</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8">      <span class="fu">=</span> <span class="dt">GitHubEvent</span> <span class="ch">&#39;[ &#39;</span><span class="dt">WebhookPingEvent</span> ]</a>
<a class="sourceLine" id="cb6-9" data-line-number="9">        <span class="fu">:&gt;</span> <span class="dt">GitHubSignedReqBody</span> <span class="ch">&#39;[JSON] PublicEvent</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10">        <span class="fu">:&gt;</span> <span class="dt">Post</span> <span class="ch">&#39;[JSON] ()</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="ot">server ::</span> <span class="dt">ServerT</span> (<span class="dt">RIO</span> <span class="dt">Env</span>) <span class="dt">API</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13">server <span class="fu">=</span> pingWebhook</a>
<a class="sourceLine" id="cb6-14" data-line-number="14"></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="ot">pingWebhook ::</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16">  <span class="dt">RepoWebhookEvent</span> <span class="ot">-&gt;</span> ((), <span class="dt">PublicEvent</span>) <span class="ot">-&gt;</span> <span class="dt">Plant</span> ()</a>
<a class="sourceLine" id="cb6-17" data-line-number="17">pingWebhook _ (_, ev) <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb6-18" data-line-number="18">  logInfo <span class="fu">$</span> <span class="st">&quot;Hook Ping Event: &quot;</span> <span class="fu">&lt;&gt;</span> displayShow ev</a></code></pre></div>
<p>GitHub Webhook ã‚’ä½¿ã†ã«ã¯ Servant ã® Context æ©Ÿèƒ½ã§ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼ã‚’æ¸¡ã™å¿…è¦ãŒã‚ã‚‹ï¼</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">import</span>           <span class="dt">System.Environment</span>       (getEnv)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="ot">main ::</span> <span class="dt">IO</span> ()</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">main <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5">    <span class="fu">...</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6">    <span class="kw">let</span> key <span class="fu">=</span> gitHubKey <span class="fu">$</span> fromString <span class="fu">&lt;$&gt;</span> getEnv <span class="st">&quot;GH_SECRET&quot;</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7">    Warp.run <span class="dv">8080</span> <span class="fu">$</span> app env key</a>
<a class="sourceLine" id="cb7-8" data-line-number="8"></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="ot">app ::</span> <span class="dt">Env</span> <span class="ot">-&gt;</span> <span class="dt">GitHubKey</span> <span class="dt">PublicEvent</span> <span class="ot">-&gt;</span> <span class="dt">Application</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10">app env key <span class="fu">=</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11">  serveWithContext api (key <span class="fu">:.</span> <span class="dt">EmptyContext</span>) <span class="fu">$</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12">    hoistServerWithContext api context (runRIO env) server</a>
<a class="sourceLine" id="cb7-13" data-line-number="13"></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="ot">context ::</span> <span class="dt">Proxy</span> <span class="ch">&#39;[ GitHubKey PublicEvent ]</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15">context <span class="fu">=</span> <span class="dt">Proxy</span></a></code></pre></div>
<p>å®Ÿè¡Œã™ã‚‹ã¨ãã¯ <code>GH_SECRET</code> ç’°å¢ƒå¤‰æ•°ã«è¨­å®šã—ãŸæ–‡å­—åˆ—ã‚’ GitHub Webhook ã®è¨­å®šã® Secret ã«æ›¸ãè¾¼ã‚€ï¼</p>
<h3 id="push-api-ã‚’åŠ ãˆã‚‹">push API ã‚’åŠ ãˆã‚‹</h3>
<p>ã‚‚ã†ä¸€å€‹ API ã‚’ç”Ÿã‚„ã—ã¦ã¿ã‚ˆã†ï¼</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">type</span> <span class="dt">WebhookAPI</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2">      <span class="fu">=</span> <span class="dt">GitHubEvent</span> <span class="ch">&#39;[ &#39;</span><span class="dt">WebhookPingEvent</span> ]</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">        <span class="fu">:&gt;</span> <span class="dt">GitHubSignedReqBody</span> <span class="ch">&#39;[JSON] PublicEvent</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4">        <span class="fu">:&gt;</span> <span class="dt">Post</span> <span class="ch">&#39;[JSON] ()</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5">   <span class="fu">:&lt;|&gt;</span> <span class="dt">GitHubEvent</span> <span class="ch">&#39;[ &#39;</span><span class="dt">WebhookPushEvent</span> ]</a>
<a class="sourceLine" id="cb8-6" data-line-number="6">        <span class="fu">:&gt;</span> <span class="dt">GitHubSignedReqBody</span> <span class="ch">&#39;[JSON] PushEvent</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7">        <span class="fu">:&gt;</span> <span class="dt">Post</span> <span class="ch">&#39;[JSON] ()</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="ot">server ::</span> <span class="dt">ServerT</span> (<span class="dt">RIO</span> <span class="dt">Env</span>) <span class="dt">API</span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10">server <span class="fu">=</span> pingWebhook <span class="fu">:&lt;|&gt;</span> pushWebhook</a>
<a class="sourceLine" id="cb8-11" data-line-number="11"></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="ot">pushWebhook ::</span> <span class="dt">RepoWebhookEvent</span> <span class="ot">-&gt;</span> ((), <span class="dt">PushEvent</span>) <span class="ot">-&gt;</span> <span class="dt">Plant</span> ()</a>
<a class="sourceLine" id="cb8-13" data-line-number="13">pushWebhook _ (_, ev) <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb8-14" data-line-number="14">  logInfo <span class="fu">$</span> <span class="st">&quot;Hook Push Event: &quot;</span> <span class="fu">&lt;&gt;</span> displayShow ev</a></code></pre></div>
<p>ã“ã‚Œã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨æ¬¡ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ãã‚‹ï¼</p>
<pre><code>Main.hs:38:3: error:
    â€¢ No instance for (HasContextEntry &#39;[] (GitHubKey&#39; () PushEvent))
        arising from a use of â€˜serveWithContextâ€™
    â€¢ In the expression: serveWithContext api (key :. EmptyContext)
      In the expression:
        serveWithContext api (key :. EmptyContext)
          $ hoistServerWithContext api context (runRIO env) server
      In an equation for â€˜appâ€™:
          app env key
            = serveWithContext api (key :. EmptyContext)
                $ hoistServerWithContext api context (runRIO env) server
   |
38 |   serveWithContext api (key :. EmptyContext) $ hoistServerWithContext api context (runRIO env) server
   |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</code></pre>
<p><a href="https://github.com/tsani/servant-github-webhook/issues/13#issuecomment-408463124">ã‚°ã‚°ã£ãŸçµæœ</a>ï¼Œã“ã†ã™ã‚‹ã¨ã„ã„ã‚‰ã—ã„ï¼</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="ot">{-# LANGUAGE MultiParamTypeClasses #-}</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="kw">import</span>           <span class="dt">Servant.GitHub.Webhook</span>    <span class="kw">hiding</span> (<span class="dt">GitHubKey</span>, gitHubKey)</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="kw">import</span> <span class="kw">qualified</span> <span class="dt">Servant.GitHub.Webhook</span>   (<span class="dt">GitHubKey</span>, gitHubKey)</a>
<a class="sourceLine" id="cb10-5" data-line-number="5"></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="ot">app ::</span> <span class="dt">Env</span> <span class="ot">-&gt;</span> <span class="dt">GitHubKey</span> <span class="ot">-&gt;</span> <span class="dt">Application</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7">app env key <span class="fu">=</span> <span class="fu">...</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="ot">context ::</span> <span class="dt">Proxy</span> <span class="ch">&#39;[ GitHubKey ]</span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10">context <span class="fu">=</span> <span class="dt">Proxy</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="co">-- HACK</span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="kw">newtype</span> <span class="dt">GitHubKey</span> <span class="fu">=</span></a>
<a class="sourceLine" id="cb10-14" data-line-number="14">  <span class="dt">GitHubKey</span> (forall result<span class="fu">.</span> <span class="dt">Servant.GitHub.Webhook.GitHubKey</span> result)</a>
<a class="sourceLine" id="cb10-15" data-line-number="15"></a>
<a class="sourceLine" id="cb10-16" data-line-number="16"><span class="ot">gitHubKey ::</span> <span class="dt">IO</span> <span class="dt">ByteString</span> <span class="ot">-&gt;</span> <span class="dt">GitHubKey</span></a>
<a class="sourceLine" id="cb10-17" data-line-number="17">gitHubKey k <span class="fu">=</span> <span class="dt">GitHubKey</span> (Servant.GitHub.Webhook.gitHubKey k)</a>
<a class="sourceLine" id="cb10-18" data-line-number="18"></a>
<a class="sourceLine" id="cb10-19" data-line-number="19"><span class="kw">instance</span> <span class="dt">HasContextEntry</span> <span class="ch">&#39;[GitHubKey] (Servant.GitHub.Webhook.GitHubKey result) where</span></a>
<a class="sourceLine" id="cb10-20" data-line-number="20">  getContextEntry (<span class="dt">GitHubKey</span> x <span class="fu">:.</span> _) <span class="fu">=</span> x</a></code></pre></div>
<h1 id="ãŠã—ã¾ã„">ãŠã—ã¾ã„</h1>
<p>ã¡ãªã¿ã«ï¼Œæ‰‹å…ƒã§è©¦ã™ã¨ãã«ã¯ ngrok ã‚’ä½¿ã£ãŸï¼ ä¾¿åˆ©ï¼</p>
  </div>
</div>
</article>
]]></summary>
</entry>
<entry>
    <title>Ruby Hack Challenge ï¼ƒ4 ã«å‚åŠ ã—ã¦ããŸ</title>
    <link href="https://matsubara0507.github.io/posts/2018-07-01-join-ruby-hack-challenge4.html" />
    <id>https://matsubara0507.github.io/posts/2018-07-01-join-ruby-hack-challenge4.html</id>
    <published>2018-07-01T00:00:00Z</published>
    <updated>2018-07-01T00:00:00Z</updated>
    <summary type="html"><![CDATA[<article class="post card" itemscope itemtype="http://schema.org/BlogPosting">
 <div class="card-content">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Ruby Hack Challenge ï¼ƒ4 ã«å‚åŠ ã—ã¦ããŸ</h1>
    <p class="post-meta">
      <time datetime="2018-07-01" itemprop="datePublished">
        Jul 1, 2018
      </time>
      
      
      <div class="tags">
          <i class="fa fa-tags"></i> <a href="/tags/Ruby.html">Ruby</a> <a href="/tags/event.html">event</a>
      </div>
      
    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>å…ˆé€± <a href="https://cookpad.connpass.com/event/88471/">Ruby Hack Cavalage #4</a> ã«å‚åŠ ã—ã¦ããŸã®ã§ï¼Œãã®ãƒ¡ãƒ¢æ›¸ãã§ã™ï¼</p>
<p>ã¡ãªã¿ã«ï¼ŒRuby ã¯è‡ªåˆ†ãŒæœ€åˆã«è§¦ã£ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã§ï¼Œç¾åœ¨ä»•äº‹ã§ä½¿ã£ã¦ã„ã‚‹ãƒ¡ã‚¤ãƒ³ã®è¨€èªã§ã™ï¼ æ¨ã—è¨€èª(Haskell)ã¨ã¯ç•°ãªã‚Šï¼Œå‹•çš„å‹ä»˜ã‘ã§ã¯ã‚ã‚Šã¾ã™ãŒï¼Œã€Œ<a href="http://i.loveruby.net/ja/rhg/book/">Rubyã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å®Œå…¨è§£èª¬</a>ã€ã‚„ã€Œ<a href="https://tatsu-zine.com/books/ruby-under-a-microscope-ja">Rubyã®ã—ãã¿</a>ã€ã®ã‚ˆã†ãªå‡¦ç†ç³»å†…éƒ¨ã‚’ç´¹ä»‹ã—ã¦ã‚‹èª­ã¿ç‰©ã‚‚å¤šãï¼Œã‹ãªã‚Šå¥½ããªæ–¹ãªè¨€èªã§ã™.</p>
<h2 id="ruby-hack-challenge">Ruby Hack Challenge</h2>
<p>Ruby å‡¦ç†ç³»ã‚’ãƒãƒƒã‚¯ã—ã‚ˆã†ã¨ã„ã†ã‚¤ãƒ™ãƒ³ãƒˆã§ï¼Œã‚³ã‚¢ã‚³ãƒŸãƒƒã‚¿ã® <a href="https://github.com/mame">mame</a> æ°ã¨ <a href="https://github.com/ko1">ko1</a> æ°ãŒè¬›å¸«ã¨ã—ã¦ä¼ç”»ã—ã¦ãã‚Œã¦ã„ã‚‹ï¼ ãµãŸã‚ŠãŒåœ¨ç±ã—ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã§ï¼Œä¼šå ´ã¯ã‚¯ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ã§è¡Œã£ã¦ã„ã‚‹ï¼</p>
<p>æ¯å›ï¼Œå‰åŠã«è¬›ç¾©çš„ãªã‚‚ã®ãŒã‚ã‚Šï¼Œå¾ŒåŠã§å®Ÿéš›ã«æ‰‹ã‚’å‹•ã‹ã—ã¦ Ruby ã«ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ã¨ã„ã£ãŸæ„Ÿã˜ã‚‰ã—ã„ï¼ ãŸã ã—ï¼Œ2æ—¥é–‹å‚¬ã ã£ãŸã‚Šï¼ŒåŠæ—¥ã ã£ãŸã‚Šæ™‚é–“ã¯ã¾ã¡ã¾ã¡(ä»Šå›ã¯åŠæ—¥ã ã£ãŸ)ï¼ ã‚¤ãƒ™ãƒ³ãƒˆåçš„ã« Ruby ã®ãƒãƒƒã‚«ã‚½ãƒ³ã¿ãŸã„ã ãŒï¼ŒRuby å‡¦ç†ç³»ã¯Cè¨€èªã§æ›¸ã‹ã‚Œã¦ã„ã‚‹ãŸã‚Cè¨€èªã‚’æ›¸ãã“ã¨ã«ãªã‚‹(ç¬‘)</p>
<h3 id="ã‚«ãƒãƒ¬ãƒƒã‚¸ç‰¹åˆ¥ä¼š">ã‚«ãƒãƒ¬ãƒƒã‚¸ç‰¹åˆ¥ä¼š</h3>
<p>ã—ã‹ã—ï¼Œ4å›ç›®(ã¨ãªã£ã¦ã„ã‚‹ãŒ3å›ç›®ãŒè¦‹å½“ãŸã‚‰ãªã„ã®ã§3å›ç›®ã‹ã‚‚ï¼Ÿï¼Ÿ)ã¨ãªã‚‹ä»Šå›ã¯ï¼Œã‚«ãƒãƒ¬ãƒƒã‚¸ç‰¹åˆ¥ä¼šã¨ã„ã†ã“ã¨ã§å¤šãã®äººãŸã¡ãŒ Ruby ã‚’èª­ã¿æ›¸ãã—ã¦ã„ãŸï¼ ãªãœã‹ã¨ã„ã†ã¨ï¼Œæ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ Ruby ã§æ›¸ã‹ã‚Œã¦ãŠã‚Šï¼Œä»Šå›ã¯æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’ã‚ã’ã¦ã‚‚è‰¯ã‹ã£ãŸã‹ã‚‰ã ï¼ ã¨ã„ã†ã‹ï¼ŒC ã§æ›¸ã‹ã‚Œã¦ã„ã‚‹ã‚³ã‚¢éƒ¨åˆ†ã¯ mame æ°ãŒæ˜”ã«å¤§åˆ†ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’ã‚ã’ã¦ã—ã¾ã£ãŸãŸã‚ï¼Œãã£ã¡ã‚’ã‚„ã‚‹ã®ã¯é›£ã—ã„ã¨è¨€ã£ã¦ã„ãŸï¼</p>
<h2 id="section"></h2>
<p>Cè¨€èªã®éƒ¨åˆ†ã§æ®‹ã£ã¦ã„ã‚‹ã¨ã™ã‚Œã°æœ¬è³ªçš„ã«é›£ã—ã„éƒ¨åˆ†(å‰¯ä½œç”¨ã¨ã‹ä¸¦è¡Œä¸¦åˆ—ã¨ã‹)ã‹æœ€è¿‘è¿½åŠ ã•ã‚ŒãŸéƒ¨åˆ†ã‹(JITã¨ã‹ï¼Ÿ)ã ãã†ã ï¼</p>
<h3 id="è³‡æ–™">è³‡æ–™</h3>
<p>ä»Šã¾ã§ã®ã‚‚å«ã‚ï¼Œè³‡æ–™ã¯(ã„ãã¤ã‹ï¼Ÿ)å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã®ã§èª°ã§ã‚‚è¦‹ã‚Œã‚‹ï¼</p>
<ul>
<li><a href="https://github.com/ko1/rubyhackchallenge">ko1/rubyhackchallenge - GitHub</a></li>
<li><a href="https://www.slideshare.net/mametter/ruby-hack-challenge-4">Ruby Hack Challenge #4 ã‚«ãƒãƒ¬ãƒƒã‚¸ç‰¹åˆ¥å› è³‡æ–™ - SlideShare</a></li>
</ul>
<p>ã¾ãŸ Gitter ã§é€£çµ¡ã‚’å–ã‚Šåˆã£ã¦ãŠã‚Šï¼Œå®Ÿã¯èª°ã§ã‚‚å‚åŠ ã§ãã‚‹(ãŸã¶ã‚“)ï¼</p>
<ul>
<li><a href="https://gitter.im/rubyhackchallenge/Lobby">rubyhackchallenge/Lobby - Gitter</a></li>
</ul>
<h2 id="section-1"></h2>
<p>ã¡ãªã¿ã«ï¼Œãƒœã‚¯ã¯ã‚‚ã¨ã‚‚ã¨ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯å‚åŠ ã—ãŸã„ãªãã¨æ€ã£ã¦ã„ãŸ(è¨€èªå¥½ããªã®ã§)ï¼</p>
<h2 id="ruby-ã®ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸">Ruby ã®ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸</h2>
<p>Ruby ã®ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã¯ Web ã‹ã‚‰ç¢ºèªã§ãã‚‹ï¼</p>
<ul>
<li><a href="https://rubyci.s3.amazonaws.com/debian8-coverage/ruby-trunk/lcov/index.html">LCOV - code coverage report</a></li>
</ul>
<p>ã“ã‚Œã‚’è¦‹ã¦ã‚«ãƒãƒ¬ãƒƒã‚¸ã®ä½ã„ã¨ã“ã‚ã«ã­ã‚‰ã„ç›®ã‚’ä»˜ã‘ã¦ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã™ã‚‹(ãªã„ã—ã¯ä¸è¦ãªå®Ÿè£…ãªã‚‰å‰Šã‚‹)ï¼ æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã„ãã¤ã‹ã¯å€‹åˆ¥ã« GitHub ã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ã®ã§ï¼ŒGitHub ã§ç®¡ç†ã•ã‚Œã¦ã‚‹å ´åˆã¯ãã£ã¡ã« PR ã‚’æŠ•ã’ã‚Œã°è‰¯ã„ã‚ˆã†ã (ä»Šå›ã¯äº‹æƒ…ãŒå…±æœ‰ã•ã‚Œã¦ãŸã›ã„ã‹ã™ããƒãƒ¼ã‚¸ã•ã‚ŒãŸ)ï¼</p>
<h2 id="section-2"></h2>
<p>ã¡ãªã¿ã«ï¼Œ<a href="https://github.com/ruby/ruby/blob/trunk/doc/maintainers.rdoc">ã‚³ã‚³</a>ã‚’è¦‹ã‚‹ã¨èª°ãŒãƒ¡ãƒ³ãƒ†ãƒŠãƒ¼ã§ï¼Œã©ã“ã«å ±å‘Šã™ã‚Œã°è‰¯ã„ã‹ãŒæ›¸ã„ã¦ã‚ã‚‹ï¼</p>
<h3 id="ç’°å¢ƒæ§‹ç¯‰">ç’°å¢ƒæ§‹ç¯‰</h3>
<p>ã¯äº‹å‰ã«ã‚„ã£ã¨ãã¨ï¼Œå½“æ—¥ã¯ã™ã‚“ãªã‚Šã‚³ãƒŸãƒƒãƒˆã§ããŸ(æ§‹ç¯‰æ–¹æ³•ã¯ã‚¹ãƒ©ã‚¤ãƒ‰ã«æ›¸ã„ã¦ã‚ã‚‹)ï¼ äº‹å‰ã«ã£ã¦è¨€ã£ã¦ã‚‚ã¼ãã¯è¡Œãã®é›»è»Šã§ã‚„ã£ãŸã‘ã©(ç¬‘)</p>
<p>Windows ã¨ Mac ã‚’æŒã£ã¦ã‚‹ã‘ã©ï¼Œã©ã£ã¡ã‚‚ç´ ã§ã‚„ã‚‹ã®ã¯é›£ã—ã„ã®ã§ï¼ŒDebian ã® Docker ã‚³ãƒ³ãƒ†ãƒŠã®ä¸Šã§æ§‹ç¯‰ã—ãŸï¼ Docker ã‚ã‚ŠãŒã¨ã†ï¼ ãƒ“ãƒ«ãƒ‰ãŒã‚ã£ã¡ã‚ƒé…ã„ã‘ã©ã­ï¼</p>
<h2 id="å½“æ—¥ã‚„ã£ãŸã“ã¨">å½“æ—¥ã‚„ã£ãŸã“ã¨</h2>
<p>ã™ã£ã£ã£ã”ã„ç°¡å˜ã«ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’ã‚ã’ã‚Œãã†ãªã®ãŒã‚ã£ãŸã®ã‚µã‚¯ãƒƒã¨ç›´ã—ã¦ PR ã‚’ã ã—ãŸï¼</p>
<ul>
<li><a href="https://github.com/ruby/cmath/pull/2">Add test for coverage by matsubara0507 Â· Pull Request #2 Â· ruby/cmath</a></li>
</ul>
<p><code>CMath</code> ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ <code>Math</code> ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒ©ãƒƒãƒ—ã—ã¦è¤‡ç´ æ•°(Complex number)ã«ã¾ã§å¯¾å¿œã•ã›ãŸã‚‚ã®ã ï¼ ãã®ãŸã‚ï¼Œè™šæ•°ã‚’å«ã‚€è¤‡ç´ æ•°ã«é–¢ã™ã‚‹ãƒ†ã‚¹ãƒˆã—ã‹ãªãï¼Œå®Ÿæ•°ã«é–¢ã™ã‚‹ãƒ†ã‚¹ãƒˆãŒç„¡ã‹ã£ãŸãŸã‚ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒä½ã‹ã£ãŸï¼ æ„šç›´ã«å…¨éƒ¨æ›¸ã„ãŸã‚‰100%ã¾ã§è¡Œãã¾ã—ãŸã¡ã‚ƒã‚“ã¡ã‚ƒã‚“ã£ã¦ã ã‘ã§ã™ï¼</p>
<h2 id="section-3"></h2>
<p>ã¡ãªã¿ã«ï¼Œä»–ã«ã‚‚4,5å€‹ã»ã© PR ãŒå‡ºã¦ã„ãŸï¼ ã™ã”ã„ã­ï¼</p>
<h2 id="ã‚‚ãã‚‚ãä¼š">ã‚‚ãã‚‚ãä¼š</h2>
<p>ã‚ã¨ï¼ŒRuby Hack Challenge ã‚‚ãã‚‚ãä¼šã¨ã„ã†ã®ãŒã‚ã‚‹ã‚‰ã—ã„ã®ã§è¡Œã£ã¦ã¿ãŸã„(<a href="https://connpass.com/event/93131/">æ¬¡å›ã¯ã“ã‚Œ</a>)ï¼ MJIT ã®ã‚³ãƒ¼ãƒ‰ã¨ã‹èª­ã‚“ã§ã¿ãŸã„ã‚ˆã­ï¼ ãã‚Œã¨å‹æ¤œæŸ»(ã¯ã©ã†ãªã‚‹ã‹ã¾ã åˆ†ã‹ã‚‰ãªã„ã‚‰ã—ã„ã‘ã©)ï¼</p>
<h2 id="ãŠã—ã¾ã„">ãŠã—ã¾ã„</h2>
<p>ãã†ã„ãˆã°ï¼Œko1 æ°ãŒãŠå­ã•ã‚“ã¨å¥¥ã•ã‚“ã‚’é€£ã‚Œã¦ãã¦ã„ãŸ(ãŸã¶ã‚“)ï¼ ãã†ã„ã†äº‹ã«ç†è§£ã®ã‚ã‚‹ä¼šç¤¾ã£ã¦ã„ã„ãªãã¨æ„Ÿã˜ãŸï¼</p>
  </div>
</div>
</article>
]]></summary>
</entry>
<entry>
    <title>rust-reversi ã‚„ã£ã¦ã¿ãŸ</title>
    <link href="https://matsubara0507.github.io/posts/2018-06-21-challenge-rust-reversi.html" />
    <id>https://matsubara0507.github.io/posts/2018-06-21-challenge-rust-reversi.html</id>
    <published>2018-06-21T00:00:00Z</published>
    <updated>2018-06-21T00:00:00Z</updated>
    <summary type="html"><![CDATA[<article class="post card" itemscope itemtype="http://schema.org/BlogPosting">
 <div class="card-content">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">rust-reversi ã‚„ã£ã¦ã¿ãŸ</h1>
    <p class="post-meta">
      <time datetime="2018-06-21" itemprop="datePublished">
        Jun 21, 2018
      </time>
      
      
      <div class="tags">
          <i class="fa fa-tags"></i> <a href="/tags/Rust.html">Rust</a>
      </div>
      
    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>ç¾åœ¨ï¼Œä¼šç¤¾ã®åŒæœŸã¨é€±ä¸€ã§ Rust ã®å‹‰å¼·ä¼šã‚’ã‚„ã£ã¦ã„ã¾ã—ã¦ï¼Œæ™®æ®µã¯ <a href="https://y-yu.github.io/trpl-2nd-pdf/book.pdf">The Rust Programming Language: 2nd Edition ã®æ—¥æœ¬èªç‰ˆ</a> ã‚’è¼ªèª­ã—ã¦ã„ã‚‹ã®ã§ã™ãŒï¼Œ3æœˆãã‚‰ã„ã«ã‚ã£ãŸ <a href="https://internship.cookpad.com/2018/spring/">Cookpad Spring 1day Internship 2018</a> ã® Rust ã‚³ãƒ¼ã‚¹ã®è³‡æ–™ãŒå…¬é–‹ã•ã‚ŒãŸãŸã‚ï¼Œçš†ã§ãƒãƒƒã‚«ã‚½ãƒ³ã—ã¦ã¿ã¾ã—ãŸï¼</p>
<ul>
<li><a href="https://github.com/KOBA789/rust-reversi">KOBA789/rust-reversi: Cookpad Spring 1day Internship 2018 Rust ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚³ãƒ¼ã‚¹ã§ä½¿ç”¨ã•ã‚ŒãŸè¬›ç¾©è³‡æ–™ - GitHub</a></li>
</ul>
<p>ä»Šå›ã¯å®Ÿéš›ã«ã‚„ã£ã¦ã¿ã¦ã®ãƒ¡ãƒ¢æ›¸ãã§ã™ï¼ ä¸»ã«èº“ã„ãŸã¨ã“ã®ãƒ¡ãƒ¢ã§ã™ï¼</p>
<h2 id="section"></h2>
<p>ã¡ãªã¿ã«ï¼Œã¼ãã® Rust ã®çµŒé¨“å€¤ã¯ä¸Šè¨˜ã®æœ¬ã‚’17ç« ã¾ã§èª­ã‚“ã ã ã‘ã§ï¼Œã»ã¨ã‚“ã©æ›¸ã„ãŸã“ã¨ãªã„ã§ã™ã­(è¼ªèª­ã¯7ç« ï¼Œè‡ªåˆ†ã§å°‘ã—å…ˆã‚’èª­ã‚“ã§ã„ã‚‹)ï¼ ã‚ã¨ï¼Œ<a href="https://github.com/matsubara0507/rust-reversi/tree/reversi-impl">å›ç­”ã¯ãƒ•ã‚©ãƒ¼ã‚¯ã—ã¦ã‚ã’ã¦ã‚ã‚Šã¾ã™</a>ï¼</p>
<h3 id="èº“ã„ãŸã¨ã“ã‚">èº“ã„ãŸã¨ã“ã‚</h3>
<p>ã‚ã¡ã‚ƒãã¡ã‚ƒã—ã‚‡ãƒ¼ãƒ¼ãƒ¼ãƒ¼ã‚‚ãªã„ã¨ã“ã‚ã°ã£ã‹ã§ã™(ç¬‘)</p>
<ol type="1">
<li>å›ºå®šé•·é…åˆ—ã® map</li>
<li>ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã®å¤‰æ•°</li>
<li>index ã® x ã¨ y ãŒé€†</li>
<li>æ—¢ã«ç½®ã„ã¦ã‚ã‚‹ã‹ã®æ¤œæŸ»</li>
</ol>
<h3 id="ä½•ã‚’ä½œã£ã¦ã„ã‚‹ã‹">ä½•ã‚’ä½œã£ã¦ã„ã‚‹ã‹</h3>
<p>ãã‚‚ãã‚‚èª²é¡Œã¯ä½•ã‹ã¨ã„ã†ã¨ï¼Œã‚ªã‚»ãƒ­(ãƒªãƒãƒ¼ã‚·)ã§ã™ï¼ è©¦ã—ã«å®Ÿè¡Œã—ã¦ã¿ã‚‹ã¨ã“ã‚“ãªæ„Ÿã˜ï¼</p>
<pre><code>$ cargo run
   Compiling reversi v0.1.0 (file:///Users/nobutada.matsubara/git/rust/rust-reversi)
     Running `target/debug/reversi`
  a b c d e f g h
 +-+-+-+-+-+-+-+-+
1| | | | | | | | |
 +-+-+-+-+-+-+-+-+
2| | | | | | | | |
 +-+-+-+-+-+-+-+-+
3| | | | | | | | |
 +-+-+-+-+-+-+-+-+
4| | | |O|X| | | |
 +-+-+-+-+-+-+-+-+
5| | | |X|O| | | |
 +-+-+-+-+-+-+-+-+
6| | | | | | | | |
 +-+-+-+-+-+-+-+-+
7| | | | | | | | |
 +-+-+-+-+-+-+-+-+
8| | | | | | | | |
 +-+-+-+-+-+-+-+-+

B 2 - 2 W
Turn: Black
  a b c d e f g h
 +-+-+-+-+-+-+-+-+
1| | | | | | | | |
 +-+-+-+-+-+-+-+-+
2| | | | | | | | |
 +-+-+-+-+-+-+-+-+
3| | | | | | | | |
 +-+-+-+-+-+-+-+-+
4| | |X|X|X| | | |
 +-+-+-+-+-+-+-+-+
5| | | |X|O| | | |
 +-+-+-+-+-+-+-+-+
6| | | | | | | | |
 +-+-+-+-+-+-+-+-+
7| | | | | | | | |
 +-+-+-+-+-+-+-+-+
8| | | | | | | | |
 +-+-+-+-+-+-+-+-+

B 4 - 1 W
Turn: White
0) c3
1) c5
2) e3</code></pre>
<p>å…¨éƒ¨ä¸€ã‹ã‚‰ä½œã‚Œã§ã¯ãªãï¼Œãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¦ <code>src/coord.rs</code> ã¨ <code>src/board.rs</code> ã® <code>unimplemented!();</code> ã¨ãªã£ã¦ã„ã‚‹å€‹æ‰€ã®å®Ÿè£…ã‚’ä¸ãˆã‚‹ã ã‘ï¼ ã”ä¸å¯§ãªã“ã¨ã«ãƒ†ã‚¹ãƒˆã‚‚ç”¨æ„ã—ã¦ã‚ã‚‹ã®ã§ï¼Œ<code>cargo test</code> ã‚’å®Ÿè¡Œã—ã¾ãã£ã¦ã‚ªãƒ¼ãƒ«ã‚°ãƒªãƒ¼ãƒ³ã«ãªã‚Œã°å‡ºæ¥ä¸ŠãŒã‚Š(ãŸã¶ã‚“)ï¼</p>
<h2 id="section-1"></h2>
<p>ã¡ãªã¿ã«ï¼Œã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®åŒæœŸãŒ <code>unimplemented();</code> ã«æ„Ÿå‹•ã—ã¦ã„ãŸã®ã§ï¼Œèª¿å­ã«ä¹—ã£ã¦ <a href="https://matthew.brecknell.net/post/hole-driven-haskell/">Hole driven Programming</a> ã«ã¤ã„ã¦èªã£ã¦ã—ã¾ã£ãŸï¼</p>
<h3 id="é–¢æ•°ãŒå‘¼ã¹ãªã„">0. é–¢æ•°ãŒå‘¼ã¹ãªã„</h3>
<p>ã‚¼ãƒ­å¼•æ•°é–¢æ•°ã¯ <code>xxx.method</code> ã¯ãƒ€ãƒ¡ã§ï¼Œ<code>xxx.method()</code> ã—ãªãã‚ƒã„ã‘ãªã„ã£ã¦ã®ãŒä½•åº¦ã‚‚ã‚ã£ãŸ(ç¬‘) æ™®æ®µã¯ Haskell ã‚’æ›¸ã„ã¦ã„ã‚‹ã›ã„ã§ã™ã­ï¼</p>
<h3 id="å›ºå®šé•·é…åˆ—ã®-map">1. å›ºå®šé•·é…åˆ—ã® map</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode rust"><code class="sourceCode rust"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co">/// æŒ‡å®šã®è‰²ã®çŸ³ã‚’æŒ‡å®šã®ä½ç½®ã«ç½®ã„ãŸã¨ãã€æŒ‡å®šã®æ–¹å‘ã¸ã²ã£ãã‚Šè¿”ã›ã‚‹çŸ³ã®æ•°ã‚’è¿”ã™</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">fn</span> get_flip(&amp;<span class="kw">self</span>, piece: Piece, <span class="kw">mut</span> pos: Coord, dir: Coord) -&gt; <span class="dt">u8</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">    ...</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="op">}</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">/// æŒ‡å®šã®è‰²ã®çŸ³ã‚’æŒ‡å®šã®ä½ç½®ã«ç½®ã„ãŸã¨ãã® `Move` ã‚’è¿”ã™</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">/// æˆ»ã‚Šå€¤ã® `Move` ã«ã¯8æ–¹å‘åˆ†ã® `get_flip` ã®çµæœãŒå«ã¾ã‚Œã‚‹</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="kw">fn</span> get_move(&amp;<span class="kw">self</span>, piece: Piece, pos: Coord) -&gt; Move <span class="op">{</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9">    <span class="pp">unimplemented!</span>();</a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="op">}</span></a></code></pre></div>
<p>ã¨ã‚ã‚Š</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode rust"><code class="sourceCode rust"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">pub</span> <span class="kw">struct</span> Move <span class="op">{</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">    <span class="kw">pub</span> pos: Coord,</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">    flips: <span class="op">[</span><span class="dt">u8</span>; <span class="dv">8</span><span class="op">]</span>,</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="op">}</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="kw">const</span> DIRECTIONS: <span class="op">[</span>Coord; <span class="dv">8</span><span class="op">]</span> = <span class="op">[</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">    Coord(-<span class="dv">1</span>, -<span class="dv">1</span>), <span class="co">//å·¦ä¸Š</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8">    Coord(<span class="dv">0</span>, -<span class="dv">1</span>),  <span class="co">//çœŸä¸Š</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9">    Coord(<span class="dv">1</span>, -<span class="dv">1</span>),  <span class="co">//å³ä¸Š</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10">    Coord(-<span class="dv">1</span>, <span class="dv">0</span>),  <span class="co">//çœŸå·¦</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11">    Coord(<span class="dv">1</span>, <span class="dv">0</span>),   <span class="co">//çœŸå³</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12">    Coord(-<span class="dv">1</span>, <span class="dv">1</span>),  <span class="co">//å·¦ä¸‹</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13">    Coord(<span class="dv">0</span>, <span class="dv">1</span>),   <span class="co">//çœŸä¸‹</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14">    Coord(<span class="dv">1</span>, <span class="dv">1</span>),   <span class="co">//å³ä¸‹</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="op">]</span>;</a></code></pre></div>
<p>ãªã®ã§ï¼Œ<code>move.flips = DIRECTIONS.map (|dir| self.get_flip(piece, pos, dir))</code> ã£ã¦å…·åˆã«ã„ã‘ãã†ã ã¨æ€ã£ãŸã®ã ï¼ ã—ã‹ã—ï¼Œæ‚²ã—ã„ã“ã¨ã«çµ„ã¿è¾¼ã¿ã§ã¯ <strong>å›ºå®šé•·é…åˆ—ã«å¯¾ã™ã‚‹ã“ã®ã‚ˆã†ãªæ“ä½œã¯ãªã„ã‚ˆã†ã </strong>(é–“é•ã£ã¦ã„ãŸã‚‰ã‚´ãƒ¡ãƒ³ãƒŠã‚µã‚¤â€¦)ï¼ ãªã®ã§çµå±€è«¦ã‚ã¦ for æ–‡ã‚’å›ã—ãŸâ€¦</p>
<p>ä½•ã‹è‰¯ã„æ–¹æ³•ãŒã‚ã£ãŸã‚‰æ•™ãˆã¦æ¬²ã—ã„.</p>
<h3 id="ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã®å¤‰æ•°">2. ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã®å¤‰æ•°</h3>
<p>ã™ã”ã„é–“æŠœã‘ãªè©±ã§ã™ï¼</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode rust"><code class="sourceCode rust"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co">/// æŒ‡å®šã®è‰²ã®çŸ³ã‚’æŒ‡å®šã®ä½ç½®ã«ç½®ã„ãŸã¨ãã€æŒ‡å®šã®æ–¹å‘ã¸ã²ã£ãã‚Šè¿”ã›ã‚‹çŸ³ã®æ•°ã‚’è¿”ã™</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">///</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">/// * `piece` - ç½®ãçŸ³ã®è‰²</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">/// * `pos` - çŸ³ã‚’ç½®ãä½ç½®</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">/// * `dir` - ã²ã£ãã‚Šè¿”ã›ã‚‹çŸ³ã‚’æ¢ã™æ–¹å‘ã€‚`DIRECTIONS` ã®è¦ç´ ã®ã„ãšã‚Œã‹ãŒæ¸¡ã•ã‚Œã‚‹</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="kw">fn</span> get_flip(&amp;<span class="kw">self</span>, piece: Piece, <span class="kw">mut</span> pos: Coord, dir: Coord) -&gt; <span class="dt">u8</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7">    <span class="kw">let</span> opponent = piece.opponent();</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">    <span class="kw">let</span> <span class="kw">mut</span> cnt = <span class="dv">0</span>;</a>
<a class="sourceLine" id="cb4-9" data-line-number="9">    <span class="kw">loop</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10">        pos += dir;</a>
<a class="sourceLine" id="cb4-11" data-line-number="11">        <span class="kw">match</span> <span class="kw">self</span>.matrix<span class="op">[</span>pos<span class="op">]</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12">            <span class="cn">None</span>           =&gt; <span class="kw">return</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb4-13" data-line-number="13">            <span class="cn">Some</span>(piece)    =&gt; <span class="kw">return</span> cnt,</a>
<a class="sourceLine" id="cb4-14" data-line-number="14">            <span class="cn">Some</span>(opponent) =&gt; cnt += <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb4-15" data-line-number="15">        <span class="op">}</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16">    <span class="op">}</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="op">}</span></a></code></pre></div>
<p>ã¨ã‹æ›¸ã„ã¦ã„ãŸãŒï¼Œå…¨ç„¶ãƒ†ã‚¹ãƒˆãŒé€šã‚‰ãªã„ï¼ ãã‚Œã‚‚ãã®ã¯ãšã§ <strong>ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã®ä¸­ã®å¤‰æ•°ã¯ä»£å…¥ã«ãªã‚‹</strong> ã ã‘ã§ï¼Œ<code>if self.matrix[target] == Some(piece) { ... }</code> ã¨ã¯ç•°ãªã‚‹ï¼ ã‚·ãƒ£ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã…ã…ã…ã…ã…ã¨ã‹æ€ã£ãŸã‘ã©ï¼Œãã£ã¨è­¦å‘Šå‡ºã¦ãŸã‚ˆã­â€¦</p>
<pre><code>warning: unreachable pattern
   --&gt; src/board.rs:165:17
    |
165 |                 Some(opponent) =&gt; cnt += 1,
    |                 ^^^^^^^^^^^^^^
    |
    = note: #[warn(unreachable_patterns)] on by default

warning: unused variable: `opponent`
   --&gt; src/board.rs:158:13
    |
158 |         let opponent = piece.opponent();
    |             ^^^^^^^^ help: consider using `_opponent` instead
    |
    = note: #[warn(unused_variables)] on by default

warning: unused variable: `piece`
   --&gt; src/board.rs:164:22
    |
164 |                 Some(piece)    =&gt; return cnt,
    |                      ^^^^^ help: consider using `_piece` instead

warning: unused variable: `opponent`
   --&gt; src/board.rs:165:22
    |
165 |                 Some(opponent) =&gt; cnt += 1,
    |                      ^^^^^^^^ help: consider using `_opponent` instead</code></pre>
<p>å‡ºã¦ãŸã­â€¦</p>
<h3 id="index-ã®-x-ã¨-y-ãŒé€†">3. index ã® x ã¨ y ãŒé€†</h3>
<p>æ™®æ®µäºŒé‡é…åˆ—ã¨ã‹ã‚„ã‚“ãªã„ã‹ã‚‰ã•â€¦</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode rust"><code class="sourceCode rust"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co">/// ãƒ™ã‚¯ãƒˆãƒ«ã‚’è¡¨ç¾ã™ã‚‹æ§‹é€ ä½“</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw">pub</span> <span class="kw">struct</span> Coord(<span class="kw">pub</span> <span class="dt">i8</span>, <span class="kw">pub</span> <span class="dt">i8</span>);</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">/// `[]` æ¼”ç®—å­ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="kw">impl</span> Index&lt;Coord&gt; <span class="kw">for</span> Matrix <span class="op">{</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6">    <span class="kw">type</span> Output = <span class="dt">Option</span>&lt;Piece&gt;;</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">    <span class="co">/// ç¬¬ä¸€å¼•æ•°ã«ä¸ãˆã‚‰ã‚ŒãŸåº§æ¨™ã®çŠ¶æ…‹ã‚’è¿”ã™</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8">    <span class="co">/// åº§æ¨™ãŒç›¤é¢ã®ç¯„å›²å¤–ã§ã‚ã£ãŸå ´åˆã¯ None ãŒè¿”ã‚‹ã€‚</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9">    <span class="kw">fn</span> index(&amp;<span class="kw">self</span>, index: Coord) -&gt; &amp;<span class="kw">Self</span>::Output <span class="op">{</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10">        <span class="kw">if</span> <span class="kw">self</span>.is_in_range(index) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11">            &amp;<span class="kw">self</span>.<span class="dv">0</span><span class="op">[</span>index.<span class="dv">0</span> <span class="kw">as</span> <span class="dt">usize</span><span class="op">][</span>index.<span class="dv">1</span> <span class="kw">as</span> <span class="dt">usize</span><span class="op">]</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12">        <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13">            &amp;<span class="cn">None</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14">        <span class="op">}</span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15">    <span class="op">}</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="op">}</span></a></code></pre></div>
<p>ã¨ã‹æœ€åˆæ›¸ã„ã¦ã„ãŸï¼ <code>Coord</code> å‹ã¯ã²ã¨ã¤ç›®ãŒ X åº§æ¨™ã§ãµãŸã¤ç›®ãŒ Y åº§æ¨™ï¼ <code>&amp;self.0[index.0 as usize][index.1 as usize]</code> ã®ã¨ã“ã‚ãŒé€†ã§ã™ã­â€¦</p>
<h3 id="æ—¢ã«ç½®ã„ã¦ã‚ã‚‹ã‹ã®æ¤œæŸ»">4. æ—¢ã«ç½®ã„ã¦ã‚ã‚‹ã‹ã®æ¤œæŸ»</h3>
<p><code>moves</code> ã®ãƒ†ã‚¹ãƒˆãŒä½•æ•…ã‹ã¨ãŠã‚‰ãªã„ï¼ <code>moves</code> ã¯ç›¤ä¸Šã®å…¨ã¦ã®åˆæ³•æ‰‹ï¼Œâ€œæ‰‹â€ ã‚’è¡¨ã™ <code>Move</code> å‹ã¯æ‰‹ã‚’æ‰“ã¤å ´æ‰€(<code>Coord</code> å‹)ã¨å„æ–¹å‘ã®ã²ã£ãã‚Šè¿”ã™æ•°ã‚’æŒã£ã¦ã„ã‚‹ï¼Œã‚’åˆ—æŒ™ã™ã‚‹é–¢æ•°ï¼</p>
<pre><code>---- board::tests::test_board_moves stdout ----
	thread &#39;board::tests::test_board_moves&#39; panicked at &#39;assertion failed: `(left == right)`
  left: `6`,
 right: `37`&#39;, src/board.rs:366:9</code></pre>
<p>ã‚ã¡ã‚ƒãã¡ã‚ƒå¤šã„ï¼ ãƒ†ã‚¹ãƒˆã‚’èª­ã‚“ã§ã‚¤ãƒ­ã‚¤ãƒ­ã¨å‡ºåŠ›ã•ã›ã¦ã¿ãŸã¨ã“ã‚ï¼Œæ—¢ã«ãƒ”ãƒ¼ã‚¹ãŒç½®ã„ã¦ã‚ã‚‹å ´åˆã®ãƒã‚§ãƒƒã‚¯ã‚’å¿˜ã‚Œã¦ã„ãŸ(ãƒã‚«)ï¼</p>
<h3 id="ã‚ªãƒ¼ãƒ«ã‚°ãƒªãƒ¼ãƒ³">ã‚ªãƒ¼ãƒ«ã‚°ãƒªãƒ¼ãƒ³</h3>
<pre><code>$ cargo test
   Compiling reversi v0.1.0 (file:///Users/nobutada.matsubara/git/rust/rust-reversi)
    Finished dev [unoptimized + debuginfo] target(s) in 1.27 secs
     Running target/debug/deps/reversi-ae2013b8997f878b

running 12 tests
test board::tests::test_board_count_mut ... ok
test board::tests::test_board_get_move ... ok
test board::tests::test_board_get_flip ... ok
test board::tests::test_board_do_move ... ok
test board::tests::test_do_flip ... ok
test board::tests::test_matrix_index ... ok
test board::tests::test_board_moves ... ok
test board::tests::test_matrix_index_mut ... ok
test board::tests::test_matrix_is_in_range ... ok
test board::tests::test_move_is_legal ... ok
test coord::tests::test_coord_add ... ok
test coord::tests::test_coord_add_assign ... ok

test result: ok. 12 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out</code></pre>
<h2 id="æ„Ÿæƒ³">æ„Ÿæƒ³</h2>
<p>åŸºæœ¬æ§‹æ–‡ã‚’è¦šãˆã¦ãªã„ã®ã§ï¼Œã¨ã‚Šã‚ãˆãšé›‘ã«æ›¸ã„ã¦ãƒ“ãƒ«ãƒ‰ã—ã¦æ€’ã‚‰ã‚ŒãŸã‚‰ç›´ã™ï¼Œçš„ãªã“ã¨ã‚’ã—ãªãŒã‚‰ï¼Œé™çš„æ¤œæŸ»ã•ã„ã“ï½ã¨ã‹è¨€ã„ãªãŒã‚‰ã‚„ã£ã¦ãŸ(ç–²ã‚Œã¦ã‚‹)ï¼ ãŠã‹ã’ã§ <code>&amp;</code> ã¨ã‹ <code>*</code> ã‚’é›‘ã«ã‚ã¤ã‹ã£ã¦ã¦è‰¯ããªã„ã§ã™ã­ï¼ ã¾ãæ¥½ã—ã‹ã£ãŸã‹ã‚‰ã„ã„ã‘ã©ï¼</p>
<h2 id="ãŠã¾ã‘">ãŠã¾ã‘</h2>
<p><code>get_flip</code> é–¢æ•°ã®ã¨ã“ã‚ï¼Œé–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã‚‰ã—ã(?)å†å¸°ã«ã—ã¦è¦‹ãŸ. é€Ÿåº¦ã¯å¤‰ã‚ã‚‹ã‚“ã‹ãªï¼Ÿ</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode rust"><code class="sourceCode rust"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">fn</span> get_flip(&amp;<span class="kw">self</span>, piece: Piece, pos: Coord, dir: Coord) -&gt; <span class="dt">u8</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">    <span class="kw">self</span>.go_get_flip(piece, pos, dir).unwrap_or(<span class="dv">0</span>)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="op">}</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="kw">fn</span> go_get_flip(&amp;<span class="kw">self</span>, piece: Piece, pos: Coord, dir: Coord) -&gt; <span class="dt">Option</span>&lt;<span class="dt">u8</span>&gt; <span class="op">{</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6">    <span class="kw">let</span> target = pos + dir;</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">    <span class="kw">if</span> <span class="kw">self</span>.matrix<span class="op">[</span>target<span class="op">]</span> == <span class="cn">Some</span>(piece.opponent()) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8">        <span class="kw">self</span>.go_get_flip(piece, target, dir).map(|x| x + <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb9-9" data-line-number="9">    <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="kw">self</span>.matrix<span class="op">[</span>target<span class="op">]</span> == <span class="cn">Some</span>(piece) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10">        <span class="cn">Some</span>(<span class="dv">0</span>)</a>
<a class="sourceLine" id="cb9-11" data-line-number="11">    <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12">        <span class="cn">None</span></a>
<a class="sourceLine" id="cb9-13" data-line-number="13">    <span class="op">}</span></a>
<a class="sourceLine" id="cb9-14" data-line-number="14"><span class="op">}</span></a></code></pre></div>
<h2 id="ãŠã—ã¾ã„">ãŠã—ã¾ã„</h2>
<p>Haskell ç‰ˆã§ã‚‚ä½œã£ã¦ã¿ã‚ˆã†ã‹ã—ã‚‰ã‚“ï¼</p>
  </div>
</div>
</article>
]]></summary>
</entry>
<entry>
    <title>Earlang ï¼† Elixir Fest 2018 ã«å‚åŠ ã—ã¦ããŸ</title>
    <link href="https://matsubara0507.github.io/posts/2018-06-18-join-elixir-festa-2108.html" />
    <id>https://matsubara0507.github.io/posts/2018-06-18-join-elixir-festa-2108.html</id>
    <published>2018-06-18T00:00:00Z</published>
    <updated>2018-06-18T00:00:00Z</updated>
    <summary type="html"><![CDATA[<article class="post card" itemscope itemtype="http://schema.org/BlogPosting">
 <div class="card-content">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Earlang ï¼† Elixir Fest 2018 ã«å‚åŠ ã—ã¦ããŸ</h1>
    <p class="post-meta">
      <time datetime="2018-06-18" itemprop="datePublished">
        Jun 18, 2018
      </time>
      
      
      <div class="tags">
          <i class="fa fa-tags"></i> <a href="/tags/Elixir.html">Elixir</a> <a href="/tags/event.html">event</a>
      </div>
      
    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>å…ˆæ—¥(6/16)ï¼Œ<a href="https://elixir-fest.jp/">Earlang &amp; Elixir Fest 2018</a> ã«å‚åŠ ã—ã¦ããŸã®ã§ï¼Œãã®ãƒ¡ãƒ¢æ›¸ãã§ã™ï¼ ã¡ãªã¿ã«ï¼ŒElixir ã¯æ™®æ®µãŸã„ã—ã¦ä½¿ã£ã¦ãªã„ã‘ã© LT ã‚‚ã—ã¦ãã¾ã—ãŸï¼</p>
<h4 id="è¿½è¨˜2018.06.21">è¿½è¨˜(2018.06.21)</h4>
<p>æœ¬ç¨¿å…¬é–‹å¾Œã«å…¬é–‹ã—ã¦ãã ã•ã£ãŸç™ºè¡¨ã‚¹ãƒ©ã‚¤ãƒ‰ã®ãƒªãƒ³ã‚¯ã‚’è¿½è¨˜ã—ã¾ã—ãŸï¼</p>
<h2 id="section"></h2>
<p>ä»Šå¹´ã§2å›ç›®ã‚‰ã—ãï¼Œå»å¹´ã¯ Elixir ã®ä½œè€…ã® <a href="https://twitter.com/josevalim">Jose Valim</a> æ°ã‚’å‘¼ã‚“ã§ Keynote ã—ã¦ã‚‚ã‚‰ã„ï¼Œå…¨ä½“ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³å†…å®¹ã¨ã—ã¦ã¯ Elixir ã‚’å°å…¥ã—å§‹ã‚ãŸãƒ»æŒ‘æˆ¦ä¸­ã¨ã„ã†è©±ãŒãƒ¡ã‚¤ãƒ³ã ã£ãŸã‚ˆã†ã ï¼ ä»Šå¹´ã¯ã©ã£ã¡ã‹ã£ã¦ã„ã†ã¨ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã«å®Ÿè·µå°å…¥ãƒ»é‹ç”¨ã—ã¦ã¿ã¦ã©ã†ã ã£ãŸã‹ã¨ã„ã†è©±ãŒãƒ¡ã‚¤ãƒ³ã ãã†ã ï¼ ã¾ãŸï¼Œä¸¦è¡Œã—ã¦ãƒãƒ³ã‚ºã‚ªãƒ³ãŒã‚ã£ãŸã‚‰ã—ã„ãŒï¼Œè¡Œã£ã¦ãªã„ã®ã§ãã£ã¡ã¯è‰¯ãåˆ†ã‹ã‚‰ãªã„ï¼ ãƒãƒ³ã‚ºã‚ªãƒ³ã®è³‡æ–™ã¯ GitHub ã«å…¬é–‹ã—ã¦ã‚ã‚‹ã®ã§ï¼Œã„ãšã‚Œã‚„ã£ã¦ã¿ãŸã„(åŒæœŸã¨ã‹ã¨ãƒãƒ³ã‚ºã‚ªãƒ³ã—ã¦ã¿ã¦ã‚‚ã„ã„ã‹ã‚‚)ï¼</p>
<ul>
<li><a href="https://github.com/ohr486/ErlangElixirFestHandsOn">ohr486/ErlangElixirFestHandsOn - GitHub</a></li>
</ul>
<p>ã‚ã¨ <a href="https://togetter.com/li/1238110">Togetter ã«ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸ</a>ï¼</p>
<h2 id="ãƒ¡ãƒ¢">ãƒ¡ãƒ¢</h2>
<p>å„ä¼æ¥­ã§ã®å°å…¥ã—ãŸè©±ãŒå¤šã‹ã£ãŸã®ã§ç°¡å˜ãªãƒ¡ãƒ¢ã°ã£ã‹ã§ã™ï¼</p>
<h4 id="ã‚‰ãã‚‰ãé€£çµ¡ç¶²ãŒ-elixir-ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°åŸºç›¤ã‚’åˆ·æ–°ã—ãŸè©±">ã€Œã‚‰ãã‚‰ãé€£çµ¡ç¶²ã€ãŒ Elixir ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°åŸºç›¤ã‚’åˆ·æ–°ã—ãŸè©±</h4>
<p>(ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®šã«ãƒã‚¿ãƒã‚¿ã—ã¦ãŸã®ã§ãƒ¡ãƒ¢ãŒå°‘ãªã„)</p>
<ul>
<li><a href="https://github.com/rinosamakanata">rinosamakanata</a> æ°ã®ç™ºè¡¨</li>
<li><a href="https://eole-repos.github.io/public/elixirfest/2018/elixirfest2018-eole-rinosamakanata.pdf">ç™ºè¡¨ã‚¹ãƒ©ã‚¤ãƒ‰ã¯ã‚³ãƒãƒ©</a></li>
<li>ã‚‚ã¨ã‚‚ã¨ã¯ RoR ã‚‰ã—ã„</li>
<li>æŠ€è¡“çš„èª²é¡Œ
<ul>
<li>åˆ†æ•£ã®å•é¡Œ</li>
<li>é•·ã„ç›®ã§è¦‹ãŸã¨ãã®ä¿å®ˆãƒ»é‹ç”¨</li>
</ul></li>
<li>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯ Elm
<ul>
<li>ã€Œé–¢æ•°å‹è‰¯ã„ã‚ˆã­ã€</li>
</ul></li>
<li>è² è·ãƒ†ã‚¹ãƒˆã®ãŸã‚ã«ä¸å¯æ›ã‘ã® Docker ã‚³ãƒ³ãƒ†ãƒŠã‚’ä½œã£ãŸ</li>
<li>Elixir ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ãŒå¤šã„(ãƒªãƒªãƒ¼ã‚¹ã—ã¦ã‹ã‚‰9å›ã‚‚ã‚ã£ãŸ)
<ul>
<li><a href="https://github.com/asdf-vm/asdf-elixir">asdf</a> ã§é›£ãªã</li>
<li>Ruby ã‚„ RoR ã‚ˆã‚Šãœã‚“ãœã‚“ç°¡å˜</li>
</ul></li>
<li>å®Ÿè³ªçš„ã«ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ•ãƒªãƒ¼</li>
<li>Erlang ã¯æ›¸ã‘ãªãã¦ã‚‚å°å…¥ã§ãã‚‹
<ul>
<li>ãŸã ã— BEAM ã®çŸ¥è­˜ã¯ã„ã‚‹</li>
<li><a href="https://github.com/happi/theBeamBook">The BEAM Book</a> ãŠã™ã™ã‚</li>
</ul></li>
</ul>
<p>æœ€è¿‘ Ruby ã‚„ Ruby ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã§è‹¦ã—ã‚“ã§ã„ã‚‹ã®ã‚’è¦‹ã¦ãŸã®ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ãŒã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªã®ç¾¨ã¾ã—ã„ï¼</p>
<h4 id="åˆã‚ã¦ã®erlangã‚µãƒ¼ãƒé–‹ç™ºã¨é‹ç”¨">åˆã‚ã¦ã®Erlangã‚µãƒ¼ãƒé–‹ç™ºã¨é‹ç”¨</h4>
<ul>
<li><a href="https://github.com/mookjp">mookjp</a> æ°ã®ç™ºè¡¨</li>
<li><a href="https://speakerdeck.com/mookjp/chu-metefalseerlangsahakai-fa-toyun-yong?slide=1">ç™ºè¡¨ã‚¹ãƒ©ã‚¤ãƒ‰ã¯ã‚³ãƒãƒ©</a></li>
<li>Erlang ã‚’ã©ã†å‹‰å¼·ã—ãŸã‹ã‚„å¤±æ•—è«‡ãªã©ã®è©±</li>
<li>Node.js ã‹ã‚‰ Erlang ã¸ (ãŸã¶ã‚“)</li>
<li><a href="http://erlang.org/doc/man/observer.html">observer</a> ã¨ã„ã† Erlang ãƒ—ãƒ­ã‚»ã‚¹ã®å¯è¦–åŒ–ãƒ„ãƒ¼ãƒ«ãŒä¾¿åˆ©</li>
<li>Erlang ã‚µãƒ¼ãƒãƒ¼ã‚’ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã«å°å…¥ã™ã‚‹ã¨ãã®è¨­å®š
<ul>
<li>æ€æƒ³ã®è¨˜äº‹ã°ã£ã‹ï¼</li>
<li>å®Ÿéš›ã®è¨­å®šã«é–¢ã™ã‚‹è¨˜äº‹ãŒå°‘ãªã„ï¼ï¼</li>
</ul></li>
<li>ä¸å¿…è¦ãªãƒ—ãƒ­ã‚»ã‚¹ã‚„ãã®ç›£è¦–ãƒ—ãƒ­ã‚»ã‚¹ãŒå¾®å¦™ã«æ®‹ã£ã¦ã˜ã‚ã˜ã‚ CPU ä½¿ç”¨ç‡ãŒä¸ŠãŒã£ã¦ã—ã¾ã£ãŸ</li>
<li><a href="https://www.erlang-in-anger.com/">Erlang in Anger</a> ã‚’çµ¶å¯¾ã«èª­ã‚€
<ul>
<li>é‹ç”¨ã«å½¹ç«‹ã¡ãã†ãªã“ã¨ãŒãŸãã•ã‚“æ›¸ã„ã¦ã‚ã‚‹</li>
</ul></li>
<li><a href="https://erlang-slack.herokuapp.com/">Erlang ã® Slack ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹</a>ãŒãŠã‚¹ã‚¹ãƒ¡ï¼
<ul>
<li>ç´¹ä»‹ã—ãŸç›£è¦–ã® VMStats ã‚‚ã“ã“ã§æ•™ãˆã¦ã‚‚ã‚‰ã£ãŸ</li>
</ul></li>
</ul>
<p>æ€æƒ³ã®è¨˜äº‹ãŒå¤šã„è©±ï¼Œãªã‚“ã¨ãªã Haskell ã«ã‚‚ä¼¼ãŸã‚ˆã†ãªã¨ã“ã‚ãŒã‚ã£ã¦ç¬‘ã£ãŸ</p>
<h4 id="keep-phoenix-app-productivity">Keep Phoenix App Productivity</h4>
<ul>
<li><a href="https://twitter.com/kanmo_ak">kanmo_ak</a> æ°ã®ç™ºè¡¨</li>
<li><a href="https://speakerdeck.com/kanmo/keep-phoenix-app-productivity?slide=1">ç™ºè¡¨ã‚¹ãƒ©ã‚¤ãƒ‰ã¯ã‚³ãƒãƒ©</a></li>
<li>Phoenix Application é–‹ç™º1å¹´ãƒ»é‹ç”¨1å¹´ã—ã¦ã¿ãŸçµæœã®è©±</li>
<li><a href="https://elixirschool.com/en/lessons/advanced/umbrella-projects/">Umbrella</a> ã«ã‚ˆã£ã¦ Project ã‚’åˆ†å‰²
<ul>
<li>è‚¥å¤§åŒ–ã—ã¦ããŸ</li>
<li>è¤‡æ•°ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã²ã¨ã¤ã®ãƒªãƒã‚¸ãƒˆãƒªã§åˆ¥ã€…ã«é–‹ç™º</li>
<li>ã‚µãƒ¼ãƒ“ã‚¹é–“ã§ã‚³ãƒ¼ãƒ‰ã‚’å…±æœ‰ã§ãã‚‹</li>
</ul></li>
<li>ã²ã¨ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãæ›ãˆã‚‹ã ã‘ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¯¾è±¡ãŒè†¨å¤§â€¦
<ul>
<li>ãƒ•ã‚¡ã‚¤ãƒ«é–“ã®ä¾å­˜é–¢ä¿‚ãŒã²ã©ã„ã®ã§åˆ‡ã£ã¦ã„ã</li>
<li>ãƒã‚¯ãƒ­ã‚’å¤‰æ›´ã™ã‚‹ã¨ã‚„ã‚Šç›´ã—</li>
<li>æ§‹é€ ä½“ã‚’å¤‰æ›´ã™ã‚‹ã¨ã‚„ã°ã„</li>
<li>ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚‚ä¾å­˜ãŒã‚ã‚‹</li>
<li><a href="https://hexdocs.pm/mix/Mix.Tasks.Xref.html"><code>mix xref</code></a> ã‚¿ã‚¹ã‚¯ãŒä¾¿åˆ©</li>
<li>ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åã‚’å‹•çš„ã«çµ„ã¿ç«‹ã¦ã¦ä¾å­˜ã‚’ç„¡ç†ã‚„ã‚Šåˆ‡ã‚‹é»’é­”è¡“(ä½¿ã‚ãªã„æ–¹ãŒã„ã„)</li>
</ul></li>
<li>Erlang ãƒ—ãƒ­ã‚»ã‚¹ã ã¨ remsh ã§èµ·å‹•ä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹ã«æ¥ç¶šã—ã¦èª¿æŸ»ã§ãã‚‹</li>
<li>Elixir ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã¯è¿½ã„ã‚„ã™ã„
<ul>
<li>RoR ã«æ¯”ã¹ã¦(ç¬‘)</li>
</ul></li>
<li>Type Spec ã‚’æ›¸ã„ã¦ãŠãã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ãªã‚‹
<ul>
<li>Dializer ã¯ä½¿ã£ã¦ãªã„(æ™‚é–“ãŒç„¡ã‹ã£ãŸ)</li>
<li>spec ãªã„ã¨ã¤ã‚‰ã„ã¨æ„Ÿã˜ãŸã®ç§è‡ªèº«ã§ã™</li>
</ul></li>
</ul>
<p>æ˜” Type Spec ãŒæ›¸ã„ã¦ã‚ã£ãŸãŒé–“é•ã£ã¦ã‚‹ãŠã‹ã’ã§ç—›ã„ç›®ã«ã‚ã£ãŸã®ã§æ›¸ã„ãŸã‚„ã¤ã‚’é™çš„ã«ãƒã‚§ãƒƒã‚¯ã—ãŸã„ã§ã™ã‚ˆã­â€¦</p>
<h4 id="from-python-to-elixir">from Python to Elixir</h4>
<ul>
<li><a href="https://github.com/kenichirow">kenichirow</a> æ°ã®ç™ºè¡¨</li>
<li>Python ã‹ã‚‰ Elixir ã«ç§»è¡Œ
<ul>
<li>Python 2020 å¹´å•é¡Œ(2ç³»ã®ã‚µãƒãƒ¼ãƒˆãŒçµ‚ã‚ã‚‹)</li>
</ul></li>
<li>Phoenix ã¯æœ€åˆã¯ä½¿ã‚ãªã„ã¤ã‚‚ã‚Šã ã£ãŸ
<ul>
<li>Django ã‹ã‚‰ã ã¨æš—é»™çš„ãªä½•æŸãŒå¤šã„å°è±¡(ãƒã‚¯ãƒ­)</li>
<li>PubSub ã„ã‚‰ãªã„</li>
<li>ãªã®ã§è‡ªä½œ FW ã‚’ä½œã£ã¦ãŸ</li>
</ul></li>
<li>çªç„¶ Phoenix å®£è¨€
<ul>
<li>ã€ŒãŠå‰ Dis ã‚Œã‚‹ã»ã© Phoenix çŸ¥ã£ã¦ã‚‹ã®ã‹ã‚ˆã€</li>
</ul></li>
<li>Ecto ã«ã¯ã„ãã¤ã‹ã®å•é¡Œ</li>
<li>ãªã®ã§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œã£ãŸ <a href="https://github.com/gumi/yacto">Yacto</a>
<ul>
<li>DBåˆ†å‰²ãƒ»XAãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãªã©</li>
</ul></li>
<li>å„ã‚²ãƒ¼ãƒ ã®åŸºç›¤ã‚’ Template ã«ã—ã¦ã„ãŸãŒãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãŒã¤ã‚‰ã„ã®ã§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«</li>
<li>Elixir ã®ã‚µãƒãƒ¼ãƒˆãƒãƒ¼ãƒ 
<ul>
<li>ã‚°ã‚°ã‚‹å‰ã«èã‘</li>
<li>æœ€è¿‘ã—ã‚“ã©ã„ã®ã§ Stack Overflow Team ã‚’å°å…¥</li>
</ul></li>
<li>è¨€èªå¤‰ãˆã¦è§£æ±ºã—ãŸå•é¡Œã¯å°‘ã—ã ã‘
<ul>
<li>ãŸã æ•´å‚™ã™ã‚‹ãã£ã‹ã‘ã«ã¯ãªã£ãŸ</li>
</ul></li>
</ul>
<p>åŸºç›¤ãƒãƒ¼ãƒ ã‚«ãƒƒã‚³ã„ã„</p>
<h4 id="ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ã§å¤§è¦æ¨¡ã‚¢ã‚¯ã‚»ã‚¹ã®ã‚ã‚‹soft-realtimeãªã‚²ãƒ¼ãƒ ã‚µãƒ¼ãƒãƒ¼ã‚’easyã«ã¤ãã‚‹">ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ã§å¤§è¦æ¨¡ã‚¢ã‚¯ã‚»ã‚¹ã®ã‚ã‚‹soft-realtimeãªã‚²ãƒ¼ãƒ ã‚µãƒ¼ãƒãƒ¼ã‚’easyã«ã¤ãã‚‹</h4>
<ul>
<li><a href="https://github.com/ne-sachirou">ã•ã£ã¡ã‚ƒã‚“</a> æ°ã®ç™ºè¡¨</li>
<li><a href="https://speakerdeck.com/ne_sachirou/sutetohurudeda-gui-mo-akusesufalsearusoft-realtimenagemusabawoeasynitukuru">ç™ºè¡¨ã‚¹ãƒ©ã‚¤ãƒ‰ã¯ã‚³ãƒãƒ©</a></li>
<li>Phoenix ã§ã‚²ãƒ¼ãƒ ä½œã£ã¦é‹ç”¨ã—ãŸã¯ãªã—</li>
<li>AWS + Kube + Phoenix</li>
<li>Real time PvP ãŒãƒ¡ã‚¤ãƒ³ãªã®ã« RoR ã¯å¤§å¤‰</li>
<li>ã©ã£ã¡ã¿ã¡ã‚¤ãƒ­ã‚¤ãƒ­çŸ¥è¦‹ãŒç„¡ã„ã®ã§æ–°ã—ã„æŠ€è¡“ä½¿ã£ã¦ã‚‚è‹¦åŠ´ã¯ã™ã‚‹ã§ã—ã‚‡
<ul>
<li>Elixir ã®çŸ¥è¦‹ã¯ã‚ã‚‹</li>
</ul></li>
<li><a href="https://hexdocs.pm/inner_cotton/readme.html">InnerCotton</a> ã‚’ä½œã£ãŸ</li>
<li>FP ã¯çŸ¥ã£ã¦ãŸ</li>
<li>Channel ã¨ Redis ã§ PvP</li>
<li>ãƒ›ãƒƒãƒˆãƒ‡ãƒ—ãƒ­ã‚¤ã¯ã‚ãã‚‰ã‚ãŸ</li>
<li>å„ªå…ˆåº¦ä»˜ãã‚­ãƒ¥ãƒ¼ã‚’è‡ªä½œ <a href="https://hex.pm/packages/pqueue2">queue2</a>
<ul>
<li>æ—¢å­˜ã®ãƒ¢ãƒã¯é–“é•ã£ã¦ã‚‹ã‚‚ã®ãŒå¤šã‹ã£ãŸã®ã§</li>
<li>ã‚¹ã‚¿ãƒƒã‚¯ã«ãªã£ã¦ã„ã‚‹ã‚‚ã®ã‚‚ã‚ã£ãŸ</li>
</ul></li>
<li><a href="https://hub.docker.com/r/nesachirou/elixir/">docker image</a> ã‚’ä½œã£ãŸ(Elixir ã¨ Erlang ã®ä¸¡æ–¹ãŒæŒ‡å®šã§ãã‚‹)</li>
<li>Elixir ã®ç›£è¦–ã¤ã‚‰ã„</li>
<li>ã‚‚ã£ã¨ publish ã—ã¦ã„ã“ã†ãœ</li>
</ul>
<p>ç¤¾å†…ã§ã‚„ã£ãŸã“ã¨ãƒ‰ãƒ³ãƒ‰ãƒ³ Publish ã§ãã‚‹ã®ã„ã„ãªãï¼</p>
<h4 id="channelå…ˆç”Ÿ-pubsubãŒã—ãŸã„ã§ã™">Channelå…ˆç”Ÿâ€¦!! PubSubãŒã—ãŸã„ã§ã™â€¦</h4>
<ul>
<li><a href="https://github.com/ohr486">ohrdev</a> æ°ã®ç™ºè¡¨</li>
<li><a href="https://speakerdeck.com/ohr486/erlangelixirfest2018-ohr486-session">ç™ºè¡¨ã‚¹ãƒ©ã‚¤ãƒ‰ã¯ã‚³ãƒãƒ©</a></li>
<li>~Erlang in Anger~ PubSub in Channel</li>
<li>ã€ŒPubSub ã—ãªã„ Phoenix ã¯ãŸã ã® Rails ã ã€</li>
<li>Phoenix Channel + PubSub</li>
<li>PubSub ã¯2ç¨®é¡ã‚ã‚‹
<ul>
<li>ãƒ­ãƒ¼ã‚«ãƒ« PubSub ãƒ»ãƒªãƒ¢ãƒ¼ãƒˆ PubSub</li>
</ul></li>
<li>ã€Œã“ã‚Œã‚«ãƒƒã‚³ã‚ˆããªã„ã£ã™ã‹ã€è¦‹ã‚‹ãŸã³ã«ã™ã”ã„ããããã™ã‚‹ã€</li>
<li>PubSub ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯é¸æŠã§ãã‚‹</li>
<li>ã©ã‚Œã ã‘çŸ¥ã£ã¨ã„ãŸæ–¹ãŒã„ã„ã‹ï¼Ÿ
<ul>
<li>åŸºæœ¬ã¯çŸ¥ã‚‰ãªãã¦ã‚‚</li>
<li>æ–°ã—ã„ Adaptar ã‚’ä½œã‚‹å ´åˆã¯çŸ¥ã£ã¦ãªã„ã¨ã„ã‘ãªã„</li>
</ul></li>
</ul>
<p>PubSub å®Œå…¨ã«ç†è§£ã—ãŸ(å˜˜)</p>
<h4 id="antikythera-framework-an-elixir-framework-for-multiple-web-services">Antikythera Framework: An Elixir framework for multiple web services</h4>
<ul>
<li><a href="https://github.com/skirino">skirino</a> æ°ã®ç™ºè¡¨</li>
<li><a href="https://skirino.github.io/slides/antikythera_framework.html#/">ç™ºè¡¨ã‚¹ãƒ©ã‚¤ãƒ‰ã¯ã‚³ãƒãƒ©</a></li>
<li>ç¤¾å†…ã§ä½œã£ãŸãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ç´¹ä»‹ : <a href="https://github.com/access-company/antikythera">antikythera</a></li>
<li>Antikythera ãƒ¡ã‚«ãƒ‹ã‚ºãƒ 
<ul>
<li>ã‚®ãƒªã‚·ãƒ£æ™‚ä»£ã®ã‚ªãƒ¼ãƒ‘ãƒ¼ãƒ„</li>
<li>ãªã«ã‹ã‚ˆãã‚ã‹ã‚‰ãªã„</li>
<li>æ˜Ÿã®å‹•ãï¼Ÿï¼Ÿ</li>
</ul></li>
<li>è¤‡æ•°ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã²ã¨ã¤ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ç®¡ç†</li>
<li>Gear : Webã‚µãƒ¼ãƒ“ã‚¹ã®å˜ä½ãƒ»ä»–ã® Gear ã«ä¾å­˜ã—ã†ã‚‹
<ul>
<li>instance ã‚ˆã‚Šç´°ã‹ã„å˜ä½</li>
</ul></li>
<li>ã‚³ã‚¢æ©Ÿèƒ½
<ul>
<li>ãƒªã‚½ãƒ¼ã‚¹ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«</li>
<li>è‡ªå‹•ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³(ãƒ›ãƒƒãƒˆãƒ‡ãƒ—ãƒ­ã‚¤ãªã©)</li>
<li>ãƒ­ã‚°ãªã©ãƒ“ãƒ«ãƒ‰ã‚¤ãƒ³ã«</li>
</ul></li>
<li>Gear ã¯ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã§ç–çµåˆã ãŒç®¡ç†ã¯çµ±ä¸€</li>
<li>ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ã¯ ErlangVM ãªã®ã§ä¸€é•·ä¸€çŸ­</li>
<li>DB ã¯ã©ã†ã™ã‚‹ã‹ï¼Ÿ
<ul>
<li>DB ã¯çŸ¥ã‚‰ãªã„(Gear ã«ã—ãªã„)</li>
<li>ãµã¤ã†ã« Ecto ã¨ã‹ã§</li>
</ul></li>
<li>ãªãœ Erlang ã˜ã‚ƒãªã„ã‹ï¼Ÿ
<ul>
<li>mix ãŒå„ªç§€</li>
<li>mix compiler ã§ãƒ•ãƒƒã‚¯ã§ãã‚‹</li>
</ul></li>
</ul>
<p>mix ã™ã”ã„ã®ã¯ã‚ˆãã‚ã‹ã‚‹ï¼</p>
<h4 id="ä»»æ„ã®beamç³»è¨€èªã§ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æ›¸ã‘ã‚‹å®‰å®šã—ãŸãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä½œã‚Šã‹ãŸ">ä»»æ„ã®BEAMç³»è¨€èªã§ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æ›¸ã‘ã‚‹å®‰å®šã—ãŸãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä½œã‚Šã‹ãŸ</h4>
<ul>
<li><a href="https://github.com/niku">niku</a> æ°ã®ç™ºè¡¨</li>
<li><a href="https://niku.name/2018/06/16/slide.html">ç™ºè¡¨ã‚¹ãƒ©ã‚¤ãƒ‰ã¯ã‚³ãƒãƒ©</a></li>
<li>BEAMç³»ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½œã‚‹ä¸Šã§ã®ãƒã‚¦ãƒã‚¦</li>
<li>ã¾ãŸ PubSub ã®è©±ã§ã™ã„ã¾ã›ã‚“</li>
<li>ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³</li>
<li>ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ©Ÿæ§‹ã‚’æŒã¤ FW ã«ã¯ç™»å ´äººç‰©ãŒ3äºº
<ul>
<li>ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ã†äºº</li>
</ul></li>
<li>ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã‚¨ãƒ©ãƒ¼ãŒèµ·ããŸã¨ããƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯ã©ã†ã™ã‚‹ã‹</li>
<li>ã€Œçµµã«ã‹ãã¨ã“ã‚“ãªæ„Ÿã˜ã€</li>
<li>Supervisor ã¯ä»–ã®è¨€èªã§ã¯ã‚ã¾ã‚Šãªã„
<ul>
<li>ã“ã„ã¤ã®ãŠã‹ã’ã§åˆ¥ç²’åº¦é–“ã®ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†ãŒæ¥½</li>
</ul></li>
<li>ã‚†ã‹ã„ã«å­¦ã¼ã†ã® Supervisor ã®ç« ã¯è‰¯ãã§ãã¦ã„ã‚‹</li>
</ul>
<p>çµµã«æ›¸ãã¨ã“ã‚“ãªæ„Ÿã˜ã£ã¦ã®ãŒã˜ã‚ã˜ã‚æ¥ã‚‹ï¼</p>
<h4 id="erlang-äº‹ä¾‹ç´¹ä»‹-ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¹ãƒˆãƒªãƒ¼ãƒ ä¸­ç¶™ã‚·ã‚¹ãƒ†ãƒ ">Erlang äº‹ä¾‹ç´¹ä»‹: ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¹ãƒˆãƒªãƒ¼ãƒ ä¸­ç¶™ã‚·ã‚¹ãƒ†ãƒ </h4>
<ul>
<li><a href="https://github.com/amutake">amutake</a> æ°ã®ç™ºè¡¨</li>
<li><a href="https://niconare.nicovideo.jp/watch/kn3115">ç™ºè¡¨ã‚¹ãƒ©ã‚¤ãƒ‰ã¯ã‚³ãƒãƒ©</a>
<ul>
<li>ãƒ‹ã‚³ãƒ‹ã‚³ã®ã‚¹ãƒ©ã‚¤ãƒ‰ç½®ãå ´ã‚ã£ãŸã‚“ã (ç¬‘)</li>
</ul></li>
<li>ãƒ‹ã‚³ç”Ÿã§ä½¿ã‚ã‚Œã‚‹(äºˆå®š)ã®ã‚·ã‚¹ãƒ†ãƒ ã®è©±(Erlang è£½)</li>
<li>ç”Ÿæ”¾é€ã®ä¸­ç¶™ãƒ„ãƒªãƒ¼</li>
<li>ç”Ÿæ”¾é€ã«æ±‚ã‚ã‚‰ã‚Œã‚‹æ€§è³ª</li>
<li>ã‚¹ãƒˆãƒªãƒ¼ãƒ ä¸­ç¶™ã‚·ã‚¹ãƒ†ãƒ  : sluicegate ã®ä½œæˆ
<ul>
<li>ã„ã¤ã‹ OSS ã«ãªã‚‹</li>
</ul></li>
<li>å­¦è¡“çš„ã«ç ”ç©¶ã•ã‚ŒãŸã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ (ç‹¬è‡ªã§ã¯ãªã)
<ul>
<li>HyParView</li>
<li>Plumtree</li>
</ul></li>
<li>ç°¡å˜ã«ã§ãã‚‹ã‘ã©ç„¡é§„ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ‘ãƒƒã‚·ãƒ³ã‚°ã™ã‚‹ã¨é…ããªã‚‹
<ul>
<li>è»½ã„å‡¦ç†ã‚’ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ‘ãƒƒã‚·ãƒ³ã‚°ã™ã‚‹ã¨ã ã‚</li>
</ul></li>
<li>Erlang ã‚¯ãƒ©ã‚¹ã‚¿ã¯çµ„ã¾ãªã„</li>
<li>Plumtree ã®æ€§è³ªãŒã‚ã‚Œã ã£ãŸ
<ul>
<li>ãªã®ã§è‡ªåˆ†ãŸã¡ã§æ”¹é€ </li>
<li>æ ¹å¹¹ãªã®ã§å®šç†è¨¼æ˜(Coq ã§å®Ÿè£…)
<ul>
<li>PPLã«ã¦ç™ºè¡¨ã—ãŸ</li>
<li>ç”Ÿæ”¾é€ã‚¹ãƒˆãƒªãƒ¼ãƒ ä¸­ç¶™ã‚·ã‚¹ãƒ†ãƒ ã®Coqã«ã‚ˆã‚‹å½¢å¼åŒ–ã¨æ¤œè¨¼</li>
</ul></li>
</ul></li>
<li>ã±ã¶ã•ã¶ãã‚“(æ¤œè¨¼ãƒ„ãƒ¼ãƒ«)</li>
<li>æ°´é“å±€(å¯è¦–åŒ–ãƒ„ãƒ¼ãƒ«)
<ul>
<li>æ°´è·¯ã¨ã„ã†è‡ªä½œãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ã¦ã„ã‚‹</li>
</ul></li>
<li>åˆ†æ•£ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’æ›¸ãã‚„ã™ã„</li>
<li>èª¿æŸ»ã—ã‚„ã™ã„
<ul>
<li>reduction ã®å–å¾—ã®ã—ã‚„ã™ã•ã¯ Erlang in Anger</li>
</ul></li>
<li>Coq ã®ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ Erlang ã«å¤‰æ›ã™ã‚‹ã‚‚ã®ãŒã‚ã‚‹</li>
</ul>
<p>ãªã‚“ã‹ç ”ç©¶ã®è©±èã„ã¦ã‚‹ã¿ãŸã„ã§èãã‚„ã™ã‹ã£ãŸ(ç¬‘)</p>
<h3 id="lt">LT</h3>
<p>è‡ªåˆ†ã‚‚ LT ã—ãŸã®ã§ç´°ã‹ã„ãƒ¡ãƒ¢ã¯ç„¡ã„</p>
<ul>
<li>NOC ã®è©±
<ul>
<li>æœã«ã‚¢ã‚¯ã‚·ãƒ‡ãƒ³ãƒˆãŒã‚ã£ãŸã‚ˆã†ã§â€¦</li>
</ul></li>
<li>å€‹äººã§ Elixir ã—ã¦ããŸè©±(æ—¥æœ¬ä¸€ Elixir æœ¬ã‚’æ›¸ã„ã¦ã„ã‚‹)</li>
<li>Elixir å®Œå…¨ã«ç†è§£ã—ãŸ(ã¡ã‚‡ã£ã¨ã§ãã‚‹äººãŒã„ã‚Œã°ã„ã„)</li>
<li>Elixir Programming with Type checking (è‡ªåˆ†)</li>
<li>ElixirScript ã®è©±</li>
<li>PubSub Redis
<ul>
<li>phoenix_pubusu_redis_z</li>
</ul></li>
<li>Dialyzer ã®ã™ã™ã‚</li>
<li>Erlang on ARM ã‚µãƒ¼ãƒãƒ¼
<ul>
<li>æœªç™ºè¡¨ã®ã‚‚ã®</li>
<li>ç§’é–“40ã¾ã‚“ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã•ã°ã„ã¦ã‚‹</li>
<li>ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®ä¸–ç•Œã«æ¥ã„</li>
</ul></li>
</ul>
<p>ã©ã†ã‚„ã‚‰ MVP ã¯ã€ŒElixirã‚’2é€±é–“ã§å®Œå…¨ã«ç†è§£ã—ãŸã€æ–°å’ã®å­ï¼</p>
<h3 id="keynote">Keynote</h3>
<h4 id="å…±æœ‰ã‹ã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ‘ãƒƒã‚·ãƒ³ã‚°ã¸-erlangotpã‚„elixirã¨æ­©ã‚“ã ã“ã®10å¹´">å…±æœ‰ã‹ã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ‘ãƒƒã‚·ãƒ³ã‚°ã¸: Erlang/OTPã‚„Elixirã¨æ­©ã‚“ã ã“ã®10å¹´</h4>
<ul>
<li><a href="https://twitter.com/jj1bdx">åŠ›æ­¦å¥æ¬¡</a>æ°</li>
<li><a href="https://speakerdeck.com/jj1bdx/erlang-and-elixir-fest-2018-keynote?slide=1">ç™ºè¡¨è³‡æ–™ã¯ã‚³ãƒãƒ©</a></li>
<li>BIND ??? è„†å¼±æ€§ã®å¤šã„ DNS ã‚µãƒ¼ãƒãƒ¼ã«ã¤ã„ã¦æ˜”ã‚„ã£ã¦ãŸ
<ul>
<li>1000è¡Œãƒã‚¯ãƒ­</li>
</ul></li>
<li>Erlang ã«å‡ºä¼šã†
<ul>
<li>ã†ã‚‹ã†ç§’ã®ä¿®æ­£ãƒ‘ãƒƒãƒã‚’é€ã‚‹</li>
<li>SSH ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ç ”ç©¶</li>
</ul></li>
<li>ICFPâ€™11 ã® Erlang Workshop ã®å®Ÿè¡Œå§”å“¡é•·</li>
<li>Erlang in Anger ã®ã‚µã‚¤ãƒ³æœ¬ã‚‚ã‚‰ã£ãŸ</li>
<li>Elixir ã®ãƒ­ã‚´ã¯å•†æ¨™ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹</li>
<li>Catalyze Changes
<ul>
<li>Erlang ã¯èª­ã¿ã«ãã„ï¼</li>
<li>ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒé›£ã—ã„ï¼</li>
<li>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒãªã„ï¼</li>
<li>ä½•ã¨ã‹ã£ã—ã‚ˆã†ãœï¼</li>
<li>by Dave Tomas</li>
<li>å¤§å¤‰ã ã£ãŸâ€¦(jose)</li>
<li>æœ‰è¨€å®Ÿè¡Œã—ã¦ã¦Elixiræœ¬ã‚’7å†Šã‚‚å‡ºç‰ˆã—ã¦ã„ã‚‹</li>
</ul></li>
<li>Ruby ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚’ã¡ã‚‰ã»ã‚‰è¦‹ã‹ã‘ã‚‹ã‚ˆã†ã«ãªã£ãŸ</li>
<li>2018/2 å¤§äº‹ä»¶</li>
<li><a href="https://codesync.global/conferences/code-beam-sf-2018/">Code BEAM 2018</a>
<ul>
<li>Open Erlang 20å‘¨å¹´</li>
<li>BEAM ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®èåˆ</li>
</ul></li>
<li>å…±é€šã—ã¦ã©ã“ãŒãŠã„ã—ã„ã®ã‹</li>
<li>Immutability ãƒ‡ã‚£ãƒ¼ãƒ—ã‚³ãƒ”ãƒ¼ å‚ç…§ã‚’ä½¿ã‚ãªã„
<ul>
<li>è‡ªåˆ†ãŒæ€ã† Erlang ã®ã™ã°ã‚‰ã—ã•</li>
</ul></li>
<li>å¾“æ¥ã¯å®Ÿæ…‹ã‚’å…±æœ‰(ã¯ã‚„ã„ï¼Ÿ)</li>
<li>ã€Œå®‰å…¨ã‚ˆã‚Šã‚‚åŠ¹ç‡ã€</li>
<li>C++ ã®æ„šç—´
<ul>
<li>å‚ç…§ãªã®ï¼Ÿå€¤ãªã®ï¼Ÿ</li>
<li>const ã®è©±ãŒå¤§å¤‰</li>
<li>ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã„ã¤å‹•ãï¼Ÿï¼Ÿ</li>
<li>shared_ptr ã¨ unique_ptr (å‚ç…§ã‚«ã‚¦ãƒ³ã‚¿ã¨æ‰€æœ‰æ¨©)</li>
</ul></li>
<li>ä¾‹å¤–: ETSã‚„ãƒ—ãƒ­ã‚»ã‚¹è¾æ›¸</li>
<li>ã€ŒåŠ¹ç‡ã‚ˆã‚Šå®‰å…¨ã€
<ul>
<li>ã¨ã¦ã‚‚é…ã„</li>
<li>å‹æ¤œæŸ»ã¯ç„¡ã„ã‘ã©éå¸¸ã«å³æ ¼</li>
</ul></li>
<li>Joe (Erlang ã®ä½œè€…)ã€Œprocesses messgae and links ãŒé‡è¦ãªéƒ¨åˆ†(gen_server ã¯å¾Œã‹ã‚‰)ã€
<ul>
<li>ä»–ã¯ã©ã†ã§ã‚‚ã„ã„</li>
<li>è»½é‡ä¸¦è¡Œãƒ—ãƒ­ã‚»ã‚¹ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</li>
</ul></li>
<li>ç¶ºéº—ã«è½ã¨ã™ã®ã¯å¤§å¤‰
<ul>
<li>ãƒ—ãƒ­ã‚»ã‚¹ã‚­ãƒ¥ãƒ¼ãŒè©°ã¾ã‚‹ã¨çµ‚äº†</li>
</ul></li>
<li>link and monitor
<ul>
<li>æ˜”ã®SDã®è‡ªåˆ†ã®è¨˜äº‹ã‚’èª­ã¿è¿”ã—ãŸ</li>
</ul></li>
<li>ä»Šå¾Œ
<ul>
<li>åŸºæœ¬ç†å¿µ ã€Œã»ã©ã»ã©ãªã®ãŒä¸€ç•ªè‰¯ã„ã€</li>
<li>æ‰‹ã‚’æŠœã‹ãšã«é«˜é€ŸåŒ–</li>
</ul></li>
<li>Code BEAM ã§è©±é¡Œã«ã‚ãŒã£ãŸã‚‚ã®
<ul>
<li>çµ„è¾¼ã¿åˆ†é‡ãˆã®å¿œç”¨</li>
<li>å¤§è¦æ¨¡ã‚¯ãƒ©ã‚¹ã‚¿</li>
<li><a href="https://github.com/josefs/Gradualizer">Gradual Type System</a> (ãƒ„ãƒ¼ãƒ«ã®ç™ºè¡¨ãŒã‚ã£ãŸ)</li>
<li>Language Server Protcol</li>
</ul></li>
<li>è‹±èªåœã§ç™ºè¡¨ã—ã‚ˆã†
<ul>
<li>Code BEAM 2018 ã¯æ—¥æœ¬äººä¸€äºº</li>
</ul></li>
</ul>
<p>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®åŒæœŸã®å­ãŒï¼Œä¸å¤‰æ€§ã®ã™ã°ã‚‰ã—ã•ã®è©±ã‚’æŒ‡ã—ã¦ã€ŒRust ã‚„ Elixir ã‚’å‹‰å¼·ã—ãŸã¨ã«åŒã˜ã“ã¨ã‚’æ„Ÿã˜ãŸï¼ã€ã¨å–œã‚“ã§ã„ãŸï¼</p>
<h2 id="è‡ªåˆ†ã®è©±">è‡ªåˆ†ã®è©±</h2>
<p>Elchemy ã®ç´¹ä»‹è©±ã‚’ã—ã¦ãã¾ã—ãŸï¼ ã‚¹ãƒ©ã‚¤ãƒ‰ã¯ã“ã¡ã‚‰</p>
<h2 id="section-1"></h2>
<iframe src="//www.slideshare.net/slideshow/embed_code/key/ocbuQdsbw2EmG5" width="595" height="485" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen>
</iframe>
<h2 id="section-2"></h2>
<p>å®Ÿã¯å‰æ—¥(6/15)ã«åˆ¥ã® LT ã§ Elchemy ã® Docker image ã‚’ä½œã‚‹è©±ã‚’ã—ã¦ããŸï¼ ãã®æ™‚ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã¯ã“ã¡ã‚‰ï¼</p>
<h2 id="section-3"></h2>
<iframe src="//www.slideshare.net/slideshow/embed_code/key/al30fSfPGB5HGN" width="595" height="485" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen>
</iframe>
<h2 id="section-4"></h2>
<p>å®Ÿã¯ä»¥ä¸‹ã®è¨˜äº‹ã§ã‚‚ã£ã¨è©³ã—ãã¾ã¨ã‚ã¦ã‚ã‚‹ã®ã§ï¼Œãƒ—ãƒ¬ã‚¼ãƒ³ã‚’è¦‹ã‚‹å¿…è¦ã¯ç„¡ã„ã‚“ã§ã™(ç¬‘)</p>
<ul>
<li><a href="https://matsubara0507.github.io/posts/2018-06-15-introduce-elchemy-part1.html">Elchemy å…¥é–€ : ãã®ï¼‘</a></li>
<li><a href="https://matsubara0507.github.io/posts/2018-06-16-introduce-elchemy-part2.html">Elchemy å…¥é–€ : ãã®ï¼’</a></li>
</ul>
<h2 id="ãŠã—ã¾ã„">ãŠã—ã¾ã„</h2>
<p>æ¥å¹´ã¯ã‚‚ã£ã¨å‹ã®ãƒãƒŠã‚·ãŒã§ãã‚‹ã¨ã„ã„ãªãï¼</p>
  </div>
</div>
</article>
]]></summary>
</entry>
<entry>
    <title>Elchemy å…¥é–€ : ãã®ï¼’</title>
    <link href="https://matsubara0507.github.io/posts/2018-06-16-introduce-elchemy-part2.html" />
    <id>https://matsubara0507.github.io/posts/2018-06-16-introduce-elchemy-part2.html</id>
    <published>2018-06-16T00:00:00Z</published>
    <updated>2018-06-16T00:00:00Z</updated>
    <summary type="html"><![CDATA[<article class="post card" itemscope itemtype="http://schema.org/BlogPosting">
 <div class="card-content">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Elchemy å…¥é–€ : ãã®ï¼’</h1>
    <p class="post-meta">
      <time datetime="2018-06-16" itemprop="datePublished">
        Jun 16, 2018
      </time>
      
      
      <div class="tags">
          <i class="fa fa-tags"></i> <a href="/tags/Elchemy.html">Elchemy</a> <a href="/tags/Elm.html">Elm</a> <a href="/tags/Elixir.html">Elixir</a>
      </div>
      
    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Elm ã‹ã‚‰ Elixir ã®ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ©ï¼Œ<a href="https://github.com/wende/elmchemy">Elchemy</a> ã«ã¤ã„ã¦ã‚¤ãƒ­ã‚¤ãƒ­ã¨èª¿ã¹ãŸã®ã§ã¾ã¨ã‚ã¦ã„ãã¾ã™ï¼ <a href="https://matsubara0507.github.io/posts/2018-06-15-introduce-elchemy-part1.html">å‰å›ã¯ã‚³ãƒãƒ©</a>ï¼ ä»Šå›ã¯</p>
<ul>
<li><a href="https://hackernoon.com/elmchemy-write-type-safe-elixir-code-with-elms-syntax-part-2-our-own-rpg-character-module-cedbf7da138d">Tutorial ãã®ï¼’</a>ã‚’ã‚„ã£ã¦ã¿ãŸ</li>
<li>Phoenix ã§ ToDo ã‚¢ãƒ—ãƒªã‚’ä½œã‚‹</li>
</ul>
<p>ã®2æœ¬ç«‹ã¦ã§ã™ï¼ ã¡ãªã¿ã«ï¼Œç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ 0.7.4 ã§ã™ï¼</p>
<h2 id="tutorial-ãã®ã‚’ã‚„ã£ã¦ã¿ãŸ">Tutorial ãã®ï¼’ã‚’ã‚„ã£ã¦ã¿ãŸ</h2>
<p>Tutorial ãã®ï¼’ã§ã¯ Elchemy ã‚’åˆ©ç”¨ã—ãŸç‹¬è‡ªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œæˆã™ã‚‹ï¼ ä»¥ä¸‹ã®æ‰‹é †ã§è¡Œã†ãã†ã ï¼</p>
<ol type="1">
<li>ã‚¨ã‚¤ãƒªã‚¢ã‚¹å‹ã‚’å®šç¾©</li>
<li>ãƒ¦ãƒ‹ã‚ªãƒ³å‹ã‚’å®šç¾©</li>
<li>é–¢æ•°ã¨ã—ã¦ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚„ã‚¿ã‚°ã‚’ç”¨ã„ã‚‹</li>
<li>ãƒ¦ãƒ‹ã‚ªãƒ³å‹ã§ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ</li>
<li>é–¢æ•°ã¨ã—ã¦æ¼”ç®—å­ã‚’ä½¿ã†ãƒ»ç‹¬è‡ªã®æ¼”ç®—å­ã‚’å®šç¾©ã™ã‚‹</li>
<li>åˆ¥ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰å‹ã‚„ã‚¨ã‚¤ãƒªã‚¢ã‚¹å‹ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹</li>
</ol>
<p>åŸºæœ¬çš„ã« Elm ã®æ›¸ãæ–¹è¬›åº§ã¿ãŸã„ãªã‚‚ã®ãªã®ã§ï¼Œæœ€æ‚ªã£å›°ã£ãŸã‚‰ Elm ã‚’å‹‰å¼·ã—ã¦ãã ã•ã„(ä¸¸æŠ•ã’)ï¼ ã¡ãªã¿ã«ï¼Œå…ƒè¨˜äº‹ã®å…¨ã¦ã‚’ç´°ã‹ãè¿½å¾“ã›ãšï¼Œã–ã£ãã‚Šã¨æ»ã„æ‘˜ã‚“ã§æ›¸ãå‡ºã—ã¦ã„ã‚‹ï¼ ãªã®ã§ç´°ã‹ãã¯å…ƒè¨˜äº‹ã‚’èª­ã‚“ã§ã­ï¼</p>
<h2 id="section"></h2>
<p>ã‚ã¨ï¼Œ<a href="https://github.com/wende/elmchemy-article-example">ã“ã®ã‚³ãƒ¼ãƒ‰ã¯å…¨ã¦ä½œè€…ã•ã‚“ãŒ GitHub ã«æŒ™ã’ã¦ã„ã‚‹</a>ï¼</p>
<h3 id="ãã®å‰ã«">ãã®å‰ã«</h3>
<p>ãƒ†ã‚¹ãƒˆã‚’æ›¸ã“ã†ï¼Œã¨ã„ã†ã“ã¨ã§ãƒ†ã‚¹ãƒˆã‚’ Elixir ã§æ›¸ã„ã¦ã„ã‚‹ï¼ ä»Šå›ã®ä½œæˆã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã©ã†ã‚„ã‚‰ï¼Œã‚²ãƒ¼ãƒ ã‹ä½•ã‹ã®ã‚­ãƒ£ãƒ©ã‚’åˆ¶å¾¡ã™ã‚‹ç‰©ã‚‰ã—ã„</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode elixir"><code class="sourceCode elixir"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># character_test.exs</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">defmodule</span> <span class="cn">CharacterTest</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">  <span class="im">use</span> <span class="cn">ExUnit</span><span class="op">.</span><span class="cn">Case</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4">  <span class="im">use</span> <span class="cn">Elchemy</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"></a>
<a class="sourceLine" id="cb1-6" data-line-number="6">  test <span class="st">&quot;Character has name, last name and such&quot;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7">      gordon <span class="op">=</span> <span class="cn">Character</span><span class="op">.</span>new(<span class="st">&quot;Gordon&quot;</span>, <span class="st">&quot;Freemonad&quot;</span>, <span class="va">:male</span>)</a>
<a class="sourceLine" id="cb1-8" data-line-number="8"></a>
<a class="sourceLine" id="cb1-9" data-line-number="9">      assert gordon<span class="op">.</span>name <span class="op">==</span> <span class="st">&quot;Gordon&quot;</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10">      assert gordon<span class="op">.</span>surname <span class="op">==</span> <span class="st">&quot;Freemonad&quot;</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11">      assert gordon<span class="op">.</span>gender <span class="op">==</span> <span class="va">:male</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"></a>
<a class="sourceLine" id="cb1-14" data-line-number="14">  test <span class="st">&quot;Has stats&quot;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15">    gordon <span class="op">=</span> <span class="cn">Character</span><span class="op">.</span>new(<span class="st">&quot;Gordon&quot;</span>, <span class="st">&quot;Freemonad&quot;</span>, <span class="va">:male</span>)</a>
<a class="sourceLine" id="cb1-16" data-line-number="16"></a>
<a class="sourceLine" id="cb1-17" data-line-number="17">    stats <span class="op">=</span> [<span class="va">:strength</span>, <span class="va">:intelligence</span>, <span class="va">:vitality</span>]</a>
<a class="sourceLine" id="cb1-18" data-line-number="18">    <span class="kw">for</span> s <span class="op">&lt;-</span> stats <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19">      assert is_integer(gordon<span class="op">.</span>stats[s]), <span class="st">&quot;No </span><span class="ot">#{</span>s<span class="ot">}</span><span class="st"> stat in </span><span class="ot">#{</span>inspect gordon<span class="ot">}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb1-20" data-line-number="20">    <span class="kw">end</span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21"></a>
<a class="sourceLine" id="cb1-22" data-line-number="22">    assert <span class="cn">Character</span><span class="op">.</span>set_stat(<span class="va">:vitality</span>, <span class="dv">10</span>, gordon)<span class="op">.</span>stats<span class="op">.</span>vitality <span class="op">==</span> <span class="dv">10</span></a>
<a class="sourceLine" id="cb1-23" data-line-number="23">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb1-24" data-line-number="24"></a>
<a class="sourceLine" id="cb1-25" data-line-number="25">  test <span class="st">&quot;Boosting visality boosts health&quot;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-26" data-line-number="26">    gordon <span class="op">=</span> <span class="cn">Character</span><span class="op">.</span>new(<span class="st">&quot;Gordon&quot;</span>, <span class="st">&quot;Freemonad&quot;</span>, <span class="va">:male</span>)</a>
<a class="sourceLine" id="cb1-27" data-line-number="27"></a>
<a class="sourceLine" id="cb1-28" data-line-number="28">    { hp, packed_gordon_max } <span class="op">=</span> <span class="cn">Character</span><span class="op">.</span>set_stat(<span class="va">:vitality</span>, <span class="dv">10</span>, gordon)<span class="op">.</span>health</a>
<a class="sourceLine" id="cb1-29" data-line-number="29">    { _, weak_gordon_max }    <span class="op">=</span> <span class="cn">Character</span><span class="op">.</span>set_stat(<span class="va">:vitality</span>, <span class="dv">0</span>, gordon)<span class="op">.</span>health</a>
<a class="sourceLine" id="cb1-30" data-line-number="30"></a>
<a class="sourceLine" id="cb1-31" data-line-number="31">    assert packed_gordon_max <span class="op">&gt;</span> weak_gordon_max</a>
<a class="sourceLine" id="cb1-32" data-line-number="32">    assert hp <span class="op">==</span> packed_gordon_max</a>
<a class="sourceLine" id="cb1-33" data-line-number="33">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb1-34" data-line-number="34"></a>
<a class="sourceLine" id="cb1-35" data-line-number="35">  test <span class="st">&quot;Can equip weapon only if intelligence is enough&quot;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-36" data-line-number="36">    gordon <span class="op">=</span> <span class="cn">Character</span><span class="op">.</span>new(<span class="st">&quot;Gordon&quot;</span>, <span class="st">&quot;Freemonad&quot;</span>, <span class="va">:male</span>)</a>
<a class="sourceLine" id="cb1-37" data-line-number="37">    weapon <span class="op">=</span> <span class="cn">Weapon</span><span class="op">.</span>new(<span class="st">&quot;Sci fi blaster thingy&quot;</span>, <span class="dv">9</span> ,<span class="dv">100</span>)</a>
<a class="sourceLine" id="cb1-38" data-line-number="38"></a>
<a class="sourceLine" id="cb1-39" data-line-number="39">    dumb_gordon <span class="op">=</span> <span class="cn">Character</span><span class="op">.</span>set_stat(<span class="va">:intelligence</span>, <span class="dv">0</span>, gordon)</a>
<a class="sourceLine" id="cb1-40" data-line-number="40">    smart_gordon <span class="op">=</span> <span class="cn">Character</span><span class="op">.</span>set_stat(<span class="va">:intelligence</span>, <span class="dv">10</span>, gordon)</a>
<a class="sourceLine" id="cb1-41" data-line-number="41"></a>
<a class="sourceLine" id="cb1-42" data-line-number="42">    assert {<span class="va">:error</span>, <span class="st">&quot;Too dumb&quot;</span>} <span class="op">=</span> <span class="cn">Character</span><span class="op">.</span>equip(weapon, dumb_gordon)</a>
<a class="sourceLine" id="cb1-43" data-line-number="43">    assert {<span class="va">:ok</span>, equipped_gordon} <span class="op">=</span> <span class="cn">Character</span><span class="op">.</span>equip(weapon, smart_gordon)</a>
<a class="sourceLine" id="cb1-44" data-line-number="44">    assert equipped_gordon<span class="op">.</span>arm <span class="op">==</span> {weapon}</a>
<a class="sourceLine" id="cb1-45" data-line-number="45">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb1-46" data-line-number="46"><span class="kw">end</span></a></code></pre></div>
<h3 id="ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’å®šç¾©">ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’å®šç¾©</h3>
<h4 id="å‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹">1. å‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹</h4>
<p>é–¢æ•°å‹ãªã®ã§ã¾ãšã¯ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã®å‹ã‚’å®šç¾©ã™ã‚‹ï¼ ãƒ†ã‚¹ãƒˆã‚ˆã‚Šï¼Œ<code>name</code> <code>surname</code> <code>gender</code> ã‚’ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ã—ã¦æŒã£ã¦ã„ã‚‹ã®ãŒåˆ†ã‹ã‚‹ã®ã§æ¬¡ã®ã‚ˆã†ãªå‹ã‚’å®šç¾©ã—ãŸï¼</p>
<pre class="elm"><code>module Character exposing (..)

type alias Character =
    { name : String
    , surname : String
    , gender : Gender
    }</code></pre>
<p>ä½•æ•…ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãªã®ã‹ã¨ã„ã†ã¨ï¼Œæ§‹é€ çš„ã‚µãƒ–ã‚¿ã‚¤ãƒ”ã‚¤ãƒ³ã‚°ãŒå‡ºæ¥ã‚‹ã‚ˆã†ã«ã ã¨æ€ã†(ãŸã¶ã‚“)ï¼</p>
<h4 id="ãƒ¦ãƒ‹ã‚ªãƒ³å‹">2. ãƒ¦ãƒ‹ã‚ªãƒ³å‹</h4>
<p><code>Gender</code> å‹ãŒç„¡ã„ã®ã§å®šç¾©ã™ã‚‹ï¼ ã“ã£ã¡ã¯åˆ—æŒ™å‹ã¿ãŸã„ãªã®ãŒæ¬²ã—ã„ã®ã§ã€ãƒ¦ãƒ‹ã‚ªãƒ³å‹ã‚’ç”¨ã„ã‚‹ï¼</p>
<pre class="elm"><code>type Gender
    = Male
    | Female
    | Other</code></pre>
<h4 id="é–¢æ•°ã¨ã—ã¦ã®å‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹">3. é–¢æ•°ã¨ã—ã¦ã®å‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹</h4>
<p>Elixir ã£ã½ã„ <code>new</code> é–¢æ•°ã‚’å®šç¾©ã—ã¦ã‚„ã‚ã†ï¼ Elm ã®å ´åˆï¼Œã‚¨ã‚¤ãƒªã‚¢ã‚¹å‹ã‚’å®šç¾©ã™ã‚Œã°åŒåã®å€¤ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãŒã§ãã‚‹ã®ã§ï¼Œãã‚Œã‚’ãƒ©ãƒƒãƒ—ã™ã‚Œã°ã‚ˆã„</p>
<pre class="elm"><code>new : String -&gt; String -&gt; Gender -&gt; Character
new name surname gender =
    Character
      name
      surname
      gender</code></pre>
<h3 id="ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æŒãŸã›ã‚‹">ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æŒãŸã›ã‚‹</h3>
<p>ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã«ã„ãã¤ã‹ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æŒãŸã›ã‚ˆã†ï¼</p>
<pre class="elm"><code>type alias Character =
    { name : String
    , surname : String
    , gender : Gender
    , health : (Int, Int)
    , stats : Stats
    }

type alias Stats =
    { strength : Int
    , intelligence : Int
    , vitality : Int
    }

new : String -&gt; String -&gt; Gender -&gt; Character
new name surname gender =
    Character
      name
      surname
      gender
      (100,100)
      (Stats 0 0 0)</code></pre>
<p><code>health</code> ã¯ã©ã†ã‚„ã‚‰ HP ã¿ãŸã„ãªã‚‚ã®ã‚‰ã—ã„(ç¾åœ¨ã®HPã¨ä¸Šé™)ï¼</p>
<h3 id="ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ">4. ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ</h3>
<p>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°ã‚’å®šç¾©ã—ã‚ˆã†ï¼</p>
<pre class="elm"><code>type Stat
    = Strength
    | Intelligence
    | Vitality

setStat : Stat -&gt; Int -&gt; Character -&gt; Character
setStat stat value character =
    let
      stats = character.stats
    in
    case stat of
        Strength -&gt;
            { character | stats = { stats | strength = value } }
        Intelligence -&gt;
            { character | stats = { stats | intelligence = value } }
        Vitality -&gt;
            { character | stats = { stats | vitality = value } }        </code></pre>
<p>æ®‹å¿µãªãŒã‚‰ã“ã® <code>setStat</code> ã¯æ­£ã—ããªã„ï¼ ãƒ†ã‚¹ãƒˆã‚’è¦‹ã‚Œã°ã‚ã‹ã‚‹ãŒ <code>Vitality</code> ã‚’æ›´æ–°ã—ãŸå ´åˆã¯ <code>health</code> ã‚‚æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼</p>
<h4 id="æ¼”ç®—å­">5. æ¼”ç®—å­</h4>
<p><code>health</code> ã¯ã‚¿ãƒ—ãƒ«å‹ã ï¼ ã‚¿ãƒ—ãƒ«ã®æ›´æ–°ã‚’ã„ã„æ„Ÿã˜ã«ã™ã‚‹ãŸã‚ã«ï¼Œã‚«ã‚¹ã‚¿ãƒ æ¼”ç®—å­ã‚’å®šç¾©ã—ã¦ã¿ã‚ˆã†ï¼</p>
<pre class="elm"><code>(&lt;$) : (a, b) -&gt; (a -&gt; c) -&gt; (c, b)
(&lt;$) tuple f = Tuple.mapFirst f tuple

($&gt;) : (a, b) -&gt; (b -&gt; c) -&gt; (a, c)
($&gt;) tuple f = Tuple.mapSecond f tuple</code></pre>
<p>ã“ã‚Œã‚’ä½¿ã£ã¦ <code>setStat</code> ã® <code>Vitality</code> ã®éƒ¨åˆ†ã‚’æ­£ã—ãä¿®æ­£ã™ã‚‹ï¼</p>
<pre class="elm"><code>setStat : Stat -&gt; Int -&gt; Character -&gt; Character
setStat stat value character =
    let
      stats = character.stats
    in
    case stat of
        ...
        Vitality -&gt;
            { character
                | stats = { stats | vitality = value }
                , health =
                    character.health
                      &lt;$ (+) ((value - stats.vitality) * 10)
                      $&gt; always (100 + 10 * value)
            }                </code></pre>
<h3 id="ã‚¦ã‚§ãƒãƒ³ã‚’æŒãŸã›ã‚‹">ã‚¦ã‚§ãƒãƒ³ã‚’æŒãŸã›ã‚‹</h3>
<h4 id="ã‚¤ãƒ³ãƒãƒ¼ãƒˆ">ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</h4>
<p>æ–°ã—ã <code>Weapon.elm</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚Šï¼Œæ–°ã—ã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®šç¾©ã™ã‚‹ï¼</p>
<pre class="elm"><code>module Weapon exposing (..)

type alias Weapon =
    { name : String
    , level : Int
    , damage : Int
    }

new : String -&gt; Int -&gt; Int -&gt; Weapon
new name level damage = Weapon name level damage</code></pre>
<p>ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ <code>Character</code> å‹ã‚’æ‹¡å¼µã—ã‚ˆã†</p>
<pre class="elm"><code>import Weapon exposing (Weapon)

type alias Character =
    { name : String
    , surname : String
    , gender : Gender
    , health : (Int, Int)
    , stats : Stats
    , arm : Maybe Weapon
    }

new : String -&gt; String -&gt; Gender -&gt; Character
new name surname gender =
    Character
      name
      surname
      gender
      (100,100)
      (Stats 0 0 0)
      Nothing</code></pre>
<p>æœ€å¾Œã« <code>equip</code> é–¢æ•°ã‚’ä½œã£ã¦å®Œæˆï¼ ã“ã‚Œã§å…¨ã¦ã®ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã¯ãšã ï¼</p>
<pre class="elm"><code>equip : Weapon -&gt; Character -&gt; Result String Character
equip weapon character =
    if weapon.level &lt; character.status.intelligence then
        Ok { character | arm = Just weapon }
    else
        Err &quot;Too dumb&quot;</code></pre>
<p>ã€Œé ­æ‚ªã™ãã€ã£ã¦ã²ã©ã„(ç¬‘)</p>
<h2 id="phoenix-ã§-todo-ã‚¢ãƒ—ãƒªã‚’ä½œã‚‹">Phoenix ã§ ToDo ã‚¢ãƒ—ãƒªã‚’ä½œã‚‹</h2>
<p>Elchemy ãŒå®Ÿéš›ã«ã©ã®ç¨‹åº¦æœ‰ç”¨ã‹ã‚’æ„Ÿã˜ã‚‹ãŸã‚ã«ï¼ŒElchemy + Elm + Phoenix ã§è¶…ç°¡æ˜“çš„ãª Todo ã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦ã¿ãŸï¼</p>
<ul>
<li><a href="https://gitlab.com/matsubara0507/elchemy_todo_app">MATSUBARA Nobutada / elchemy_todo_app Â· GitLab</a></li>
</ul>
<p>éå»ã« <a href="https://github.com/matsubara0507/patissier-test">Elm + Phoenix ã§ç¤¾å†…ãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ãŸã‚Š</a>ï¼Œ<a href="https://matsubara0507.github.io/posts/2017-12-13-elm-and-haskell-for-elmer.html">Elm + Haskell ã§ Todo ã‚¢ãƒ—ãƒªã‚’æ›¸ã„ã¦ã¿ãŸã‚Š</a>ã—ãŸã®ã§ï¼Œãã®è¾ºã‚Šã‹ã‚‰ã‚³ãƒ¼ãƒ‰ã‚„æ§‹æˆã¯ãƒ‘ã‚¯ãƒƒã¦æ¥ã¦ã¾ã™ï¼ GitLab ã«ç½®ã„ã¦ã‚‹ã®ã¯ï¼Œãƒ¢ãƒã¯è©¦ã—ã£ã¦ã‚„ã¤(ç¬‘)ï¼</p>
<h3 id="phoenix-ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«">Phoenix ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h3>
<p>Elchemy (ãŠã‚ˆã³ Elixirãƒ»Elmãƒ»npm) ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã¨ã™ã‚‹ï¼ <a href="https://hexdocs.pm/phoenix/installation.html">Phoenix ã®ã‚µã‚¤ãƒˆ</a>ã«ã‚ã‚‹é€šã‚Šã«ã‚„ã‚Œã°ã‚ˆã„ï¼</p>
<pre><code>$ mix archive.install https://github.com/phoenixframework/archives/raw/master/phx_new.ez</code></pre>
<h3 id="project-ã‚’ä½œæˆ">Project ã‚’ä½œæˆ</h3>
<p>ã“ã‚“ãªæ™‚ã®ãŸã‚ã« <code>elchemy init</code> ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ãŒã‚ã‚‹(ï¼Ÿ)ï¼</p>
<pre><code>$ mix phx.new elchemy_todo_app --no-ecto
$ cd elchemy_todo_app
$ elchemy init</code></pre>
<p><code>elchemy new</code> ã¨ã®é•ã„ã¯ï¼Œ<code>mix.exs</code> ã® Elixir ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤ã„ã®ã¨ <code>.formatter.exs</code> ãã‚‰ã„ã‹ãªï¼Ÿ ä»Šå›ã¯ DB ã‚’ã‚ã–ã‚ã–ä½¿ã†ã®ãŒã‚ã‚“ã©ãã•ã„ã®ã§ï¼Œã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã£ã½ã„ GenServer ã‚’å®šç¾©ã™ã‚‹(ãªã®ã§ <code>--no-ecto</code>)ï¼</p>
<h3 id="crud-ã‚’ä½œã‚‹">CRUD ã‚’ä½œã‚‹</h3>
<p>Phoenix ã« CRUD ã‚’è¿½åŠ ã™ã‚‹ã«ã¯ï¼Œã¾ãš<code>router.ex</code> ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’è¶³ã™.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode elixir"><code class="sourceCode elixir"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw">defmodule</span> <span class="cn">ElchemyTodoAppWeb</span><span class="op">.</span><span class="cn">Router</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2">  <span class="im">use</span> <span class="cn">ElchemyTodoAppWeb</span>, <span class="va">:router</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"></a>
<a class="sourceLine" id="cb14-4" data-line-number="4">  <span class="op">...</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"></a>
<a class="sourceLine" id="cb14-6" data-line-number="6">  pipeline <span class="va">:api</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7">    plug(<span class="va">:accepts</span>, [<span class="st">&quot;json&quot;</span>])</a>
<a class="sourceLine" id="cb14-8" data-line-number="8">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9"></a>
<a class="sourceLine" id="cb14-10" data-line-number="10">  scope <span class="st">&quot;/api&quot;</span>, <span class="cn">ElchemyTodoAppWeb</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11">    pipe_through(<span class="va">:api</span>)</a>
<a class="sourceLine" id="cb14-12" data-line-number="12">    resources(<span class="st">&quot;/todos&quot;</span>, <span class="cn">TodoController</span>, <span class="va">only:</span> [<span class="va">:index</span>, <span class="va">:create</span>, <span class="va">:update</span>, <span class="va">:delete</span>])</a>
<a class="sourceLine" id="cb14-13" data-line-number="13">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb14-14" data-line-number="14"><span class="kw">end</span></a></code></pre></div>
<p>æ¬¡ã«ã‚³ãƒ³ãƒˆãƒ­ãƒ©ãƒ¼ã‚’å®šç¾©ã—ï¼Œ</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode elixir"><code class="sourceCode elixir"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">defmodule</span> <span class="cn">ElchemyTodoAppWeb</span><span class="op">.</span><span class="cn">TodoController</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">  <span class="im">alias</span> <span class="cn">Models</span><span class="op">.</span><span class="cn">Todo</span>, <span class="va">as:</span> <span class="cn">Todo</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3">  <span class="im">use</span> <span class="cn">ElchemyTodoAppWeb</span>, <span class="va">:controller</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"></a>
<a class="sourceLine" id="cb15-5" data-line-number="5">  <span class="kw">def</span> index(conn, _params), <span class="kw">do</span>: render(conn, <span class="st">&quot;todos.json&quot;</span>, %{<span class="va">todos:</span> <span class="op">...</span> })</a>
<a class="sourceLine" id="cb15-6" data-line-number="6">  <span class="kw">def</span> create(conn, params), <span class="kw">do</span>: render(conn, <span class="st">&quot;todos.json&quot;</span>, %{<span class="va">todos:</span> <span class="op">...</span> })</a>
<a class="sourceLine" id="cb15-7" data-line-number="7">  <span class="kw">def</span> update(conn, params), <span class="kw">do</span>: render(conn, <span class="st">&quot;todos.json&quot;</span>, %{<span class="va">todos:</span> <span class="op">...</span> })</a>
<a class="sourceLine" id="cb15-8" data-line-number="8">  <span class="kw">def</span> delete(conn, %{<span class="st">&quot;id&quot;</span> <span class="op">=&gt;</span> id}), <span class="kw">do</span>: render(conn, <span class="st">&quot;todos.json&quot;</span>, %{<span class="va">todos:</span> <span class="op">...</span> })</a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="kw">end</span></a></code></pre></div>
<p>(<code>...</code> ã®éƒ¨åˆ†ã¯å¾Œã§åŸ‹ã‚ã‚‹) ãã—ã¦ View ã‚’å®šç¾©ã™ã‚‹ã€‚</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode elixir"><code class="sourceCode elixir"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw">defmodule</span> <span class="cn">ElchemyTodoAppWeb</span><span class="op">.</span><span class="cn">TodoView</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2">  <span class="im">use</span> <span class="cn">ElchemyTodoAppWeb</span>, <span class="va">:view</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3">  <span class="kw">def</span> render(<span class="st">&quot;todos.json&quot;</span>, %{<span class="va">todos:</span> todos}), <span class="kw">do</span>: todos</a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="kw">end</span></a></code></pre></div>
<p>ã•ã¦ã“ã“ã‹ã‚‰ã€€Elchemy ã ã€‚ ãƒ¢ãƒ‡ãƒ«ã‚’ Elchemy ã§å®šç¾©ã™ã‚‹. ã¨ã„ã†ã‹ãƒ¢ãƒ‡ãƒ«ä»¥å¤–ã¯ãƒã‚¯ãƒ­è‰²ãŒå¼·éãã¦ã†ã¾ãã„ã‹ãªã‹ã£ãŸ.</p>
<h3 id="elchemy-ã§ãƒ¢ãƒ‡ãƒ«ã‚’">Elchemy ã§ãƒ¢ãƒ‡ãƒ«ã‚’</h3>
<p>ã¾ãšã¯å‹ã‚’å®šç¾©.</p>
<pre class="elm"><code>module Data.Todo exposing (..)
import Dict

type alias Todo =
    { id : String
    , title : String
    , done : Bool
    }

type alias Todos =
    Dict.Dict String Todo</code></pre>
<p>ã“ã“ã¯ãƒ•ãƒ­ãƒ³ãƒˆå…±æœ‰ã—ãŸã„ã®ã§åˆ¥é€”åˆ‡ã‚Šå‡ºã—ã¦ãŠã. DBã‚’ã‚µãƒœã‚‹ãŸã‚ã« GenServer ãªãƒ¢ãƒ‡ãƒ«ã‚’å®šç¾©ã™ã‚‹.</p>
<pre class="elm"><code>module Models.Todo exposing (..)

import Data.Todo exposing (Todo, Todos)
import Dict
import Elchemy exposing (..)

{- ex
   use GenServer

   def start_link(init \\ %{ todos: %{}, cnt: 0 }), do: GenServer.start_link(__MODULE__, init, name: :todos)

   def init(state), do: {:ok, state}

   def handle_call(:get, _client, state), do: {:reply, state, state}

   def handle_cast({:set, new_state}, _state), do: {:noreply, new_state}

   def gen_(params) do
     %{
       id: params[&quot;id&quot;],
       title: params[&quot;title&quot;],
       done: params[&quot;done&quot;]
     }
   end
-}

type alias State =
    { todos : Todos
    , cnt : Int
    }

type Name
    = Todos

type Action
    = Get
    | Set State

gen : params -&gt; Todo
gen = ffi &quot;Models.Todo&quot; &quot;gen_&quot;

getState : State
getState = call_ Todos Get

setState : State -&gt; State
setState state = cast_ Todos (Set state) |&gt; always state

call_ : Name -&gt; Action -&gt; a
call_ = ffi &quot;GenServer&quot; &quot;call&quot;

cast_ : Name -&gt; Action -&gt; a
cast_ = ffi &quot;GenServer&quot; &quot;cast&quot;</code></pre>
<p><code>Todos</code> ã¨å‰Šé™¤ã•ã‚ŒãŸ <code>Todo</code> ã‚‚å«ã‚ãŸç·æ•°ã‚’è¡¨ã—ãŸ <code>Int</code> ã‚’æŒã£ãŸ <code>State</code> å‹ã‚’çŠ¶æ…‹ã¨ã—ã¦ GenServer ã«ä¿æŒã—ã¦æ¬²ã—ã„ï¼ å‡ºåŠ›ã—ãŸ Elixir ã‚³ãƒ¼ãƒ‰ã«ã ã‘ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã›ãŸã‚Šï¼Œã†ã¾ãå‹ä»˜ã‘ã§ããªã„é–¢æ•°ã‚’ Elixir ã‚³ãƒ¼ãƒ‰ã«å¼µã‚Šä»˜ã‘ã‚‹ã«ã¯ï¼Œã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ <code>{- ex ... -}</code> ä½¿ã†ï¼ ã“ã®ä¸­ã«æ›¸ã„ãŸ Elixir ã‚³ãƒ¼ãƒ‰ã¯ãã®ã¾ã¾å‡ºåŠ›å…ˆã«è²¼ã‚Šä»˜ã‘ã‚‰ã‚Œã‚‹(æ¿«ç”¨å³ç¦ï¼)ï¼</p>
<p>Elixir ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã«ã¯ <code>Elchemy</code> ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã‚ã‚‹ <code>ffi</code> é–¢æ•°ã‚’ä½¿ã†ï¼ ãŸã ã—ï¼Œ<code>ffi</code> é–¢æ•°ã‚’ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã«ã¯æ‰±ãˆãªã„ï¼ æ¬¡ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ï¼</p>
<pre><code>Ffi inside function body is deprecated since Elchemy 0.3</code></pre>
<p><code>Name</code> å‹ã‚„ <code>Action</code> å‹ã¯ Elchemy ãŒä»£æ•°çš„ãƒ‡ãƒ¼ã‚¿å‹ã‚’ã‚¢ãƒˆãƒ ã¨ã‚¿ãƒ—ãƒ«ã«å¤‰æ›ã™ã‚‹ã“ã¨ã¨ï¼ŒGenServer ã®ä½¿ã„æ–¹ã‚’çŸ¥ã£ã¦ã„ã‚Œã°æ„å›³ã™ã‚‹ã¨ã“ã‚ãŒåˆ†ã‹ã‚‹ã ã‚ã†ï¼ é€†ã«ãã‚Œã‚‰ã‚’çŸ¥ã£ã¦ã„ãªã‘ã‚Œã°èª­ã¿ã¨ã‚Œãªã„ã¨æ€ã†â€¦</p>
<h2 id="section-1"></h2>
<p>ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‹ã‚‰å‘¼ã°ã‚Œã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯ <code>getState</code> ã¨ <code>setState</code> ã‚’ç”¨ã„ã‚‹ã“ã¨ã§ç°¡å˜ã«æ›¸ã‘ãŸï¼</p>
<pre class="elm"><code>gets : List Todo
gets = Dict.values (.todos getState)

add : Todo -&gt; List Todo
add todo =
    let
        { todos, cnt } = getState
        newId   = toString cnt
        newTodo = { todo | id = newId }
        state   = { todos = Dict.insert newId newTodo todos, cnt = cnt + 1 }
    in
    setState state
        |&gt; .todos
        |&gt; Dict.values

update : Todo -&gt; List Todo
update todo =
    let
        { todos, cnt } = getState
        state = { todos = Dict.update todo.id (Maybe.map &lt;| always todo) todos, cnt = cnt }
    in
    setState state
        |&gt; .todos
        |&gt; Dict.values

remove : String -&gt; List Todo
remove todoId =
    let
        { todos, cnt } =
            getState
        state =
            { todos = Dict.remove todoId todos, cnt = cnt }
    in
    setState state
        |&gt; .todos
        |&gt; Dict.values</code></pre>
<p>ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã® <code>...</code> ã‚’æ›¸ãæ›ãˆã¦ã‚„ã‚Œã°å®Œæˆã ï¼</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode elixir"><code class="sourceCode elixir"><a class="sourceLine" id="cb21-1" data-line-number="1">  <span class="kw">def</span> index(conn, _params), <span class="kw">do</span>: render(conn, <span class="st">&quot;todos.json&quot;</span>, %{<span class="va">todos:</span> <span class="cn">Todo</span><span class="op">.</span>gets()})</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">  <span class="kw">def</span> create(conn, params), <span class="kw">do</span>: render(conn, <span class="st">&quot;todos.json&quot;</span>, %{<span class="va">todos:</span> <span class="cn">Todo</span><span class="op">.</span>add(<span class="cn">Todo</span><span class="op">.</span>gen(params))})</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">  <span class="kw">def</span> update(conn, params), <span class="kw">do</span>: render(conn, <span class="st">&quot;todos.json&quot;</span>, %{<span class="va">todos:</span> <span class="cn">Todo</span><span class="op">.</span>update(<span class="cn">Todo</span><span class="op">.</span>gen(params))})</a>
<a class="sourceLine" id="cb21-4" data-line-number="4">  <span class="kw">def</span> delete(conn, %{<span class="st">&quot;id&quot;</span> <span class="op">=&gt;</span> id}), <span class="kw">do</span>: render(conn, <span class="st">&quot;todos.json&quot;</span>, %{<span class="va">todos:</span> <span class="cn">Todo</span><span class="op">.</span>remove(id)})</a>
<a class="sourceLine" id="cb21-5" data-line-number="5"><span class="kw">end</span></a></code></pre></div>
<p>ã¡ãªã¿ã«å‡ºåŠ›ã•ã‚ŒãŸ Elixir ã‚³ãƒ¼ãƒ‰ã¯<a href="https://gitlab.com/matsubara0507/elchemy_todo_app/blob/443777cee3e8435ee15f04ada6437e41e3af064b/lib/data/todo.elchemy.ex">ã‚³ã‚³</a>ã¨<a href="https://gitlab.com/matsubara0507/elchemy_todo_app/blob/443777cee3e8435ee15f04ada6437e41e3af064b/lib/models/todo.elchemy.ex">ã‚³ã‚³</a>ã§ã™ï¼ èˆˆå‘³ãŒã‚ã‚‹äººã¯è¦‹ã¦ãã ã•ã„ï¼</p>
<h3 id="elm-brunch">Elm Brunch</h3>
<p>Brunch è¨­å®šãŒé›£ã—ã‹ã£ãŸã®ã§ï¼Œæœ¬è³ªçš„ã«ã¯ Elchemy ã¨é–¢ä¿‚ãªã„ã‘ã©æ®‹ã—ã¦ãŠãï¼</p>
<p>Phoenix 1.3 ç³»ã§ã¯ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã« <code>assets</code> ã¨ã„ã†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒã‚ã‚Šï¼ŒHTML/JS/CSS/ç”»åƒ ã®ã‚ˆã†ãªé™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã“ã“ã«ç½®ã„ã¦ãŠãï¼ Brunch ã‚’ä½¿ã£ã¦è¤‡æ•°ã® JS ã‚„ CSS ã‚’åˆã‚ã›ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ï¼ <a href="https://github.com/madsflensted/elm-brunch">elm-brunch</a> ã‚’ä½¿ã†ã“ã¨ã§ Elm ã‚’ JS ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦ãã‚Œã‚‹ï¼</p>
<p>branch-config ã«æ¬¡ã®ã‚ˆã†ãªè¨­å®šã‚’æ›¸ãåŠ ãˆã¦ã‚ã’ã‚‹ï¼ Elm ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚³ãƒ¼ãƒ‰ã¯ <code>lib/web/elm</code> ã«ç½®ã„ã¦ã‚ã‚‹ï¼</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="va">exports</span>.<span class="at">config</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2">  ...</a>
<a class="sourceLine" id="cb22-3" data-line-number="3">  <span class="dt">paths</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb22-4" data-line-number="4">    <span class="dt">watched</span><span class="op">:</span> [<span class="st">&quot;static&quot;</span><span class="op">,</span> <span class="st">&quot;css&quot;</span><span class="op">,</span> <span class="st">&quot;js&quot;</span><span class="op">,</span> <span class="st">&quot;vendor&quot;</span><span class="op">,</span> <span class="st">&quot;../lib/web/elm&quot;</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb22-5" data-line-number="5">    <span class="dt">public</span><span class="op">:</span> <span class="st">&quot;../priv/static&quot;</span></a>
<a class="sourceLine" id="cb22-6" data-line-number="6">  <span class="op">},</span></a>
<a class="sourceLine" id="cb22-7" data-line-number="7"></a>
<a class="sourceLine" id="cb22-8" data-line-number="8">  <span class="dt">plugins</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb22-9" data-line-number="9">    <span class="dt">elmBrunch</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb22-10" data-line-number="10">      <span class="dt">elmFolder</span><span class="op">:</span> <span class="st">&quot;../lib/web/elm&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb22-11" data-line-number="11">      <span class="dt">mainModules</span><span class="op">:</span> [<span class="st">&quot;Main.elm&quot;</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb22-12" data-line-number="12">      <span class="dt">outputFolder</span><span class="op">:</span> <span class="st">&quot;vendor&quot;</span></a>
<a class="sourceLine" id="cb22-13" data-line-number="13">    <span class="op">},</span></a>
<a class="sourceLine" id="cb22-14" data-line-number="14">  ...</a>
<a class="sourceLine" id="cb22-15" data-line-number="15">  <span class="op">}</span></a>
<a class="sourceLine" id="cb22-16" data-line-number="16">  ...</a>
<a class="sourceLine" id="cb22-17" data-line-number="17"><span class="op">}</span></a></code></pre></div>
<h3 id="ãƒ•ãƒ­ãƒ³ãƒˆéƒ¨åˆ†">ãƒ•ãƒ­ãƒ³ãƒˆéƒ¨åˆ†</h3>
<p>ã»ã‚“ã®å°‘ã—ã ãŒã‚³ãƒ¼ãƒ‰ã‚’å†åˆ©ç”¨ã§ãã‚‹ï¼ API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ï¼</p>
<pre class="elm"><code>module TodoAPI exposing (..)

import Data.Todo exposing (Todo)
import Http

getTodos : Http.Request (List Todo)
getTodos =
    Http.request
        { method =
            &quot;GET&quot;
        , headers =
            []
        , url =
            String.join &quot;/&quot;
                [ baseUrl
                , &quot;todos&quot;
                ]
        , body =
            Http.emptyBody
        , expect =
            Http.expectJson (list decodeTodo)
        , timeout =
            Nothing
        , withCredentials =
            False
        }</code></pre>
<p>ãƒ›ãƒ³ãƒˆã¯ã“ã®å½“ãŸã‚Šã‚‚ Elchemy ã‚’ä½¿ã£ã¦ç”Ÿæˆã§ãã‚‹ã¨ã‚ˆã„ã®ã ãŒâ€¦ ã‚‚ã—ã‹ã—ã¦ <a href="https://github.com/saschatimme/elm-phoenix">elm-phoenix</a> ãªã‚‹ã‚‚ã®ã‚’ä½¿ãˆã°ã‚ˆã‹ã£ãŸã®ã‹ãªï¼Ÿ ã¾ãŸï¼ŒThe Elm Architecture éƒ¨åˆ†ã¯é•·ã„ã®ã§å‰²æ„›ï¼</p>
<h2 id="section-2"></h2>
<p>ãƒ›ãƒ³ãƒˆã¯ assets å›ã‚ŠãŒä»–ã«ã‚‚ãŸãã•ã‚“ã‚ã‚‹ãŒ,æœ¬è³ªçš„ãªéƒ¨åˆ†ã¯ã“ã‚Œã§å®Œæˆï¼ ã‚ã¨ã¯ãƒ¢ãƒ­ãƒ¢ãƒ­ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ <code>mix phx.server</code> ã¨ã™ã‚Œã°å‹•ä½œã™ã‚‹ã¯ãšã ï¼</p>
<h3 id="æ„Ÿæƒ³">æ„Ÿæƒ³</h3>
<ul>
<li><strong>ã†ã‚Œã—ã¿</strong>
<ul>
<li>é™çš„æ¤œæŸ»ã¯ç¥</li>
<li>ãƒ•ãƒ­ãƒ³ãƒˆã¨ã‚³ãƒ¼ãƒ‰ã‚’å…±æœ‰ã§ãã‚‹</li>
</ul></li>
<li><strong>ã¤ã‚‰ã¿</strong>
<ul>
<li>Phoenix ã®ã„ãã¤ã‹ã¯å‹ä»˜ã‘ã§ããªã„
<ul>
<li>ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®å¼•æ•°</li>
<li>ã¸ãƒ†ãƒ­ãƒªã‚¹ãƒˆã®ã‚ˆã†ãªãƒ¢ãƒ</li>
<li>çµå±€ã“ã“ã§è‰¯ãåˆ†ã‹ã‚‰ã‚“ã‚¨ãƒ©ãƒ¼ã«â€¦</li>
</ul></li>
<li>ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒé…ã„</li>
</ul></li>
</ul>
<h2 id="ãŠã—ã¾ã„">ãŠã—ã¾ã„</h2>
<p>ä»Šåº¦ã¯å‡¦ç†ç³»ã®ä¸­èº«ã§ã‚‚è¿½ã£ã¦ã¿ã‚ˆã†ã‹ãªï¼</p>
  </div>
</div>
</article>
]]></summary>
</entry>
<entry>
    <title>Elchemy å…¥é–€ : ãã®ï¼‘</title>
    <link href="https://matsubara0507.github.io/posts/2018-06-15-introduce-elchemy-part1.html" />
    <id>https://matsubara0507.github.io/posts/2018-06-15-introduce-elchemy-part1.html</id>
    <published>2018-06-15T00:00:00Z</published>
    <updated>2018-06-15T00:00:00Z</updated>
    <summary type="html"><![CDATA[<article class="post card" itemscope itemtype="http://schema.org/BlogPosting">
 <div class="card-content">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Elchemy å…¥é–€ : ãã®ï¼‘</h1>
    <p class="post-meta">
      <time datetime="2018-06-15" itemprop="datePublished">
        Jun 15, 2018
      </time>
      
      
      <div class="tags">
          <i class="fa fa-tags"></i> <a href="/tags/Elchemy.html">Elchemy</a> <a href="/tags/Elm.html">Elm</a> <a href="/tags/Elixir.html">Elixir</a> <a href="/tags/Haskell.html">Haskell</a>
      </div>
      
    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Elm ã‹ã‚‰ Elixir ã®ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ©ï¼Œ<a href="https://github.com/wende/elmchemy">Elchemy</a> ã«ã¤ã„ã¦ã‚¤ãƒ­ã‚¤ãƒ­ã¨èª¿ã¹ãŸã®ã§ã¾ã¨ã‚ã¦ã„ãã¾ã™ï¼ ä»Šå›ã¯</p>
<ul>
<li><a href="https://github.com/wende/elchemy/blob/9184d758dc1d5d5d3209302f9742c11fe01aa92c/README.md">README</a> ã®æ„è¨³</li>
<li>Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ä½œæˆ</li>
<li>Tutorial ãã®ï¼‘ã‚’ã‚„ã£ã¦ã¿ãŸ</li>
</ul>
<p>ã®3æœ¬ç«‹ã¦ã§ã™ï¼ ã¡ãªã¿ã«ï¼Œç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ 0.7.4 ã§ã™ï¼</p>
<h2 id="readme-æ„è¨³">README æ„è¨³</h2>
<p>Elchemy ã¯ï¼ŒElixir ã®å¼·åŠ›ãªã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã¨ Elm ã®å‹å®‰å…¨ã«ã‚ˆã£ã¦ï¼Œã‚ˆã‚Šç°¡æ½”ã«é«˜é€Ÿã«é«˜å“è³ªã§å‹å®‰å…¨ãªã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°ã™ã‚‹ãŸã‚ã«ä½œã‚‰ã‚ŒãŸå‡¦ç†ç³»ã§ã™ï¼</p>
<ul>
<li><a href="http://elchemy-live.herokuapp.com">Elchemy ã®ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ç’°å¢ƒ</a></li>
<li><a href="https://wende.gitbooks.io/elchemy/content/">Elchemy ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a></li>
<li><a href="https://hackernoon.com/elmchemy-write-type-safe-elixir-code-with-elms-syntax-part-1-introduction-8968b76d721d">Elchemy ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</a> (ä»Šã®ã¨ã“ã‚ Part1 ã¨ Part2 ãŒã‚ã‚‹)</li>
</ul>
<p>ãªã«ã‹è³ªå•ãŒã‚ã‚‹å ´åˆã¯ <a href="https://github.com/wende/elchemy/labels/Q%26A"><code>Q&amp;A</code> ãƒ©ãƒ™ãƒ«ã‚’ä»˜ã‘ã¦ Issue ã‚’æ›¸ã„ã¦</a>ï¼Œã ãã†ã ï¼</p>
<h3 id="features">Features</h3>
<ul>
<li><strong>å‹æ¨è«–:</strong> å¼·åŠ›ãªå‹æ¨è«–ã«ã‚ˆã£ã¦å‹æ³¨é‡ˆã‚’ä»˜ã‘ã‚‹ã“ã¨ã¯ã‚ã£ãŸã«ãªã„ï¼ ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«ã‚ˆã£ã¦å…¨ã¦æ¤œæŸ»ã•ã‚Œã‚‹ï¼</li>
<li><strong>ç°¡å˜ã§å‹å®‰å…¨ãªå‘¼ã³å‡ºã—:</strong> ä½™è¨ˆãªãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆãªã—ã« Elixir/Erlang ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å‘¼ã³å‡ºã™ã“ã¨ãŒå‡ºæ¥ã‚‹ï¼ Elixir ã® typespec ã«åŸºã¥ã„ã¦å¯èƒ½ãªé™ã‚Šå¾¹åº•çš„ã«å‹å®‰å…¨ã®è¦³ç‚¹ã‹ã‚‰å…¨ã¦ã®å‘¼ã³å‡ºã—ã‚’æ¤œæŸ»ã™ã‚‹ï¼</li>
<li><strong>Elm ã¨ Elixir ã®ã„ã„ã¨ã“ã©ã‚Š:</strong> Elchemy ã¯ Elm ã®å‹å®‰å…¨æ€§ã¨å¼·åŠ›ãªå‹æ¨è«–ï¼Œç´ æ™´ã‚‰ã—ã„è¡¨ç¾åŠ›ã‚’ç¶™æ‰¿ã—ï¼ŒElixir ã® Doc-test ã¨ãƒ„ãƒ¼ãƒ«ç¾¤ï¼Œãã—ã¦ BEAM ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’ç¶™æ‰¿ã—ã¦ã„ã‚‹ï¼</li>
<li><strong>ã»ã¨ã‚“ã©ãªã„ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼:</strong> Elchemy ã®å‹ã‚·ã‚¹ãƒ†ãƒ ã¯ <strong>ã»ã¼å…¨ã¦ã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼ã‚’æ’é™¤ã™ã‚‹</strong> ï¼ ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãŒå°‘ãªããªã‚‹ã“ã¨ã§ï¼ŒElchemy ã®ã‚³ãƒ¼ãƒ‰ãã®ã‚‚ã®ã¯å®‰å…¨ã«ãªã‚‹ï¼ ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆï¼ŒãŠãã‚‰ã Elixir ã®ã¨ã“ã‚ãŒèµ·ã“ã—ã¦ã„ã‚‹ã®ã ã‚ã†ï¼</li>
<li><strong>ç¾ã—ãã¦å¯èª­æ€§ã®é«˜ã„å‡ºåŠ›:</strong> ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã¯æ…£ç¿’çš„ã§åŠ¹ç‡çš„ã§å…ƒã®ã‚³ãƒ¼ãƒ‰ãŒç„¡ãã¨ã‚‚èª­ã¿ã‚„ã™ãåˆ†æå¯èƒ½ã§ã‚ã‚‹ï¼</li>
</ul>
<h3 id="faq">FAQ</h3>
<h4 id="ã©ã†ã„ã†äººã«ãŠå‹§ã‚ã‹">ã©ã†ã„ã†äººã«ãŠå‹§ã‚ã‹ï¼Ÿ</h4>
<ul>
<li>å‹ãŒå¥½ããªäºº</li>
<li>å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼ã‚ˆã‚Šã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã®æ–¹ãŒå¥½ã¿ãªäºº</li>
<li><code>defp add(a, b), do: b + c</code> ã‚ˆã‚Š <code>add b c = b + c</code> ãªæ›¸ãæ–¹ã®æ–¹ãŒå¥½ã¿ãªäºº</li>
<li>ã‚«ãƒªãƒ¼åŒ–ãŒå¥½ããªäºº</li>
<li>ã•ã£ã•ã¨å¤±æ•—ã•ã›ã‚‹ã‚ˆã‚Šå…¨ã¦å¤±æ•—ã—ãªã„æ–¹ãŒè³¢ã„ã¨æ€ã†äºº</li>
</ul>
<h4 id="ã©ã†ã„ã†äººã«ãŠå‹§ã‚ã˜ã‚ƒãªã„ã‹">ã©ã†ã„ã†äººã«ãŠå‹§ã‚ã˜ã‚ƒãªã„ã‹ï¼Ÿ</h4>
<ul>
<li>ã‚‚ã—ã‚ãªãŸã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒå¾¹åº•çš„ã«ãƒ†ã‚¹ãƒˆã•ã‚ŒãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ä¾å­˜ã—ã¦ãŠã‚Šã‹ã¤ï¼Œã‚ãªãŸãŒ 0 ã‹ã‚‰å§‹ã¾ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å«Œã†å ´åˆ</li>
<li>ãƒ¢ãƒŠãƒ‰ã‚’å­¦ã¶ã“ã¨ã§å£ã²ã’ãŒä¼¸ã³è¦–åŠ›ãŒå¼±ããªã‚‹ã“ã¨ã‚’æã‚Œã‚‹å ´åˆ</li>
</ul>
<h4 id="æ—¢ã«ã‚ã‚‹-elixir-ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç½®ãæ›ãˆã‚‹ã®ã¯å¯èƒ½ã‹">æ—¢ã«ã‚ã‚‹ Elixir ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç½®ãæ›ãˆã‚‹ã®ã¯å¯èƒ½ã‹ï¼Ÿ</h4>
<p>å¯èƒ½ã§ã™ï¼ ã—ã‹ã—ï¼ŒãƒŠã‚¤ã‚¹ã§ãƒ€ãƒ³ãƒ‡ã‚£ãƒ¼ãªã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãƒ„ãƒ¼ãƒ«ã¯é–‹ç™ºä¸­ã§ã™ï¼</p>
<h4 id="ä¸Šå¸ã«-elchemy-ã«ç¾ã‚’æŠœã‹ã—ã¦ã„ã‚‹ã“ã¨ãŒã°ã‚Œã‚‹ã ã‚ã†ã‹">ä¸Šå¸ã« Elchemy ã«ç¾ã‚’æŠœã‹ã—ã¦ã„ã‚‹ã“ã¨ãŒã°ã‚Œã‚‹ã ã‚ã†ã‹ï¼Ÿ</h4>
<p>Elchemy ã®å‡ºåŠ›ã¯ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§ã‚’ç¬¬ä¸€ç´šå¸‚æ°‘ã¨ã—ã¦æ‰±ã£ã¦ã„ã‚‹ï¼ ã‚³ãƒ¼ãƒ‰ã¯é©åˆ‡ã«ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã•ã‚Œï¼Œã‚³ãƒ¡ãƒ³ãƒˆã¯çœç•¥ã•ã‚Œãšï¼Œã§ãã‚‹ã ã‘æœ€é©åŒ–ã•ã‚Œã¦ã„ã‚‹(ä¾‹ãˆã°ï¼Œcase ç¯€ã¯é–¢æ•°ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã«ãªã‚‹)ï¼</p>
<h4 id="elchemy-1.0.0-ã¯ã¾ã ">Elchemy 1.0.0 ã¯ã¾ã ï¼Ÿ</h4>
<p>çµ‚ã‚ã£ãŸã‚‰ã­ï¼</p>
<h4 id="ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã—ã¦ã‚‚ã„ã„">ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã—ã¦ã‚‚ã„ã„ï¼Ÿ</h4>
<p>çµ¶å¯¾ã«ã—ã¦ãã ã•ã„ï¼</p>
<h4 id="å‹ã¯ã©ã®ã‚ˆã†ã«è¡¨ã•ã‚Œã‚‹">å‹ã¯ã©ã®ã‚ˆã†ã«è¡¨ã•ã‚Œã‚‹ï¼Ÿ</h4>
<p>Elchemy ã®å…¨ã¦ã®å€¤ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹ã®ã‚¢ãƒˆãƒ ã¨ã—ã¦è¡¨ç¾ã•ã‚Œï¼Œã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®å¼•æ•°ã¯ã‚¿ãƒ—ãƒ«ã§è¡¨ã‚ã•ã‚Œã‚‹ï¼ ã¤ã¾ã‚Šï¼ŒElchemy ã§ <code>MyType 42 &quot;Forty two&quot; Error</code> ã¨ã„ã†å€¤ã¯ <code>{:my_type, 42, &quot;Forty two&quot;, :error}</code> ã¨ã„ã† Elixir ã®å€¤ã¨ãªã‚‹ï¼</p>
<p>(Type constructor ã¨æ›¸ã„ã¦ã‚ã‚‹ãŒæ­£ã—ãã¯ Data constructor ã‚ã‚‹ã„ã¯ value constructor ã®ã¯ãšã§ï¼ŒType application ã‚‚é–“é•ã„ã ã¨æ€ã‚ã‚Œã‚‹)</p>
<h4 id="elm-ã®æ—¢å­˜ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’-elchemy-ã§ä½¿ãˆã‚‹ã®">Elm ã®æ—¢å­˜ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ Elchemy ã§ä½¿ãˆã‚‹ã®ï¼Ÿ</h4>
<p>Native ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚„ Portï¼ŒElm ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’ä½¿ã‚ãªã„é™ã‚Šã¯ï¼Œãã‚Œã‚‰ã‚’å®‰å…¨ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ä½¿ã†ã“ã¨ãŒå‡ºæ¥ã‚‹ï¼</p>
<h4 id="elixir-ã®æ—¢å­˜ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’-elchemy-ã§ä½¿ãˆã‚‹ã®">Elixir ã®æ—¢å­˜ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ Elchemy ã§ä½¿ãˆã‚‹ã®ï¼Ÿ</h4>
<p>ä½¿ãˆã‚‹ï¼ ä»»æ„ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä»»æ„ã®é–¢æ•°ã‚’ FFI å‘¼ã³å‡ºã—ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ï¼ Elixir ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ŒErlang ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼Œã‚ã‚‹ã„ã¯ãƒã‚¯ãƒ­ã§ã‚ã£ã¦ã—ã¦ã‚‚è‡ªèº«ã® Elchemy ã‚³ãƒ¼ãƒ‰ã«å«ã‚€ã“ã¨ãŒå‡ºæ¥ã‚‹ï¼ FFI å‘¼ã³å‡ºã—ã¯ Elchemy å†…ã§ç‰¹åˆ¥æ‰±ã„ã•ã‚Œã‚‹ï¼ ãã—ã¦ï¼Œ<code>@spec</code> ã«åŸºã¥ã„ãŸå‹ã®è§£æã‚’è¡Œã†ãƒ†ã‚¹ãƒˆãŒç”Ÿæˆã•ã‚Œã‚‹ãŸã‚ï¼ŒElixir ã‚³ãƒ¼ãƒ‰ã®å‹å®‰å…¨æ€§ã‚’æãªã†ã“ã¨ã¯ç„¡ã„ï¼ å¯èª­æ€§ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã«ã‚‚ FFI å‘¼ã³å‡ºã—ã¯å¯èƒ½ãªé™ã‚Šé¿ã‘ï¼Œå¸¸ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã¨ <code>doctest</code> ã‚’ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã™ã‚‹ï¼</p>
<h4 id="ãƒ†ã‚¹ãƒˆã®ã‚ˆã†ãª-elixir-ã®ãƒã‚¯ãƒ­ã¯ä½¿ãˆã‚‹ã®">ãƒ†ã‚¹ãƒˆã®ã‚ˆã†ãª Elixir ã®ãƒã‚¯ãƒ­ã¯ä½¿ãˆã‚‹ã®ï¼Ÿ</h4>
<p>æ®‹å¿µãªãŒã‚‰ï¼Œ<code>do...end</code> ãƒ–ãƒ­ãƒƒã‚¯ã®ã‚ˆã†ãªä»»æ„ã®ãƒã‚¯ãƒ­ã‚’æ›¸ãã“ã¨ã¯ã¾ã ã§ããªã„ï¼ æ›¿ã‚ã‚Šã¨ã—ã¦ï¼Œä»»æ„ã®é–¢æ•°ã«å¯¾ã—ã¦æ¬¡ã®ã‚ˆã†ãª Elixir ã®ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ãŒå‡ºæ¥ã‚‹ï¼</p>
<pre class="elm"><code>{- ex
  code_here
-}</code></pre>
<p>ã—ã‹ã—ï¼Œãã‚Œã¯æœ€å¾Œã®æ‰‹æ®µã§ã‚ã‚Šï¼Œä¹±ç”¨ã™ã¹ãã§ã¯ãªã„ï¼</p>
<h4 id="elchemy-ã®-.elm-ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã®ã«-elm-å‡¦ç†ç³»ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹">Elchemy ã® <code>.elm</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã®ã« Elm å‡¦ç†ç³»ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼Ÿ</h4>
<p>(ãªã‚“ã¨ãªãè§£ç­”çš„ã« Elixir å‡¦ç†ç³»ã ã‘ã§å®Œçµã§ããªã„ã®ï¼Ÿã¨ã„ã†æ„å‘³ã£ã½ã„)</p>
<p>ã‚ãªãŸã¯ Elm ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ Elixir ã®ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ãŸã„ã®ã«ï¼Œ Elixir ã‚³ãƒ¼ãƒ‰ã®ç”Ÿæˆã‚’ Elixir ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ä½œã‚ŠãŸã„ã§ã™ã‹ï¼Ÿ</p>
<h4 id="elchemy-ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ">Elchemy ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</h4>
<p>ä½œè€…ã¯ã“ã® Elchemy ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãã®ã‚‚ã®ã‚’å¯èƒ½ãªé™ã‚Š Elm ã§æ§‹ç¯‰ã—ãŸã„ã‚‰ã—ã„ï¼ <a href="https://github.com/wende/elchemy#maturity-of-the-project">README ã«ã¯ãã®é”æˆåº¦ãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹</a>ï¼ å‡¦ç†ç³»ãã®ã‚‚ã®ã¯ï¼Œã»ã¨ã‚“ã© Elm ã«ãªã£ã¦ã„ã‚‹ã‚ˆã†ã (çµæœã¨ã—ã¦ä¸–ã«ã‚‚çã—ã„ Elm ã§æ›¸ã‹ã‚ŒãŸã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒå‡ºæ¥ã¦ã„ã‚‹)ï¼ ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚„ ErlangVM å›ã‚ŠãŒå³ã—ã„ã‚‰ã—ã„ï¼</p>
<h2 id="dockerã‚¤ãƒ¡ãƒ¼ã‚¸ä½œæˆ">Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ä½œæˆ</h2>
<p>ã‚³ã‚³ã‹ã‚‰ãŒæœ¬é¡Œï¼</p>
<p>æ–°ã—ã„è¨€èªã‚’è»½ãè©¦ã™ã®ã«æœ€é©ãªã®ã¯ã‚„ã¯ã‚Š Docker ã ï¼ Elchemy ã® Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯è¦‹å½“ãŸã‚‰ãªã‹ã£ãŸã®ã§ä½œã£ãŸï¼</p>
<ul>
<li><a href="https://hub.docker.com/r/matsubara0507/elchemy">matsubara0507/elchemy - Docker Hub</a></li>
</ul>
<h3 id="ã§ãã‚‹ã¾ã§">ã§ãã‚‹ã¾ã§</h3>
<p>æœ¬å®¶ã® README ã‚’èª­ã‚€ã¨ã‚ã‹ã‚‹ã‚ˆã†ã« Elchemy ã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã®ã«å¿…è¦ãªãƒ¢ãƒã¯ä»¥ä¸‹ã®4ã¤ï¼</p>
<ul>
<li>Node (npm)</li>
<li>Elixir (ErlangVM)</li>
<li>Elm</li>
<li>elm-github-install</li>
</ul>
<p>ã“ã‚Œã‚‰ã®ã†ã¡ï¼Œã‚‚ã£ã¨ã‚‚ã‚ã‚“ã©ãã•ã„ã®ã¯ Elixir ã‚‚ã¨ã„ ErlangVM ã ã¨æ€ã†ï¼ ãªã®ã§ base ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ Elixir ã«ã—ï¼Œã²ã¨ã¤ãšã¤å…¥ã‚Œã¦ã„ã£ãŸï¼</p>
<p>base ã‚¤ãƒ¡ãƒ¼ã‚¸ã«ã—ãŸ <a href="https://hub.docker.com/_/elixir/">Elixir ã® Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯å…¬å¼ã®ãƒ¢ãƒ</a>ã‚’ä½¿ã†ï¼ <a href="https://github.com/erlang/docker-erlang-otp/blob/99ab1e150c3708ce81bc08073cf5793ef67c6a1c/20/Dockerfile#L1">OSã¯ Debian9 ã </a>ï¼</p>
<p>Debian ã¸ã® Node ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«ã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ãŸï¼</p>
<ul>
<li><a href="http://atomiyama.com/linux/page/debian-9-2-node-npm/">debian9.2ã«Node.jsã¨npmã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ï½œatominux</a></li>
</ul>
<p>ã“ã‚“ãªæ„Ÿã˜</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode dockerfile"><code class="sourceCode dockerfile"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">RUN</span> curl -sL https://deb.nodesource.com/setup_${NODE_VERSION} | bash - \</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">  &amp;&amp; apt-get update &amp;&amp; apt-get install -y nodejs \</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">  &amp;&amp; apt-get clean \</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">  &amp;&amp; rm -rf /var/lib/apt/lists/*</a></code></pre></div>
<p>å¾Œã¯ç°¡å˜ã§ Elmï¼Œelm-github-installï¼ŒElchemy ã¯ npm ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ï¼ ãŸã ã—ï¼ŒElm ã¨ elm-github-install ã«ã¯ <code>--unsafe-perm=true --allow-root</code> ã¨ã„ã†<a href="https://github.com/gdotdesign/elm-github-install/issues/21#issuecomment-332827661">ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ãªã„ã¨ã„ã‘ãªã„</a>ï¼</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode dockerfile"><code class="sourceCode dockerfile"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">RUN</span> npm i -g elm@${ELM_VERSION} --unsafe-perm=true --allow-root</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">RUN</span> npm i -g elm-github-install@${ELM_GITHUB_INSTALL_VERSION} --unsafe-perm=true --allow-root</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="kw">RUN</span> npm i -g elchemy@${ELCHEMY_VERSION}</a></code></pre></div>
<h3 id="auto-build">Auto Build</h3>
<p>Elchemy ã®ãƒªãƒªãƒ¼ã‚¹ã‚’çœºã‚ã¦ã‚‹ã¨æƒ³åƒã‚ˆã‚Šé–‹ç™ºã‚¹ãƒ”ãƒ¼ãƒ‰ãŒé€Ÿã‹ã£ãŸã®ã§ï¼ŒElchemy ã®æ›´æ–°ã‚’è¦³æ¸¬ã—ã¦è‡ªå‹•ãƒ“ãƒ«ãƒ‰ã—ã¦ãã‚Œã‚‹ä»•çµ„ã¿ã‚’ä½œã‚‹ã“ã¨ã«ã—ãŸï¼ ã‚·ã‚§ãƒ«èŠ¸ã‚’é§†ä½¿ã™ã‚Œã°ãªã‚“ã¨ã‹ãªã‚Šãã†ã ã£ãŸãŒï¼Œã‚µã‚¯ãƒƒã¨ Haskell èŠ¸ã‚’ã‹ã¾ã—ã¦ CLI ã‚’ä½œã£ãŸï¼</p>
<ul>
<li><a href="https://github.com/matsubara0507/dockwright">matsubara0507/dockwright - GitHub</a></li>
</ul>
<p>(èˆ¹å¤§å·¥ãŒ <code>shipwright</code> ãªã®ã§ Dockerfile å¤§å·¥ã£ã¦ã“ã¨ã§ <code>dockwright</code>)</p>
<p>ä»¥ä¸‹ã®ã‚ˆã†ãªè¨­å®šã‚’æ›¸ã„ã¦ãŠãã¨ <code>dockwright</code> ã£ã¦ã‚³ãƒãƒ³ãƒ‰ã§ GitHub ã® <code>release</code> API ã‚’å©ã„ã¦ãƒªãƒªãƒ¼ã‚¹ã‚¿ã‚°ã‚’å–ã£ã¦ãã¦ãã‚Œã‚‹ï¼ ãã‚Œã‚’ Docker å†…ã®ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«æ›¸ãè¾¼ã‚€ï¼</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="fu">env:</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">  <span class="fu">elchemy_version:</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3">    <span class="fu">github:</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4">      <span class="fu">repo:</span><span class="at"> wende/elchemy</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">      <span class="fu">hook:</span><span class="at"> release</span></a></code></pre></div>
<p>ã‚ã¨ã¯ git diff ã§æ›´æ–°ã‚’ã¿ã¦æ›´æ–°ãŒã‚ã‚Œã°ã‚³ãƒŸãƒƒãƒˆã™ã‚‹(ã‚³ãƒŸãƒƒãƒˆã•ãˆã™ã‚Œã° Docker Hub ãŒè‡ªå‹•ãƒ“ãƒ«ãƒ‰ã—ã¦ãã‚Œã‚‹)ï¼ å®šæœŸå®Ÿè¡Œã¯ä¾‹ã®å¦‚ã TravisCI ã§å›ã™ï¼</p>
<h2 id="tutorial-ãã®ã‚’ã‚„ã£ã¦ã¿ãŸ">Tutorial ãã®ï¼‘ã‚’ã‚„ã£ã¦ã¿ãŸ</h2>
<p>ä»¥ä¸‹ã®è¨˜äº‹ã‚’ã‚„ã£ã¦ã¿ã‚‹ï¼</p>
<ul>
<li><a href="https://hackernoon.com/elmchemy-write-type-safe-elixir-code-with-elms-syntax-part-1-introduction-8968b76d721d">Elmchemyâ€Šâ€”â€ŠWrite type-safe Elixir code with Elmâ€™s syntaxâ€Šâ€”â€Špart 1â€Šâ€”â€ŠIntroduction</a></li>
</ul>
<p>ã¾ãšã¯ <code>article_example_elchemy</code> ã¨ã„ã†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚‹ï¼ è¨˜äº‹å†…ã§ã¯ <code>mix new</code> ã‚’ã—ã¦ <code>elchemy init</code> ã‚’ã—ã‚ã¨æ›¸ã„ã¦ã‚ã‚‹ãŒï¼Œæœ€æ–°ã® Elchemy ã§ã¯ <code>elchemy new</code> ã‚’ã™ã‚‹ã“ã¨ã§ä¸€æ°—ã«ã‚„ã£ã¦ãã‚Œã‚‹ï¼</p>
<pre><code>$ elchemy new article_example_elchemy</code></pre>
<p>Elchemy ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ãŸã‚ã«ã¯ï¼Œ<code>mix.exs</code> ã‚’æ¬¡ã®ã‚ˆã†ã«<a href="https://wende.gitbooks.io/elchemy/content/INSTALLATION.html">æ›¸ãæ›ãˆã‚‹å¿…è¦ãŒã‚ã‚‹</a>ï¼</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode elixir"><code class="sourceCode elixir"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">defmodule</span> <span class="cn">MyProject</span><span class="op">.</span><span class="cn">Mixfile</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">  <span class="im">use</span> <span class="cn">Mix</span><span class="op">.</span><span class="cn">Project</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4">  <span class="kw">def</span> project <span class="kw">do</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5">    [</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">      <span class="va">app:</span> <span class="va">:my_project</span>,</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">      <span class="va">version:</span> <span class="st">&quot;0.1.0&quot;</span>,</a>
<a class="sourceLine" id="cb6-8" data-line-number="8">      <span class="va">elixir:</span> <span class="st">&quot;~&gt; 1.5&quot;</span>,</a>
<a class="sourceLine" id="cb6-9" data-line-number="9">      <span class="va">start_permanent:</span> <span class="cn">Mix</span><span class="op">.</span>env <span class="op">==</span> <span class="va">:prod</span>,</a>
<a class="sourceLine" id="cb6-10" data-line-number="10">      <span class="va">deps:</span> deps()</a>
<a class="sourceLine" id="cb6-11" data-line-number="11">    ] <span class="op">|&gt;</span> <span class="cn">Code</span><span class="op">.</span>eval_file(<span class="st">&quot;elchemy.exs&quot;</span>)<span class="op">.</span>init <span class="co"># ã‚³ã‚³!</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13">  <span class="op">...</span></a></code></pre></div>
<p><code>|&gt; Code.eval_file(&quot;elchemy.exs&quot;).ini</code> ã®éƒ¨åˆ†ã‚’æ›¸ãåŠ ãˆã¦ã„ã‚‹ï¼</p>
<h3 id="ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ</h3>
<p><code>elchemy new</code> ã—ãŸçµæœã¯ã“ã‚“ãªæ„Ÿã˜(ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã£ã¦ã¯é•ã†ã‹ã‚‚ã—ã‚Œãªã„)ï¼</p>
<pre><code>projrct_name
  |- .elchemy.exs
  |- .formatter.exs
  |- .gitignore
  |- README.md
  |- config
  |   \- config.exs
  |- elm
  |   \- Hello.elm
  |- elm-package.json
  |- lib
  |   \- project_name.ex
  |- mix.exs
  \- test
      |- elchemy_test.exs
      |- project_name_test.exs
      \- test_helper.exs</code></pre>
<p><code>.elchemy.exs</code> ã¯ <code>mix</code> ã‚³ãƒãƒ³ãƒ‰ã‚’ Elchemy ã§ä¸Šæ›¸ãã™ã‚‹ãŸã‚ã® <code>mix</code> è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ï¼Œæ®‹ã‚Šã¯ Elixir ã¨ Elm ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒæ··ã–ã£ã¦ã„ã‚‹ï¼ ã¡ãªã¿ã« <code>.formatter.exs</code> ã¯ Elixir 1.6 ã§è¿½åŠ ã•ã‚ŒãŸ Elixir ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã ï¼</p>
<h3 id="é–¢æ•°ã‚’å®šç¾©ã—ã¦ã¿ã‚‹">é–¢æ•°ã‚’å®šç¾©ã—ã¦ã¿ã‚‹</h3>
<p>è©¦ã—ã«ï¼Œç·å’Œã‚’æ±‚ã‚ã‚‹ <code>sum</code> é–¢æ•°ã‚’æ›¸ã„ã¦ã¿ã‚‹ï¼ <code>elm/Hello.elm</code> ã«æ›¸ãåŠ ãˆã‚‹ã¨ã—ã¦ï¼Œã¾ãšã¯ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’ <code>test\elchemy_test.exs</code> ã« Elixir ã®æ–‡è„ˆã§æ›¸ãåŠ ãˆã¦ã¿ã‚‹ï¼</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode elixir"><code class="sourceCode elixir"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">defmodule</span> <span class="cn">ElchemyTest</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2">  <span class="im">use</span> <span class="cn">ExUnit</span><span class="op">.</span><span class="cn">Case</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3">  <span class="im">use</span> <span class="cn">Elchemy</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4">  doctest <span class="cn">Hello</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"></a>
<a class="sourceLine" id="cb8-6" data-line-number="6">  test <span class="st">&quot;Hello&quot;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7">    assert <span class="cn">Hello</span><span class="op">.</span>hello() <span class="op">==</span> <span class="st">&quot;world!&quot;</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"></a>
<a class="sourceLine" id="cb8-10" data-line-number="10">  test <span class="st">&quot;Sum of lists&quot;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11">     assert <span class="cn">Hello</span><span class="op">.</span>sum([]) <span class="op">==</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12">     assert <span class="cn">Hello</span><span class="op">.</span>sum([<span class="dv">2</span>]) <span class="op">==</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13">     assert <span class="cn">Hello</span><span class="op">.</span>sum([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">-1</span>, <span class="dv">-2</span>, <span class="dv">-3</span>]) <span class="op">==</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb8-14" data-line-number="14">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15"><span class="kw">end</span></a></code></pre></div>
<p>æ¬¡ã« <code>elm/Hello.elm</code> ã«ä»¥ä¸‹ã®é–¢æ•°ã‚’æ›¸ãåŠ ãˆã‚‹ï¼</p>
<pre class="elm"><code>sum : List a -&gt; Int
sum list =
    case list of
        first :: rest -&gt;
            first + sum rest

        [] -&gt;
            0</code></pre>
<p>ã¨ã‚Šã‚ãˆãšãƒ“ãƒ«ãƒ‰ã—ã¦ã¿ã‚‹ï¼</p>
<pre><code>$ mix test
warning: redefining module ElchemyInit (current version defined in memory)
  elchemy.exs:1

==&gt; elchemy
Compiling 24 files (.ex)
warning: unused alias XMaybe
  lib/Elchemy/XRegex.elchemy.ex:28

warning: unused import Elchemy.XBasics
  lib/Elchemy/XChar.elchemy.ex:25

warning: unused import Elchemy.XBasics
  lib/Elchemy/XBitwise.elchemy.ex:6

warning: unused import Elchemy.Macros
  lib/Elchemy/Plugins/Ex_unit.elchemy.ex:7

warning: unused import Elchemy.Macros
  lib/Elchemy/Tests/Ex_unit_test.elchemy.ex:7

Generated elchemy app
==&gt; article_example_elchemy
/usr/bin/elchemy
-- Copying Elixir native files --
-- Compiling Elm files --
----------
Type Checking elm/Hello.elm
-- TYPE MISMATCH ------------------------------------------------- elm/Hello.elm

The left argument of (+) is causing a type mismatch.

21|             first + sum rest
                ^^^^^
(+) is expecting the left argument to be a:

    number

But the left argument is:

    a

Hint: Your type annotation uses type variable `a` which means any type of value
can flow through. Your code is saying it CANNOT be anything though! Maybe change
your type annotation to be more specific? Maybe the code has a problem? More at:
&lt;https://github.com/elm-lang/elm-compiler/blob/0.18.0/hints/type-annotations.md&gt;

Detected errors in 1 module.
Type Check failed
** (Mix) Elchemy failed the compilation with an error</code></pre>
<p>ã„ã‚ã„ã‚å‡ºã¦ã„ã‚‹ãŒé‡è¦ãªã®ã¯ <code>The left argument of (+) is causing a type mismatch.</code> ã®éƒ¨åˆ†ï¼ å‹æ¤œæŸ»ã—ãŸçµæœï¼Œå‹ãŒåˆã‚ãªã‹ã£ãŸã®ã ï¼ å¿µã®ãŸã‚å‹æ¤œæŸ»å™¨ã®è¨€ã„åˆ†ã‚’è£œè¶³ã—ã¦ãŠãã¨ï¼Œ<code>sum</code> é–¢æ•°ã®å¼•æ•°ã¨ã—ã¦ <code>List a</code> å‹ã®å€¤ <code>list</code> ã®è¦ç´ ã§ã‚ã‚‹ <code>first</code> ã¯ <code>a</code> å‹ã¨æ¨è«–ã•ã‚Œã‚‹ãŒï¼ŒåŠ ç®— <code>(+)</code> ã¯ <code>number</code> å‹ã˜ã‚ƒãªã„ã¨ã„ã‘ãªã„ï¼Œã¨ã„ã†ã“ã¨ã (<code>number</code> å‹ã¯åŠ ç®—ã‚„ä¹—ç®—ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹å¤šç›¸å‹)ï¼</p>
<p>è¨€ã‚ã‚ŒãŸé€šã‚Šã«å¤‰ãˆã¦ã¿ã‚ˆã†ï¼</p>
<pre class="elm"><code>sum : List number -&gt; Int
sum list = ...</code></pre>
<p>ãƒ“ãƒ«ãƒ‰ã™ã‚‹ï¼</p>
<pre><code>$ mix test
...
Type Checking elm/Hello.elm
-- TYPE MISMATCH ------------------------------------------------- elm/Hello.elm

The right side of (+) is causing a type mismatch.

21|             first + sum rest
                        ^^^^^^^^
(+) is expecting the right side to be a:

    number

But the right side is:

    Int

Hint: Your type annotation uses type variable `number` which means any type of
value can flow through. Your code is saying it CANNOT be anything though! Maybe
change your type annotation to be more specific? Maybe the code has a problem?
More at:
&lt;https://github.com/elm-lang/elm-compiler/blob/0.18.0/hints/type-annotations.md&gt;

Hint: With operators like (+) I always check the left side first. If it seems
fine, I assume it is correct and check the right side. So the problem may be in
how the left and right arguments interact.

Detected errors in 1 module.
Type Check failed
** (Mix) Elchemy failed the compilation with an error</code></pre>
<p><code>(+) is expecting the right side to be a</code> ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¤‰ã‚ã£ãŸï¼ ã“ã‚Œã¯ <code>sum</code> é–¢æ•°ã®è¿”ã‚Šå€¤ã®å‹ãŒ <code>Int</code> ãªã®ã§ <code>sum rest</code> ã®å‹ã¯ <code>Int</code> ã¨æ¨è«–ã•ã‚ŒãŸãŒï¼Œ<code>first</code> ã®å‹ãŒ <code>number</code> ãªã®ã§ <code>(+)</code> æ¼”ç®—å­ã®å·¦å³ã®å‹ãŒåˆã‚ãªã„ï¼Œã¨ã„ã†ã“ã¨ã ï¼ ãªã®ã§ï¼Œ <code>sum : List Int -&gt; Int</code> ã¨ã™ã‚‹ã¨ç„¡äº‹ãƒ“ãƒ«ãƒ‰ãŒé€šã‚‹ï¼</p>
<h3 id="å¤‰æ›ã•ã‚ŒãŸ-elixir-ã‚³ãƒ¼ãƒ‰">å¤‰æ›ã•ã‚ŒãŸ Elixir ã‚³ãƒ¼ãƒ‰</h3>
<p>ã¡ãªã¿ã«ï¼Œæ¬¡ã®ã‚ˆã†ãª Elixir ã‚³ãƒ¼ãƒ‰ã«å¤‰æ›ã•ã‚Œã¦ã„ã‚‹ï¼</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode elixir"><code class="sourceCode elixir"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">defmodule</span> <span class="cn">Hello</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">  <span class="im">use</span> <span class="cn">Elchemy</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3">  <span class="op">...</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4">  <span class="ot">@spec</span> sum(list(integer)) :: integer</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">  curry sum<span class="op">/</span><span class="dv">1</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6">  <span class="kw">def</span> sum(list) <span class="kw">do</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7">    <span class="kw">case</span> list <span class="kw">do</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8">      [first <span class="op">|</span> rest] <span class="op">-&gt;</span></a>
<a class="sourceLine" id="cb13-9" data-line-number="9">        (first <span class="op">+</span> sum(rest))</a>
<a class="sourceLine" id="cb13-10" data-line-number="10">      [] <span class="op">-&gt;</span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11">        <span class="dv">0</span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12">    <span class="kw">end</span></a>
<a class="sourceLine" id="cb13-13" data-line-number="13">  <span class="kw">end</span></a>
<a class="sourceLine" id="cb13-14" data-line-number="14"><span class="kw">end</span></a></code></pre></div>
<h3 id="doctest">doctest</h3>
<p>ã¾ãŸï¼Œæ¬¡ã®ã‚ˆã†ã«æ›¸ãã“ã¨ã§ doctest ã‚‚å¤‰æ›ã—ã¦ãã‚Œã‚‹ï¼</p>
<pre class="elm"><code>{-| Returns a sum of every integer int the function

    sum [1,2,3] == 6
    sum [10] == 10
    sum [] == 0

-}
sum : List Int -&gt; Int
sum list = ...</code></pre>
<p>å¤‰æ›å…ˆã¯ã“ã†ã ï¼</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode elixir"><code class="sourceCode elixir"><a class="sourceLine" id="cb15-1" data-line-number="1">  <span class="ot">@doc &quot;&quot;&quot;</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="co">  Returns a sum of every integer int the function</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co">      iex&gt; import Hello</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co">      iex&gt; sum([1, 2, 3])</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="co">      6</span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="co">      iex&gt; import Hello</span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="co">      iex&gt; sum([10])</span></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="co">      10</span></a>
<a class="sourceLine" id="cb15-11" data-line-number="11"></a>
<a class="sourceLine" id="cb15-12" data-line-number="12"><span class="co">      iex&gt; import Hello</span></a>
<a class="sourceLine" id="cb15-13" data-line-number="13"><span class="co">      iex&gt; sum([])</span></a>
<a class="sourceLine" id="cb15-14" data-line-number="14"><span class="co">      0</span></a>
<a class="sourceLine" id="cb15-15" data-line-number="15"></a>
<a class="sourceLine" id="cb15-16" data-line-number="16"></a>
<a class="sourceLine" id="cb15-17" data-line-number="17"><span class="co">  </span><span class="ot">&quot;&quot;&quot;</span></a>
<a class="sourceLine" id="cb15-18" data-line-number="18">  <span class="ot">@spec</span> sum(list(integer)) :: integer</a>
<a class="sourceLine" id="cb15-19" data-line-number="19">  curry sum<span class="op">/</span><span class="dv">1</span></a>
<a class="sourceLine" id="cb15-20" data-line-number="20">  <span class="kw">def</span> sum(list) <span class="kw">do</span></a>
<a class="sourceLine" id="cb15-21" data-line-number="21">    <span class="op">...</span></a></code></pre></div>
<h2 id="ãŠã—ã¾ã„">ãŠã—ã¾ã„</h2>
<p>æ¬¡ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚ŠãŸã„ï¼</p>
  </div>
</div>
</article>
]]></summary>
</entry>
<entry>
    <title>Haskell ã§å‹å®‰å…¨ã« YAML ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ“ãƒ«ãƒ‰æ™‚ã«åŸ‹ã‚è¾¼ã‚€</title>
    <link href="https://matsubara0507.github.io/posts/2018-05-13-yaml-th.html" />
    <id>https://matsubara0507.github.io/posts/2018-05-13-yaml-th.html</id>
    <published>2018-05-13T00:00:00Z</published>
    <updated>2018-05-13T00:00:00Z</updated>
    <summary type="html"><![CDATA[<article class="post card" itemscope itemtype="http://schema.org/BlogPosting">
 <div class="card-content">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Haskell ã§å‹å®‰å…¨ã« YAML ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ“ãƒ«ãƒ‰æ™‚ã«åŸ‹ã‚è¾¼ã‚€</h1>
    <p class="post-meta">
      <time datetime="2018-05-13" itemprop="datePublished">
        May 13, 2018
      </time>
      
      
      <div class="tags">
          <i class="fa fa-tags"></i> <a href="/tags/Haskell.html">Haskell</a> <a href="/tags/extensible-package.html">extensible-package</a>
      </div>
      
    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>ã‚¶ãƒƒã‚¯ãƒªè¨€ãˆã°ã€Œ<a href="https://ryota-ka.hatenablog.com/entry/2018/02/14/103000">Template Haskell ã§ã‚³ãƒ¼ãƒ‰ä¸­ã« JSON ã‚’åŸ‹ã‚è¾¼ã‚“ã ã‚Šã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å‹å®‰å…¨ã«èª­ã¿è¾¼ã‚“ã ã‚Šã™ã‚‹ - ryota-kaâ€™s blog</a>ã€ã¨ã„ã†è¨˜äº‹ã® YAML ç‰ˆã§ã™ï¼</p>
<p>ãŸã ã—ï¼Œryota ã•ã‚“ã®è¨˜äº‹ã§ã¯ Template Haskell ã‚’è§£èª¬ã—ãªãŒã‚‰ JSON ã‚’èª­ã¿è¾¼ã‚€é–¢æ•°ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ãŒï¼Œ YAML ç‰ˆã¯ <a href="https://hackage.haskell.org/package/yaml">yaml</a> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«åŒæ§˜ã®é–¢æ•°ãŒæ—¢ã«ã‚ã‚‹ã®ã§ç‰¹ã«è§£èª¬ã¯ã—ã¾ã›ã‚“ï¼ ã‚ãã¾ã§ã‚‚ Haskell ã®å‹ã‚·ã‚¹ãƒ†ãƒ ã¨ãƒ¡ã‚¿ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’æ„Ÿã˜ã¦ã‚‚ã‚‰ãˆãŸã‚‰ãªãã¨ï¼</p>
<h2 id="section"></h2>
<p>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯å…¨ã¦ã“ã®<a href="https://github.com/matsubara0507/sample-yaml-th">ãƒªãƒã‚¸ãƒˆãƒª</a>ã«ã¾ã¨ã‚ã¦ã‚ã‚‹ï¼</p>
<h1 id="yaml-ã‚’åŸ‹ã‚è¾¼ã‚€">YAML ã‚’åŸ‹ã‚è¾¼ã‚€</h1>
<p>æ¬¡ã®ã‚ˆã†ãªè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«é–¢ã™ã‚‹å‹ãŒã‚ã£ãŸã¨ã—ã¾ã™ï¼</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">data</span> <span class="dt">Config</span> <span class="fu">=</span> <span class="dt">Config</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">  {<span class="ot"> columns ::</span> <span class="dt">Int</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">  ,<span class="ot"> languageExtensions ::</span> [<span class="dt">String</span>]</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">  } <span class="kw">deriving</span> (<span class="dt">Show</span>, <span class="dt">Eq</span>)</a></code></pre></div>
<p>yaml ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ YAML ã«ãƒ‡ã‚³ãƒ¼ãƒ‰ã™ã‚‹ãŸã‚ã«ã¯ <a href="https://hackage.haskell.org/package/aeson">aeson</a> ã® <a href="https://hackage.haskell.org/package/aeson-1.3.1.1/docs/Data-Aeson.html#t:FromJSON"><code>FromJSON</code></a> å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼ <code>FromJSON</code> ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«å‡ã£ã¦ã‚‚ã—ã‚‡ã†ãŒãªã„ã®ã§ï¼Œä»Šå›ã¯ <code>Generics</code> ã‚’ä½¿ã£ã¦é©å½“ã«å®šç¾©ã™ã‚‹ï¼</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="ot">{-# LANGUAGE DeriveGeneric #-}</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">import</span> <span class="dt">GHC.Generics</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="kw">data</span> <span class="dt">Config</span> <span class="fu">=</span> <span class="dt">Config</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5">  {<span class="ot"> columns ::</span> <span class="dt">Int</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">  ,<span class="ot"> languageExtensions ::</span> [<span class="dt">String</span>]</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">  } <span class="kw">deriving</span> (<span class="dt">Show</span>, <span class="dt">Eq</span>, <span class="dt">Generic</span>)</a>
<a class="sourceLine" id="cb2-8" data-line-number="8"></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="kw">instance</span> <span class="dt">FromJSON</span> <span class="dt">Config</span></a></code></pre></div>
<p><code>Config</code> å‹ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ YAML ãƒ•ã‚¡ã‚¤ãƒ«ã§è¨˜è¿°ã—ãŸã„ã¨ã™ã‚‹ï¼</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># template/.config.yaml</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="fu">columns:</span><span class="at"> 80</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="fu">languageExtensions:</span><span class="at"> </span><span class="kw">[]</span></a></code></pre></div>
<p>ã“ã‚Œã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«åŸ‹ã‚è¾¼ã‚“ã§ã‹ã¤å‹æ¤œæŸ»ã‚‚è¡Œã„ãŸã„ï¼ ãã®ãŸã‚ã«ã¯ Template Haskell ã¨ yaml ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã® <a href="https://hackage.haskell.org/package/yaml-0.8.30/docs/Data-Yaml-TH.html#v:decodeFile"><code>Data.Yaml.TH.decodeFile</code></a> é–¢æ•°ã‚’ç”¨ã„ã‚‹ï¼</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="ot">decodeFile ::</span> (<span class="dt">Lift</span> a, <span class="dt">FromJSON</span> a) <span class="ot">=&gt;</span> FilePath <span class="ot">-&gt;</span> <span class="dt">Q</span> (<span class="dt">TExp</span> a)</a></code></pre></div>
<p><code>TExp a</code> å‹ã¨ã„ã†ã®ã¯å‹ä»˜ãã® <code>Exp</code> å‹ã‚‰ã—ã„ãŒï¼Œã¼ãã¯ã‚ã¾ã‚Šã‚ˆãåˆ†ã‹ã‚‰ãªã„ã®ã§å‰²æ„›ï¼ å‹ã‚’è¦‹ã‚Œã°ã‚ã‹ã‚‹ã‚ˆã†ã«ï¼Œ<code>Lift</code> å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã‚‚ãªã£ã¦ãªãã‚ƒã„ã‘ãªã„ï¼ <code>DerivingLift</code> è¨€èªæ‹¡å¼µã‚’ä½¿ãˆã°ç°¡å˜ã«å®šç¾©ã§ãã‚‹ï¼</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="ot">{-# LANGUAGE DeriveLift #-}</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">import</span> import <span class="dt">Language.Haskell.TH.Syntax</span> <span class="co">-- template-haskell package</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="kw">data</span> <span class="dt">Config</span> <span class="fu">=</span> <span class="dt">Config</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5">  {<span class="ot"> columns ::</span> <span class="dt">Int</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6">  ,<span class="ot"> languageExtensions ::</span> [<span class="dt">String</span>]</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">  } <span class="kw">deriving</span> (<span class="dt">Show</span>, <span class="dt">Eq</span>, <span class="dt">Generic</span>, <span class="dt">Lift</span>)</a></code></pre></div>
<p>ä½¿ã„æ–¹ã¯ç°¡å˜ã§ï¼Œæ¬¡ã®ã‚ˆã†ã«ã™ã‚Œã°ã‚ˆã„ï¼</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="ot">{-# LANGUAGE TemplateHaskell #-}</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="ot">defaultConfig ::</span> <span class="dt">Config</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4">defaultConfig <span class="fu">=</span> <span class="fu">$$</span>(decodeFile <span class="st">&quot;./template/.config.yaml&quot;</span>)</a></code></pre></div>
<p>æ³¨æ„ç‚¹ã¨ã—ã¦ï¼ŒTemplate Haskell ã®åˆ¶ç´„ã‚ˆã‚Š <code>Config</code> å‹ã®å®šç¾©ã¨ <code>defaultConfig</code> é–¢æ•°ã®å®šç¾©ã¯åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ†ã‘ãªã‘ã‚Œã°ã„ã‘ãªã„ï¼</p>
<h2 id="è©¦ã™">è©¦ã™</h2>
<pre><code>$ stack ghci
&gt;&gt; defaultConfig
Config {columns = 80, languageExtensions = []}</code></pre>
<p>è©¦ã—ã«é–“é•ãˆã¦ã¿ã‚ˆã†</p>
<pre><code>$ cat template/.config.yaml
column: 80
languageExtensions: []
$ stack build
sample-yaml-th-0.1.0.0: build (lib)
Preprocessing library for sample-yaml-th-0.1.0.0..
Building library for sample-yaml-th-0.1.0.0..
[1 of 2] Compiling Sample.Config.Internal ( src\Sample\Config\Internal.hs, .stack work\dist\5c8418a7\build\Sample\Config\Internal.o )
[2 of 2] Compiling Sample.Config    ( src\Sample\Config.hs, .stack-work\dist\5c8418a7\build\Sample\Config.o )

C:\Users\hoge\haskell\sample-yaml-th\src\Sample\Config.hs:14:20: error:
    â€¢ Aeson exception:
Error in $: key &quot;columns&quot; not present
    â€¢ In the Template Haskell splice
        $$(Y.decodeFile &quot;./template/.config.yaml&quot;)
      In the expression: $$(Y.decodeFile &quot;./template/.config.yaml&quot;)
      In an equation for â€˜defaultConfigâ€™:
          defaultConfig = $$(Y.decodeFile &quot;./template/.config.yaml&quot;)
   |
14 | defaultConfig = $$(Y.decodeFile &quot;./template/.config.yaml&quot;)
   |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</code></pre>
<h1 id="ãŠã¾ã‘-with-extensible">ãŠã¾ã‘ : with Extensible</h1>
<p>ã•ãã‚³ã‚³ã‹ã‚‰ãŒæœ¬é¡Œï¼ <a href="https://hackage.haskell.org/package/extensible">extensible</a> ã¨ã„ã†ç¥ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’ã—ã¦ã¿ã‚ˆã†ï¼ï¼</p>
<h2 id="å•é¡Œç‚¹">å•é¡Œç‚¹</h2>
<p>å¤§ã—ãŸå•é¡Œã§ã¯ãªã„ã‚“ã ã‘ã©</p>
<ol type="1">
<li>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†ã‘ãªã‘ã‚Œã°ã„ã‘ãªã„ã®ãŒæ‚²ã—ã„</li>
<li>YAML ã®ã‚­ãƒ¼ãŒã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹(<code>languageExtensions</code>)</li>
</ol>
<h2 id="extensible-ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸">extensible ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</h2>
<p>è¨€ã‚ãšã‚‚ãŒãªï¼Œæ‹¡å¼µå¯èƒ½ãªãƒ¬ã‚³ãƒ¼ãƒ‰ã‚„ãƒãƒªã‚¢ãƒ³ãƒˆã‚’æä¾›ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã ï¼ (è©³ã—ãã¯ï¼Œæœ€è¿‘æ€¥ãƒ”ãƒƒãƒã§å……å®Ÿã•ã‚Œã¦ã„ã‚‹<a href="https://wiki.hask.moe/">æ”»ç•¥Wiki</a>ã‚’èª­ã‚€ã¨ã„ã„ã‚“ã˜ã‚ƒãªã„ã‚“ã‹ãªï¼Ÿ)</p>
<p>ä¾‹ãˆã°ï¼Œã•ã£ãã‹ã‚‰ä½¿ã£ã¦ã„ã‚‹ <code>Config</code> å‹ã‚’ <code>extensible</code> ãƒ¬ã‚³ãƒ¼ãƒ‰å‹ã§æ›¸ãã¨æ¬¡ã®ã‚ˆã†ã«æ›¸ã‘ã‚‹</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="ot">{-# LANGUAGE DataKinds     #-}</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="ot">{-# LANGUAGE TypeOperators #-}</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="kw">type</span> <span class="dt">Config</span> <span class="fu">=</span> <span class="dt">Record</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5">  <span class="ch">&#39;[ &quot;root&quot; &gt;: Text</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6">   , <span class="st">&quot;path-format&quot;</span> <span class="fu">&gt;:</span> <span class="dt">Text</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7">   ]</a></code></pre></div>
<p>åœ°å‘³ã«ã†ã‚Œã—ã„ã“ã¨ã«ï¼Œextensible ã§ã‚ã‚Œã°é–¢æ•°åã§ã¯è¨±ã•ã‚Œãªã„ãƒã‚¤ãƒ•ãƒ³ãŒå«ã‚“ã ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã‚‚å®šç¾©ã§ãã‚‹ã®ã ï¼</p>
<h2 id="ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°">ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°</h2>
<p><code>Data.Yaml.TH.decodeFile</code> ã‚’ä½¿ã†ã«ã¯ <code>FromJSON</code> å‹ã‚¯ãƒ©ã‚¹ã¨ <code>Lift</code> å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã—ãªã‘ã‚Œã°ã„ã‘ãªã„ï¼ ã§ã‚‚å®‰å¿ƒã—ã¦æ¬²ã—ã„ï¼ ã©ã¡ã‚‰ã‚‚æœ€æ–°ã® extensible-0.4.9 ã§ã¯å®šç¾©æ¸ˆã¿ã (ãã—ã¦ extensible ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã¯ <code>type</code> å®£è¨€ãªã®ã§è¿½åŠ ã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å®šç¾©ã™ã‚‹å¿…è¦ã¯ç„¡ã„)ï¼</p>
<p>ãŸã ã—ï¼Œextensible-0.4.9 ã¯ã¾ã  Stackage ã® LTS ã«ã‚‚ nightly ã«ã‚‚è¿½åŠ ã•ã‚Œã¦ã„ãªã„ã®ã§ <code>stack.yaml</code> ã«è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="fu">resolver:</span><span class="at"> lts-11.9</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="fu">packages:</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="kw">-</span> .</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="fu">extra-deps:</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="kw">-</span> extensible-0.4.9</a></code></pre></div>
<p><code>Lift</code> å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯ extensible ã§å®šç¾©æ¸ˆã¿ãªã®ã§1ã¤ç›®ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†ã‘ã‚‹ã¯ã‚¯ãƒªã‚¢ãƒ¼ã ï¼ å®Ÿã¯2ã¤ã‚‚ã‚¯ãƒªã‚¢ãƒ¼ã—ã¦ã„ã‚‹ï¼ æ‹¡å¼µå¯èƒ½ãƒ¬ã‚³ãƒ¼ãƒ‰ã® <code>FromJson</code> å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯ <code>&quot;path-format&quot;</code> ã®ã‚ˆã†ãªãƒã‚¤ãƒ•ãƒ³ã‚’å«ã‚“ã æ–‡å­—åˆ—ã‚‚ãã®ã¾ã¾æ‰±ã£ã¦ãã‚Œã‚‹ï¼</p>
<p>ä»¥ä¸‹ãŒ extensible ç‰ˆã® <code>Config</code> å‹ã«å¯¾å¿œã™ã‚‹ YAML ãƒ•ã‚¡ã‚¤ãƒ«ã ï¼</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># template/.extensible-config.yaml</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="fu">columns:</span><span class="at"> 80</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="fu">language-extensions:</span><span class="at"> </span><span class="kw">[]</span></a></code></pre></div>
<p>è©¦ã—ã«å®Ÿè¡Œã—ã¦ã¿ã‚ˆã†ï¼</p>
<pre><code>$ stack ghci
&gt;&gt; Sample.Extensible.Config.defaultConfig
columns @= 80 &lt;: language-extensions @= [] &lt;: nil</code></pre>
<h2 id="ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ç½®ãæ›ãˆã‚‹">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ç½®ãæ›ãˆã‚‹</h2>
<p>æœ€å¾Œã«ç°¡å˜ãªå®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè£…ã—ã¦ã¿ã‚‹ï¼ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’ä¸ãˆã‚‹ã¨èª­ã¿ã«è¡Œãï¼Œè¶³ã‚Šãªã„éƒ¨åˆ†ã¯å…ˆã»ã©ã‹ã‚‰åŸ‹ã‚è¾¼ã‚“ã§ã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã«ç½®ãæ›ãˆã¦å‡ºåŠ›ã™ã‚‹ãƒ¢ãƒã ï¼</p>
<pre><code>$ cat &quot;./template/.example.yaml&quot;
columns: 100
$ stack exec -- pconfig &quot;./template/.example.yaml&quot;
columns @= 100 &lt;: language-extensions @= [] &lt;: nil
$ stack exec -- pconfig
columns @= 80 &lt;: language-extensions @= [] &lt;: nil</code></pre>
<p>ã‚‚ã¡ã‚ã‚“ãƒ‘ã‚¹ã«ãƒ•ã‚¡ã‚¤ãƒ«ãŒç„¡ã‘ã‚Œã°ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ¢ãƒã‚’å‡ºåŠ›ã™ã‚‹ã ã‘ã ï¼</p>
<h2 id="section-1"></h2>
<p>ã•ã¦ã©ã†ã™ã‚Œã°è‰¯ã„ã ã‚ã†ã‹ï¼Ÿ ä¾‹ãˆã°ï¼Œ<code>FromJSON</code> å‹ã‚¯ãƒ©ã‚¹ã® <code>Meybe a</code> å‹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒç„¡ã„å ´åˆã« <code>Nothing</code> ã‚’ä¸ãˆã¦ãã‚Œã‚‹ã®ã§ï¼Œ <code>Config</code> å‹ã®å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ <code>Maybe</code> ã§ãƒ©ãƒƒãƒ—ã™ã‚‹ã¨ã„ã†ã®ã¯ã©ã†ã ã‚ã†ï¼</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw">type</span> <span class="dt">Config</span> <span class="fu">=</span> <span class="dt">Record</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2">  <span class="ch">&#39;[ &quot;root&quot; &gt;: Maybe Text</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3">   , <span class="st">&quot;path-format&quot;</span> <span class="fu">&gt;:</span> <span class="dt">Maybe</span> <span class="dt">Text</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4">   ]</a></code></pre></div>
<p>ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒ2ã¤ãªã‚‰è‰¯ã„ãŒå¤šããªã£ã¦ããŸã‚‰è¾›ãã†ã â€¦</p>
<h3 id="å¿…æ®º-nullable">å¿…æ®º Nullable</h3>
<p>å…¨ã¦ã‚’ <code>Meybe</code> ã§ãƒ©ãƒƒãƒ—ã™ã‚‹å ´åˆã¯ <a href="https://hackage.haskell.org/package/extensible-0.4.9/docs/Data-Extensible-Nullable.html"><code>Nullable</code></a> ã‚’ä½¿ã†ã¨è‰¯ã„ã ã‚ã†(ãªã„ã—ã¯ <code>RecordOf Maybe</code>)ï¼</p>
<p><code>Nullable h :* xs</code> ã‚‚æ—¢ã« <code>FromJson</code> å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ãªã£ã¦ã„ã‚‹ã®ã§ãã®ã¾ã¾ YAML ã‚’èª­ã¿è¾¼ã‚ã‚‹ï¼ ã‚ã¨ã¯æ¬¡ã®ã‚ˆã†ãªãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¨ <code>Nullable</code> ã‚’ä¸ãˆãŸã‚‰ <code>Nothing</code> ã®éƒ¨åˆ†ã ã‘ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§ç½®ãæ›ãˆãŸå€¤ã‚’è¿”ã™é–¢æ•°ã‚’å®Ÿè£…ã—ã¦ã‚„ã‚Œã°ã‚ˆã„ï¼</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="ot">fromNullable ::</span> <span class="dt">RecordOf</span> h xs <span class="ot">-&gt;</span> <span class="dt">Nullable</span> (<span class="dt">Field</span> h) <span class="fu">:*</span> xs <span class="ot">-&gt;</span> <span class="dt">RecordOf</span> h xs</a>
<a class="sourceLine" id="cb15-2" data-line-number="2">fromNullable def <span class="fu">=</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3">  hmapWithIndex <span class="fu">$</span> \m x <span class="ot">-&gt;</span> fromMaybe (hlookup m def) (getNullable x)</a></code></pre></div>
<p>extensible ãªã‚‰ã“ã†ã‚„ã£ã¦å…¨ã¦ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å¯¾ã—èµ°æŸ»ã™ã‚‹é–¢æ•°ãŒä½¿ãˆã‚‹ï¼</p>
<h2 id="section-2"></h2>
<p>ã‚ã¨ã¯ã“ã‚“ãªæ„Ÿã˜</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="ot">{-# LANGUAGE NoImplicitPrelude #-}</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="ot">{-# LANGUAGE OverloadedStrings #-}</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="ot">{-# LANGUAGE PolyKinds         #-}</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="kw">module</span> <span class="dt">Main</span> <span class="kw">where</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"></a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="kw">import</span>           <span class="dt">RIO</span></a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="kw">import</span>           <span class="dt">RIO.Directory</span>      (doesFileExist)</a>
<a class="sourceLine" id="cb16-9" data-line-number="9"></a>
<a class="sourceLine" id="cb16-10" data-line-number="10"><span class="kw">import</span>           <span class="dt">Data.Extensible</span></a>
<a class="sourceLine" id="cb16-11" data-line-number="11"><span class="kw">import</span> <span class="kw">qualified</span> <span class="dt">Data.Yaml</span>          <span class="kw">as</span> <span class="dt">Y</span></a>
<a class="sourceLine" id="cb16-12" data-line-number="12"><span class="kw">import</span>           <span class="dt">System.Environment</span> (getArgs)</a>
<a class="sourceLine" id="cb16-13" data-line-number="13"></a>
<a class="sourceLine" id="cb16-14" data-line-number="14"><span class="ot">main ::</span> <span class="dt">IO</span> ()</a>
<a class="sourceLine" id="cb16-15" data-line-number="15">main <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb16-16" data-line-number="16">  path <span class="ot">&lt;-</span> fromMaybe <span class="st">&quot;&quot;</span> <span class="fu">.</span> listToMaybe <span class="fu">&lt;$&gt;</span> getArgs</a>
<a class="sourceLine" id="cb16-17" data-line-number="17">  config <span class="ot">&lt;-</span> readConfigWith defaultConfig path</a>
<a class="sourceLine" id="cb16-18" data-line-number="18">  hPutBuilder stdout <span class="fu">$</span> encodeUtf8Builder (tshow config)</a>
<a class="sourceLine" id="cb16-19" data-line-number="19"></a>
<a class="sourceLine" id="cb16-20" data-line-number="20"><span class="ot">readConfigWith ::</span> <span class="dt">Config</span> <span class="ot">-&gt;</span> FilePath <span class="ot">-&gt;</span> <span class="dt">IO</span> <span class="dt">Config</span></a>
<a class="sourceLine" id="cb16-21" data-line-number="21">readConfigWith def path <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb16-22" data-line-number="22">  file <span class="ot">&lt;-</span> readFileBinaryWith <span class="st">&quot;&quot;</span> path</a>
<a class="sourceLine" id="cb16-23" data-line-number="23">  <span class="kw">if</span> Y.decodeEither file <span class="fu">==</span> <span class="dt">Right</span> <span class="dt">Y.Null</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb16-24" data-line-number="24">    pure def</a>
<a class="sourceLine" id="cb16-25" data-line-number="25">  <span class="kw">else</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb16-26" data-line-number="26">    config <span class="ot">&lt;-</span> either (error <span class="fu">.</span> show) pure <span class="fu">$</span> Y.decodeEither&#39; file</a>
<a class="sourceLine" id="cb16-27" data-line-number="27">    pure <span class="fu">$</span> fromNullable def config</a>
<a class="sourceLine" id="cb16-28" data-line-number="28"></a>
<a class="sourceLine" id="cb16-29" data-line-number="29"><span class="ot">readFileBinaryWith ::</span> <span class="dt">ByteString</span> <span class="ot">-&gt;</span> FilePath <span class="ot">-&gt;</span> <span class="dt">IO</span> <span class="dt">ByteString</span></a>
<a class="sourceLine" id="cb16-30" data-line-number="30">readFileBinaryWith def path <span class="fu">=</span></a>
<a class="sourceLine" id="cb16-31" data-line-number="31">  doesFileExist path <span class="fu">&gt;&gt;=</span> bool (pure def) (readFileBinary path)</a></code></pre></div>
<p>ã„ã‚ã„ã‚ã¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã®ãŒã‚ã‚“ã©ãã•ãã¦ <code>rio</code> ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ã¦ã„ã‚‹ãŒï¼Œã‚ã‚“ã¾ã‚Šæ°—ã«ã—ãªã„ã§ï¼</p>
<h1 id="ãŠã—ã¾ã„">ãŠã—ã¾ã„</h1>
<p>ã¡ãªã¿ã«ï¼Œ<a href="https://matsubara0507.github.io/posts/2018-05-10-make-cli-with-haskell-in-2018.html">å‰å›ã®è¨˜äº‹</a>ã«æ›¸ã„ãŸ <a href="https://github.com/matsubara0507/taskpad"><code>taskpad</code></a> ã«ã“ã®æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ã‚‹ï¼</p>
  </div>
</div>
</article>
]]></summary>
</entry>
<entry>
    <title>ã‚ªãƒ¬çš„ Haskell ã§ CLI ã‚’ä½œã‚‹æ–¹æ³• 2018</title>
    <link href="https://matsubara0507.github.io/posts/2018-05-10-make-cli-with-haskell-in-2018.html" />
    <id>https://matsubara0507.github.io/posts/2018-05-10-make-cli-with-haskell-in-2018.html</id>
    <published>2018-05-10T00:00:00Z</published>
    <updated>2018-05-10T00:00:00Z</updated>
    <summary type="html"><![CDATA[<article class="post card" itemscope itemtype="http://schema.org/BlogPosting">
 <div class="card-content">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">ã‚ªãƒ¬çš„ Haskell ã§ CLI ã‚’ä½œã‚‹æ–¹æ³• 2018</h1>
    <p class="post-meta">
      <time datetime="2018-05-10" itemprop="datePublished">
        May 10, 2018
      </time>
      
      
      <div class="tags">
          <i class="fa fa-tags"></i> <a href="/tags/Haskell.html">Haskell</a> <a href="/tags/extensible-package.html">extensible-package</a> <a href="/tags/rio.html">rio</a>
      </div>
      
    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>ç¾åœ¨ <a href="https://github.com/matsubara0507/taskpad">TaskPad</a> ã¨ã„ã†ç°¡æ˜“çš„ãªã‚¿ã‚¹ã‚¯ç®¡ç†(ç·¨é›†)ãƒ„ãƒ¼ãƒ«ã‚’ Haskell ã§ä½œã£ã¦ã„ã¦ï¼Œå°‘ã— CLI ã‚’ä½œã‚‹ã†ãˆã§ã®ã‚ªãƒ¬çš„ãƒã‚¦ãƒã‚¦ãŒæºœã¾ã£ãŸã®ã§ãƒ¡ãƒ¢ã£ã¨ãï¼</p>
<h2 id="taskpad">TaskPad</h2>
<p>å…ˆã«ï¼Œä½•ã‚’ä½œã£ã¦ã‚‹ã‹ã‚’æ›¸ã„ã¦ãŠãï¼ ã¾ã å®Œæˆã—ã¦ã„ãªã„ãŒï¼Œæ°—æŒã¡ã¯æ¬¡ã®ã‚ˆã†ãª Yaml ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦è‡ªèº«ã®ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚’ã—ã‚ˆã†ã‹ãªã¨è€ƒãˆã¦ã„ã‚‹ï¼</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="fu">memo:</span><span class="at"> </span><span class="kw">[]</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="fu">tasks:</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">  <span class="fu">1:</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4">    <span class="fu">done:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">    <span class="fu">children:</span><span class="at"> </span><span class="kw">[]</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6">    <span class="fu">name:</span><span class="at"> hello</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7">  <span class="fu">2:</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8">    <span class="fu">done:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9">    <span class="fu">children:</span><span class="at"> </span><span class="kw">[]</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10">    <span class="fu">name:</span><span class="at"> world</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="fu">date:</span><span class="at"> </span><span class="st">&#39;20180504&#39;</span></a></code></pre></div>
<p>ç¾çŠ¶ã§ãã¦ã„ã‚‹ CLI ã¯æ¬¡ã®ã‚ˆã†ãªæ„Ÿã˜</p>
<pre><code>$ taskpad --help
taskpad - operate daily tasks

Usage: taskpad [-v|--verbose] [-d|--date DATE] COMMAND [--version]

Available options:
  -v,--verbose             Enable verbose mode: verbosity level &quot;debug&quot;
  -d,--date DATE           Task&#39;s date
  --version                Show version
  -h,--help                Show this help text

Available commands:
  new                      Create a new task file. Note: if don&#39;t use --date
                           option then use today&#39;s date.
  add                      Add Task
  done                     Done Task
  tasks                    Show Tasks</code></pre>
<p><code>taskpad new</code> ã§ Yaml ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ï¼Œ<code>taskpad add &quot;hoge&quot;</code> â€œhogeâ€ ã¨ã„ã†ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ã—ï¼Œ<code>taskpad done 1</code> ã§1ç•ªç›®ã®ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã—ãŸã“ã¨ã«ã—ï¼Œ<code>taskpad tasks</code> ã§ã‚¿ã‚¹ã‚¯ã®ä¸€è¦§ã‚’å‡ºåŠ›ã™ã‚‹ï¼</p>
<h2 id="ãƒã‚¦ãƒã‚¦">ãƒã‚¦ãƒã‚¦ï¼Ÿ</h2>
<p>ãŸã¶ã‚“ä»–ã§ã¯ã‚ã‚“ã¾ã‚Šæ›¸ã„ã¦ãªã„ï¼Œã„ãã¤ã‹ã®ã“ã¨ã‚’æ›¸ã„ã¦ãŠãï¼</p>
<ul>
<li>optparse-applicative + extensible ã‚’ä½¿ã£ãŸ CLI ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒ‘ãƒ¼ã‚µãƒ¼
<ul>
<li>ç‰¹ã«ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã‚’ãƒãƒªã‚¢ãƒ³ãƒˆã§è¡¨ç¾ã—ã¦ã„ã‚‹ã®ãŒé¢ç™½ã„</li>
</ul></li>
<li>optparse-applicative ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¡¨ç¤º</li>
<li>ãƒãƒªã‚¢ãƒ³ãƒˆã¨å‹ã‚¯ãƒ©ã‚¹ã‚’ç”¨ã„ãŸåˆ†å²</li>
<li>rio + extensible ã§å¤§åŸŸå¤‰æ•°</li>
<li>rio ã‚’ç”¨ã„ã¦ãƒ­ã‚®ãƒ³ã‚°</li>
</ul>
<p>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒ‘ãƒ¼ã‚µãƒ¼ã« <a href="https://hackage.haskell.org/package/optparse-applicative">optparse-applicative</a> ã‚’ç”¨ã„ã¦ã„ã‚‹ï¼ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒ‘ãƒ¼ã‚µãƒ¼ã«ã¯ <a href="https://hackage.haskell.org/package/optparse-simple">optparse-simple</a> ã‚„ <a href="https://hackage.haskell.org/package/optparse-generic">optparse-generics</a> ãªã©ä»–ã«ã‚‚ã„ãã¤ã‹ã‚ã‚‹ãŒï¼Œã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã®ã‚ˆã†ãªå¤šå°‘è¾¼ã¿å…¥ã£ãŸã‚³ãƒˆã‚’ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ optparse-applicative ãŒæ¬²ã—ããªã‚‹ï¼ <a href="https://hackage.haskell.org/package/rio">rio</a> ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ï¼Œãªã‚“ã¨ãªãæœ€è¿‘ä½¿ã£ã¦ã„ã‚‹ alt. Prelude ãƒ©ã‚¤ãƒ–ãƒ©ãƒª(è©³ã—ãã¯<a href="https://github.com/commercialhaskell/rio#readme">æœ¬å®¶ã® README</a> ã‹<a href="https://matsubara0507.github.io/posts/2018-04-13-try-rio-1.html">å‰ã®åƒ•ã®è¨˜äº‹</a>ã‚’èª­ã‚“ã§)ï¼ <a href="https://hackage.haskell.org/package/extensible">extensible</a> ã¯ Haskell ã®æ®‹å¿µãªãƒ¬ã‚³ãƒ¼ãƒ‰æ§‹æ–‡ã‚„ç›´å’Œå‹ã®ä»£ã‚ã‚Šã«ï¼Œæ‹¡å¼µå¯èƒ½ãªãƒ¬ã‚³ãƒ¼ãƒ‰ãƒ»ãƒãƒªã‚¢ãƒ³ãƒˆå‹ã‚’æä¾›ã—ã¦ãã‚Œã‚‹é¢ç™½ã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã ï¼</p>
<h3 id="import-ã¨è¨€èªæ‹¡å¼µ">import ã¨è¨€èªæ‹¡å¼µ</h3>
<p>extensible ã¯ã‹ãªã‚Šè¨€èªæ‹¡å¼µã‚’ç”¨ã„ã‚‹ï¼ ä»¥é™ã§ã¯ï¼Œã‚ã‚“ã©ãã•ã„ã®ã§ <code>import</code> ã‚‚å«ã‚æ˜ç¤ºçš„ã«æ‰±ã‚ãªã„ï¼ ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ãŒå…ˆé ­ã«ãã£ã¤ã„ã¦ã‚‹ã¨ãƒ“ãƒ«ãƒ‰ã¯ã§ãã‚‹ã¯ãšã (ãŸã¶ã‚“ï¼Œè©¦ã—ã¦ãªã„)ï¼</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="ot">{-# LANGUAGE DataKinds             #-}</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="ot">{-# LANGUAGE FlexibleContexts      #-}</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="ot">{-# LANGUAGE MultiParamTypeClasses #-}</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="ot">{-# LANGUAGE OverloadedLabels      #-}</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="ot">{-# LANGUAGE TemplateHaskell       #-}</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="ot">{-# LANGUAGE TypeApplications      #-}</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="ot">{-# LANGUAGE TypeFamilies          #-}</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="ot">{-# LANGUAGE TypeOperators         #-}</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="kw">import</span>           <span class="dt">RIO</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="kw">import</span> <span class="kw">qualified</span> <span class="dt">RIO.Text</span>          <span class="kw">as</span> <span class="dt">Text</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="kw">import</span>           <span class="dt">RIO.Time</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="kw">import</span>           <span class="dt">Data.Extensible</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="kw">import</span>           <span class="dt">Data.Functor.Identity</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="kw">import</span>           <span class="dt">Data.Proxy</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="kw">import</span>           <span class="dt">GHC.TypeLits</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="kw">import</span>           <span class="dt">Options.Applicative</span></a></code></pre></div>
<h3 id="extensible-ã§-optparse-applicative">extensible ã§ optparse-applicative</h3>
<p>å°‘ã—ã ã‘ <code>optparse-applicative</code> ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ãŠãï¼ optparse-applicative ã¯ CLI ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦ä»»æ„ã®å‹ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã—ã¦ãã‚Œã‚‹ï¼ ä¸»ã«æ¬¡ã®ã‚ˆã†ã«ã—ã¦ç”¨ã„ã‚‹ï¼</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="ot">main ::</span> <span class="dt">IO</span> ()</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">main <span class="fu">=</span> run <span class="fu">=&lt;&lt;</span> execParser opts</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">  <span class="kw">where</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4">    opts <span class="fu">=</span> info (options <span class="fu">&lt;**&gt;</span> helper)</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">         <span class="fu">$</span> fullDesc</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">        <span class="fu">&lt;&gt;</span> header <span class="st">&quot;taskpad - operate daily tasks&quot;</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="ot">options ::</span> <span class="dt">Parser</span> <span class="dt">Options</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9">options <span class="fu">=</span> undefined</a></code></pre></div>
<p><a href="http://hackage.haskell.org/package/optparse-applicative-0.14.2.0/docs/Options-Applicative.html#v:execParser"><code>execParser</code></a> é–¢æ•°ã¯ <code>ParserInfo a -&gt; IO a</code> ã¨ã„ã†å‹ã‚’æŒã¤ï¼ <a href="http://hackage.haskell.org/package/optparse-applicative-0.14.2.0/docs/Options-Applicative.html#v:helper"><code>helper :: Parser (a -&gt; a)</code></a> ã¯ <code>--help</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä¸ãˆã¦ãã‚Œã‚‹é–¢æ•°ã ï¼ <code>info</code> é–¢æ•°ã¨ <code>fullDesc</code> ã‚„ <code>header</code> ã«ã‚ˆã‚Šï¼Œ<code>Parser a</code> å‹ã®ãƒ‘ãƒ¼ã‚µãƒ¼ã«å¯¾ã— <code>--help</code> ã§å‡ºåŠ›ã™ã‚‹æƒ…å ±ã‚’è¿½åŠ ã—ã¦ <code>ParserInfo a</code> å‹ã«å¤‰æ›ã™ã‚‹ï¼</p>
<h4 id="å‹ã®å®šç¾©">å‹ã®å®šç¾©</h4>
<p><code>extensible</code> ã§ <code>optparse-applicative</code> ã‚’ä½¿ã†ã¨ã¯å³ã¡ï¼Œä»»æ„ã®å‹ï¼Œã“ã“ã§ã„ã† <code>Options</code> å‹ãŒæ‹¡å¼µå¯èƒ½ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚„æ‹¡å¼µå¯èƒ½ãƒãƒªã‚¢ãƒ³ãƒˆã§ã‚ã‚‹ã¨ã„ã†ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã ï¼ ä»Šå›ã¯ <code>Options</code> å‹ã‚’ã¾ãšã¯æ¬¡ã®ã‚ˆã†ã«å®šç¾©ã—ãŸï¼</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">type</span> <span class="dt">Options</span> <span class="fu">=</span> <span class="dt">Record</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">  <span class="ch">&#39;[ &quot;verbose&quot; &gt;: Bool</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">   , <span class="st">&quot;date&quot;</span>    <span class="fu">&gt;:</span> <span class="dt">Maybe</span> <span class="dt">Date</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">   , <span class="st">&quot;subcmd&quot;</span>  <span class="fu">&gt;:</span> <span class="dt">SubCmd</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5">   ]</a>
<a class="sourceLine" id="cb5-6" data-line-number="6"></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="kw">type</span> <span class="dt">SubCmd</span> <span class="fu">=</span> <span class="dt">Variant</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8">  <span class="ch">&#39;[ &quot;new&quot;   &gt;: ()</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9">   , <span class="st">&quot;add&quot;</span>   <span class="fu">&gt;:</span> <span class="dt">Text</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10">   , <span class="st">&quot;done&quot;</span>  <span class="fu">&gt;:</span> <span class="dt">Int</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11">   , <span class="st">&quot;tasks&quot;</span> <span class="fu">&gt;:</span> ()</a>
<a class="sourceLine" id="cb5-12" data-line-number="12">   ]</a>
<a class="sourceLine" id="cb5-13" data-line-number="13"></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="kw">type</span> <span class="dt">Date</span> <span class="fu">=</span> <span class="dt">Text</span></a></code></pre></div>
<p><code>SubCmd</code> å‹ãŒæ‹¡å¼µå¯èƒ½ãªãƒãƒªã‚¢ãƒ³ãƒˆå‹ã ï¼ ã¡ãªã¿ã«ï¼ŒHaskell ã®ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ãªä»£æ•°å‹ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã§è¨˜è¿°ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ï¼</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">data</span> <span class="dt">Options</span> <span class="fu">=</span> <span class="dt">Options</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">  {<span class="ot"> verbose ::</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3">  ,<span class="ot"> date    ::</span> <span class="dt">Maybe</span> <span class="dt">Date</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4">  ,<span class="ot"> subcmd  ::</span> <span class="dt">SubCmd</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5">  }</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="kw">data</span> <span class="dt">SubCmd</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8">  <span class="fu">=</span> <span class="dt">New</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9">  <span class="fu">|</span> <span class="dt">Add</span> <span class="dt">Text</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10">  <span class="fu">|</span> <span class="dt">Done</span> <span class="dt">Int</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11">  <span class="fu">|</span> <span class="dt">Tasks</span></a></code></pre></div>
<p>è‡ªåˆ†çš„ã«ï¼Œextensible ã‚’ä½¿ã†åˆ©ç‚¹ã¯3ã¤ã‚ã‚‹ï¼</p>
<ol type="1">
<li>ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã¨é–¢æ•°åã®åå‰ç©ºé–“ãŒåˆ¥ãªã®ã§è¡çªãŒç„¡ã„</li>
<li><code>type</code> å®£è¨€ã«ã‚ˆã‚Šãƒ¬ã‚³ãƒ¼ãƒ‰ã«å¯¾ã—ã„ã¡ã„ã¡å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å®šç¾©ã™ã‚‹å¿…è¦ãŒç„¡ã„(æ—¢ã«ã‚ã‚‹ã‚‚ã®ã¯)</li>
<li>å‹ãƒ¬ãƒ™ãƒ«ãƒªã‚¹ãƒˆã«ã‚ˆã£ã¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å…¨ä½“ã«å¯¾ã™ã‚‹èµ°æŸ»ã‚’è¡Œãˆã‚‹</li>
</ol>
<p>é€†ã«ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã¯ï¼Œ(2) ã«ã‚‚é–¢ä¿‚ã™ã‚‹ã®ã ãŒï¼Œ<code>type</code> å®£è¨€ã®ãŸã‚ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®å®šç¾©ãŒè¡çªã™ã‚‹ã“ã¨ãŒã—ã°ã—ã°ã‚ã‚‹(ã“ã‚Œã¯ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã§ããªã„ã¨ã„ã† Haskell å…¨ä½“ã§ã®å•é¡Œã§ã‚‚ã‚ã‚‹)ï¼</p>
<h4 id="æ‹¡å¼µå¯èƒ½ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ãƒ‘ãƒ¼ã‚µãƒ¼">æ‹¡å¼µå¯èƒ½ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ãƒ‘ãƒ¼ã‚µãƒ¼</h4>
<p>ã¾ãšã¯æ‹¡å¼µå¯èƒ½ãƒ¬ã‚³ãƒ¼ãƒ‰(<code>Options</code> å‹)ã®ãƒ‘ãƒ¼ã‚µãƒ¼ã‚’æ›¸ã„ã¦ã¿ã‚‹ï¼ ãƒãƒªã‚¢ãƒ³ãƒˆ(<code>SubCmd</code> å‹)ã®ã¯ <code>undefined</code> ã¨ã—ã¦ãŠã“ã†ï¼ ç´°ã‹ã„ <code>optparse-applicative</code> ã®æ§‹æ–‡ã¯å‰²æ„›ã™ã‚‹ï¼</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="ot">options ::</span> <span class="dt">Parser</span> <span class="dt">Options</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">options <span class="fu">=</span> hsequence</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">    <span class="fu">$</span> <span class="fu">#</span>verbose <span class="fu">&lt;@=&gt;</span> switch (long <span class="st">&quot;verbose&quot;</span> <span class="fu">&lt;&gt;</span> short <span class="ch">&#39;v&#39;</span> <span class="fu">&lt;&gt;</span> help <span class="st">&quot;Enable verbose mode: verbosity level \&quot;debug\&quot;&quot;</span>)</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">   <span class="fu">&lt;:</span> <span class="fu">#</span>date    <span class="fu">&lt;@=&gt;</span> optional (strOption (long <span class="st">&quot;date&quot;</span> <span class="fu">&lt;&gt;</span> short <span class="ch">&#39;d&#39;</span> <span class="fu">&lt;&gt;</span> metavar <span class="st">&quot;DATE&quot;</span> <span class="fu">&lt;&gt;</span> help <span class="st">&quot;Task&#39;s date&quot;</span>))</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">   <span class="fu">&lt;:</span> <span class="fu">#</span>subcmd  <span class="fu">&lt;@=&gt;</span> subcmdParser</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">   <span class="fu">&lt;:</span> nil</a>
<a class="sourceLine" id="cb7-7" data-line-number="7"></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="ot">subcmdParser ::</span> <span class="dt">Parser</span> <span class="dt">SubCmd</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9">subcmdParser <span class="fu">=</span> undefined</a></code></pre></div>
<p>æ‹¡å¼µå¯èƒ½ãƒ¬ã‚³ãƒ¼ãƒ‰ã®å€¤ã‚’æ§‹ç¯‰ã™ã‚‹ã«ã¯ <code>#fieldName @= fieldValue</code> ã¨ã„ã†ã® <code>&lt;:</code> ã§ç›´åˆ—ã«ã¤ãªã„ã§ã„ã(ç´°ã‹ãã¯ extensible ã®è§£èª¬è¨˜äº‹ã‚’èª­ã‚“ã§)ï¼ <code>&lt;@=&gt;</code> æ¼”ç®—å­ã¯ãƒ¢ãƒŠãƒ‰ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ã‚’æŒã¡ä¸Šã’ã¦ãã‚Œã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã® <code>@=</code> æ¼”ç®—å­ã ï¼ <code>$</code> ã®å³å´ã¯ï¼Œæ­£ç¢ºã«ã¯é•ã†ãŒï¼Œæ¬¡ã®å‹ã®ã‚ˆã†ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ãªã‚‹ï¼</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="ch">&#39;[ Parser (&quot;verbose&quot; &gt;: Bool)</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"> , <span class="dt">Parser</span> (<span class="st">&quot;date&quot;</span>    <span class="fu">&gt;:</span> <span class="dt">Maybe</span> <span class="dt">Date</span>)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"> , <span class="dt">Parser</span> (<span class="st">&quot;subcmd&quot;</span>  <span class="fu">&gt;:</span> <span class="dt">SubCmd</span>)</a>
<a class="sourceLine" id="cb8-4" data-line-number="4"> ]</a></code></pre></div>
<p>Haskeller ã£ã§ã‚ã‚Œã°ï¼Œå¾Œã¯ãƒªã‚¹ãƒˆå‹ã§è¨€ã† <code>sequence</code> ã§ãã‚Œã°è‰¯ã•ãã†ã¨ã‚ã‹ã‚‹ã ã‚ã†ï¼ ãã®å‹ãƒ¬ãƒ™ãƒ«ãƒªã‚¹ãƒˆç‰ˆãŒ <code>hsequence</code> ã ï¼</p>
<h4 id="æ‹¡å¼µå¯èƒ½ãƒãƒªã‚¢ãƒ³ãƒˆã®ãƒ‘ãƒ¼ã‚µãƒ¼">æ‹¡å¼µå¯èƒ½ãƒãƒªã‚¢ãƒ³ãƒˆã®ãƒ‘ãƒ¼ã‚µãƒ¼</h4>
<p>ã•ã¦ï¼Œä»Šå›ã®è‡ªåˆ†çš„ãªãƒ¡ã‚¤ãƒ³ãƒ‡ã‚£ãƒƒã‚·ãƒ¥ã ï¼ ä»®ã«é€šå¸¸ã®ç›´å’Œå‹ã§ã‚ã‚Œã°æ¬¡ã®ã‚ˆã†ã«æ›¸ãã ã‚ã†ï¼</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="ot">subcmdParser ::</span> <span class="dt">Parser</span> <span class="dt">SubCmd</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">subcmdParser <span class="fu">=</span> subparser</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">    <span class="fu">$</span> command <span class="st">&quot;new&quot;</span>   (pure <span class="dt">New</span> <span class="ot">`withInfo`</span> <span class="st">&quot;...&quot;</span>)</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">   <span class="fu">&lt;&gt;</span> command <span class="st">&quot;add&quot;</span>   (<span class="dt">Add</span> <span class="fu">&lt;$&gt;</span> strArgument (metavar <span class="st">&quot;TEXT&quot;</span>) <span class="ot">`withInfo`</span> <span class="st">&quot;...&quot;</span>)</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">   <span class="fu">&lt;&gt;</span> command <span class="st">&quot;done&quot;</span>  (<span class="dt">Done</span> <span class="fu">&lt;$&gt;</span> argument auto (metavar <span class="st">&quot;ID&quot;</span>) <span class="ot">`withInfo`</span> <span class="st">&quot;...&quot;</span>)</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">   <span class="fu">&lt;&gt;</span> command <span class="st">&quot;tasks&quot;</span> (pure <span class="dt">Tasks</span> <span class="ot">`withInfo`</span> <span class="st">&quot;...&quot;</span>)</a>
<a class="sourceLine" id="cb9-7" data-line-number="7"></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="ot">withInfo ::</span> <span class="dt">Parser</span> a <span class="ot">-&gt;</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">ParserInfo</span> a</a>
<a class="sourceLine" id="cb9-9" data-line-number="9">withInfo opts <span class="fu">=</span> info (helper <span class="fu">&lt;*&gt;</span> opts) <span class="fu">.</span> progDesc</a></code></pre></div>
<p>ã“ã®ç¨‹åº¦ã®ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ãªã‚‰ãã“ã¾ã§è¤‡é›‘ã˜ã‚ƒãªãæ›¸ã‘ãŸï¼ ã—ã‹ã—æ‚²ã—ã„ã“ã¨ã«ï¼Œä¾‹ãˆã° <code>command &quot;tasks&quot;</code> ã®è¡ŒãŒç„¡ãã¦ã‚‚ãƒ“ãƒ«ãƒ‰ã¯é€šã‚‹ï¼ å³ã¡ï¼Œ<strong>ç›´å’Œå‹ã«å¯¾ã—ç¶²ç¾…æ€§ã‚’å‹æ¤œæŸ»ã§ä¿è¨¼ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ãªã„</strong>ï¼</p>
<h2 id="section"></h2>
<p>å¯¾ã—ã¦ extensible ã®ãƒãƒªã‚¢ãƒ³ãƒˆãªã‚‰ã©ã†ã ã‚ã†ã‹ï¼ ç†æƒ³çš„ã«ã¯ãƒãƒªã‚¢ãƒ³ãƒˆã¨åŒã˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æŒã¤ãƒ¬ã‚³ãƒ¼ãƒ‰ã®å„è¦ç´ ãŒ <code>ParserInfo a</code> ã§ã‚ã‚‹ã‚ˆã†ãªå€¤ã‹ã‚‰è‡ªå‹•ã§å°å‡ºã—ã¦ãã‚Œã‚‹ã¨è‰¯ã„ï¼ ã¤ã¾ã‚Šæ¬¡ã®ã‚ˆã†ã«æ‰±ã„ãŸã„ï¼</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="ot">subcmdParser ::</span> <span class="dt">Parser</span> <span class="dt">SubCmd</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2">subcmdParser <span class="fu">=</span> variantFrom</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">    <span class="fu">$</span> <span class="fu">#</span>new   <span class="fu">@=</span> (pure () <span class="ot">`withInfo`</span> <span class="st">&quot;Create a new task file. Note: if don&#39;t use --date option then use today&#39;s date.&quot;</span>)</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">   <span class="fu">&lt;:</span> <span class="fu">#</span>add   <span class="fu">@=</span> (strArgument (metavar <span class="st">&quot;TEXT&quot;</span> <span class="fu">&lt;&gt;</span> help <span class="st">&quot;Task contents&quot;</span>) <span class="ot">`withInfo`</span> <span class="st">&quot;Add Task&quot;</span>)</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">   <span class="fu">&lt;:</span> <span class="fu">#</span>done  <span class="fu">@=</span> (argument auto (metavar <span class="st">&quot;ID&quot;</span> <span class="fu">&lt;&gt;</span> help <span class="st">&quot;Done task from id&quot;</span>) <span class="ot">`withInfo`</span> <span class="st">&quot;Done Task&quot;</span>)</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">   <span class="fu">&lt;:</span> <span class="fu">#</span>tasks <span class="fu">@=</span> (pure () <span class="ot">`withInfo`</span> <span class="st">&quot;Show Tasks&quot;</span>)</a>
<a class="sourceLine" id="cb10-7" data-line-number="7">   <span class="fu">&lt;:</span> nil</a>
<a class="sourceLine" id="cb10-8" data-line-number="8"></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="ot">variantFrom ::</span> <span class="dt">RecordOf</span> <span class="dt">ParserInfo</span> xs <span class="ot">-&gt;</span> <span class="dt">Parser</span> (<span class="dt">Variant</span> xs)</a>
<a class="sourceLine" id="cb10-10" data-line-number="10">variantFrom <span class="fu">=</span> undefined</a>
<a class="sourceLine" id="cb10-11" data-line-number="11"></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="kw">instance</span> <span class="dt">Wrapper</span> <span class="dt">ParserInfo</span> <span class="kw">where</span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13">  <span class="kw">type</span> <span class="dt">Repr</span> <span class="dt">ParserInfo</span> a <span class="fu">=</span> <span class="dt">ParserInfo</span> a</a>
<a class="sourceLine" id="cb10-14" data-line-number="14">  _Wrapper <span class="fu">=</span> id</a></code></pre></div>
<p><code>@=</code> ã¨ <code>&lt;:</code> ã§æ§‹ç¯‰ã—ãŸãƒ¬ã‚³ãƒ¼ãƒ‰ãŒ <code>Record = RecordOf Identity</code> ã§ã¯ãªãï¼Œ<code>RecordOf h</code> ã§ã‚ã‚‹ãŸã‚ã«ã¯ <code>h</code> ãŒ <a href="https://hackage.haskell.org/package/extensible-0.4.8/docs/Data-Extensible-Wrapper.html#t:Wrapper"><code>Wrapper</code></a> å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹(ã¨ã„ã†ã‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚Šã•ãˆã™ã‚Œã°è‰¯ã„)ï¼</p>
<h2 id="section-1"></h2>
<p>ã•ã¦ã‚­ãƒ¢ã¯ <code>variantFrom</code> ã ï¼ é€šå¸¸ã®ç›´å’Œå‹ç‰ˆã® <code>subcmdParser</code> é–¢æ•°ã‚’è¦‹ã‚Œã°ã‚ã‹ã‚‹ã‚ˆã†ã«ï¼Œ<code>command</code> é–¢æ•°ã§ä½œæˆã—ãŸå€¤ã‚’ãƒ¢ãƒã‚¤ãƒ‰ã§ç•³ã¿è¾¼ã‚ã°ã„ã„ã®ã§ï¼ŒãŠå¯Ÿã—ã®é€šã‚Š(??) <a href="https://hackage.haskell.org/package/extensible-0.4.8/docs/Data-Extensible-Product.html#v:hfoldMap"><code>hfoldMap</code></a> ã‚’ä½¿ã†ï¼ ã¤ã„ã§ã« <code>command</code> ã®ä¸€å¼•æ•°ç›®ã«æ¸¡ã™ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã®æ–‡å­—åˆ—ã¯ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã‹ã‚‰å–å¾—ã™ã‚‹ã‚ˆã†ã«ã—ã‚ˆã†ï¼ ã“ã®å ´åˆï¼Œã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨ <code>KnownSymbol</code> åˆ¶ç´„ã‚’æ¸¡ã™å¿…è¦ãŒã‚ã‚‹ã®ã§ <code>hfoldMap</code> ã®ä»£ã‚ã‚Šã« <code>hfoldMapWithIndexFor</code> é–¢æ•°ã‚’ä½¿ã†ï¼</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="ot">variantFrom ::</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">  <span class="dt">Forall</span> (<span class="dt">KeyIs</span> <span class="dt">KnownSymbol</span>) xs <span class="ot">=&gt;</span> <span class="dt">RecordOf</span> <span class="dt">ParserInfo</span> xs <span class="ot">-&gt;</span> <span class="dt">Parser</span> (<span class="dt">Variant</span> xs)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">variantFrom <span class="fu">=</span> subparser <span class="fu">.</span> subcmdVariant</a>
<a class="sourceLine" id="cb11-4" data-line-number="4">  <span class="kw">where</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5">    subcmdVariant <span class="fu">=</span> hfoldMapWithIndexFor (<span class="dt">Proxy</span> <span class="fu">@</span> (<span class="dt">KeyIs</span> <span class="dt">KnownSymbol</span>)) <span class="fu">$</span> \m x <span class="ot">-&gt;</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6">      <span class="kw">let</span> k <span class="fu">=</span> symbolVal (proxyAssocKey m)</a>
<a class="sourceLine" id="cb11-7" data-line-number="7">      <span class="kw">in</span> command k ((<span class="dt">EmbedAt</span> m <span class="fu">.</span> <span class="dt">Field</span> <span class="fu">.</span> pure) <span class="fu">&lt;$&gt;</span> getField x)</a></code></pre></div>
<p>çµæœã¨ã—ã¦ï¼Œ<strong>extensible ã®ãƒãƒªã‚¢ãƒ³ãƒˆç‰ˆã¯ç¶²ç¾…æ€§ã‚’å‹æ¤œæŸ»ã«ã‚ˆã£ã¦æ¤œè¨¼ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸï¼</strong></p>
<h3 id="ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®è¡¨ç¤º">ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®è¡¨ç¤º</h3>
<p>ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®è¡¨ç¤ºã¯ä»–ã®ã‚³ãƒãƒ³ãƒ‰ã¨é•ã„ï¼Œã‚³ãƒãƒ³ãƒ‰ãŒé–“é•ã£ã¦(ä¾‹ãˆã°ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ãŒç„¡ã„)ã„ã¦ã‚‚ <code>--version</code> ã¨ã„ã†å¼•æ•°ã•ãˆã‚ã‚Œã°å„ªå…ˆçš„ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼ ãã®ã‚ˆã†ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹å ´åˆã«ã¯ <a href="http://hackage.haskell.org/package/optparse-applicative-0.14.2.0/docs/Options-Applicative.html#v:infoOption"><code>infoOption</code></a> é–¢æ•°ã‚’ä½¿ã†ï¼</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw">import</span> <span class="kw">qualified</span> <span class="dt">Paths_taskpad</span>       <span class="kw">as</span> <span class="dt">Meta</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw">import</span>           <span class="dt">Data.Version</span>        (<span class="dt">Version</span>)</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="kw">import</span> <span class="kw">qualified</span> <span class="dt">Data.Version</span>        <span class="kw">as</span> <span class="dt">Version</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="kw">import</span>           <span class="dt">Development.GitRev</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="ot">main ::</span> <span class="dt">IO</span> ()</a>
<a class="sourceLine" id="cb12-7" data-line-number="7">main <span class="fu">=</span> run <span class="fu">=&lt;&lt;</span> execParser opts</a>
<a class="sourceLine" id="cb12-8" data-line-number="8">  <span class="kw">where</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9">    opts <span class="fu">=</span> info (options <span class="fu">&lt;**&gt;</span> version Meta.version <span class="fu">&lt;**&gt;</span> helper)</a>
<a class="sourceLine" id="cb12-10" data-line-number="10">         <span class="fu">$</span> <span class="fu">...</span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="ot">version ::</span> <span class="dt">Version</span> <span class="ot">-&gt;</span> <span class="dt">Parser</span> (a <span class="ot">-&gt;</span> a)</a>
<a class="sourceLine" id="cb12-13" data-line-number="13">version v <span class="fu">=</span> infoOption (showVersion v)</a>
<a class="sourceLine" id="cb12-14" data-line-number="14">    <span class="fu">$</span> long <span class="st">&quot;version&quot;</span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15">   <span class="fu">&lt;&gt;</span> help <span class="st">&quot;Show version&quot;</span></a>
<a class="sourceLine" id="cb12-16" data-line-number="16"></a>
<a class="sourceLine" id="cb12-17" data-line-number="17"><span class="ot">showVersion ::</span> <span class="dt">Version</span> <span class="ot">-&gt;</span> <span class="dt">String</span></a>
<a class="sourceLine" id="cb12-18" data-line-number="18">showVersion v <span class="fu">=</span> unwords</a>
<a class="sourceLine" id="cb12-19" data-line-number="19">  [ <span class="st">&quot;Version&quot;</span></a>
<a class="sourceLine" id="cb12-20" data-line-number="20">  , Version.showVersion v <span class="fu">++</span> <span class="st">&quot;,&quot;</span></a>
<a class="sourceLine" id="cb12-21" data-line-number="21">  , <span class="st">&quot;Git revision&quot;</span></a>
<a class="sourceLine" id="cb12-22" data-line-number="22">  , <span class="fu">$</span>(gitHash)</a>
<a class="sourceLine" id="cb12-23" data-line-number="23">  , <span class="st">&quot;(&quot;</span> <span class="fu">++</span> <span class="fu">$</span>(gitCommitCount) <span class="fu">++</span> <span class="st">&quot; commits)&quot;</span></a>
<a class="sourceLine" id="cb12-24" data-line-number="24">  ]</a></code></pre></div>
<p><code>&lt;**&gt;</code> æ¼”ç®—å­ã¯ãŸã ã® <code>flip (&lt;*&gt;)</code> ã ï¼ ã¡ãªã¿ã«ï¼Œ<code>version</code> ã¨ <code>helper</code> ã®é©ç”¨é †ã‚’å…¥ã‚Œæ›¿ãˆã‚‹ã¨ <code>--help</code> ã®è¡¨ç¤ºãŒã»ã‚“ã®å°‘ã—ã ã‘å¤‰ã‚ã‚‹ï¼</p>
<h3 id="ãƒãƒªã‚¢ãƒ³ãƒˆã¨å‹ã‚¯ãƒ©ã‚¹">ãƒãƒªã‚¢ãƒ³ãƒˆã¨å‹ã‚¯ãƒ©ã‚¹</h3>
<p>ã“ã£ã‹ã‚‰ã¯ <code>run :: Options -&gt; IO ()</code> é–¢æ•°ã‚’è€ƒãˆã‚‹ï¼</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="ot">run ::</span> <span class="dt">Options</span> <span class="ot">-&gt;</span> <span class="dt">IO</span> ()</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">run opts <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3">  date <span class="ot">&lt;-</span> maybe getTodaysDate pure <span class="fu">$</span> opts <span class="fu">^.</span> <span class="fu">#</span>date</a>
<a class="sourceLine" id="cb13-4" data-line-number="4">  matchField</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">    undefined <span class="co">-- ???</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6">    (opts <span class="fu">^.</span> <span class="fu">#</span>subcmd)</a></code></pre></div>
<p><code>getTodaysDate</code> é–¢æ•°ã¯è‡ªèº«ã§å®šç¾©ã—ã¦ã„ã‚‹ã¨ã™ã‚‹ï¼ <code>--date</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ãªã‹ã£ãŸå ´åˆã«ã¯ä»Šæ—¥ã®æ—¥ä»˜ã‚’å–å¾—ã™ã‚‹ï¼ å•é¡Œã¯ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã®åˆ†å²ã ï¼</p>
<p>ãƒãƒªã‚¢ãƒ³ãƒˆã®åˆ†å²ã«ã¯ <a href="https://hackage.haskell.org/package/extensible-0.4.8/docs/Data-Extensible-Field.html#v:matchField"><code>matchField</code></a> é–¢æ•°ã‚’ç”¨ã„ã‚‹ï¼ <code>matchField</code> é–¢æ•°ã®å‹ã¯ <code>RecordOf (Match h r) xs -&gt; VariantOf h xs -&gt; r</code> ã¨ãªã‚‹ï¼ ä¸€å¼•æ•°ç›®ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã¨äºŒå¼•æ•°ç›®ã®ãƒãƒªã‚¢ãƒ³ãƒˆã® <code>xs</code> ãŒç­‰ã—ã„ã¨ã„ã†ã“ã¨ã‹ã‚‰å…±é€šã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æœŸå¾…ã—ã¦ã„ã‚‹ã®ãŒåˆ†ã‹ã‚‹ã ã‚ã†ï¼ ãƒ¬ã‚³ãƒ¼ãƒ‰å´ã®å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ï¼Œå„ãƒãƒªã‚¢ãƒ³ãƒˆã«å¯¾ã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ã‚’å—ã‘å–ã‚Š <code>r</code> å‹ã®è¿”ã‚Šå€¤ã®é–¢æ•°ã‚’è¨˜è¿°ã™ã‚‹ã¨ã„ã£ãŸå…·åˆã (ã“ã®éƒ¨åˆ†ãŒ <code>Match h r</code> ã«é›†ç´„ã•ã‚Œã¦ã„ã‚‹)ï¼</p>
<h2 id="section-2"></h2>
<p>ä»Šå›ã¯ï¼Œã“ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®æ§‹ç¯‰ã«å‹ã‚¯ãƒ©ã‚¹ã‚’ç”¨ã„ã‚‹ï¼ ä»¥ä¸‹ã®ã‚ˆã†ãªå‹ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©ã™ã‚‹ï¼</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw">class</span> <span class="dt">Run</span> kv <span class="kw">where</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="ot">  run&#39; ::</span> proxy kv <span class="ot">-&gt;</span> <span class="dt">Date</span> <span class="ot">-&gt;</span> <span class="dt">AssocValue</span> kv <span class="ot">-&gt;</span> <span class="dt">IO</span> ()</a></code></pre></div>
<p>å®Ÿè£…ã¯ç½®ã„ã¦ãŠã„ã¦ï¼Œã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä¸ãˆã¦ã¿ã‚ˆã†ï¼</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">instance</span> <span class="dt">Run</span> (<span class="st">&quot;new&quot;</span> <span class="fu">&gt;:</span> ()) <span class="kw">where</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">  run&#39; _ _ _ <span class="fu">=</span> undefined</a>
<a class="sourceLine" id="cb15-3" data-line-number="3"></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="kw">instance</span> <span class="dt">Run</span> (<span class="st">&quot;add&quot;</span> <span class="fu">&gt;:</span> <span class="dt">Text</span>) <span class="kw">where</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5">  run&#39; _ _ _ <span class="fu">=</span> undefined</a>
<a class="sourceLine" id="cb15-6" data-line-number="6"></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="kw">instance</span> <span class="dt">Run</span> (<span class="st">&quot;done&quot;</span> <span class="fu">&gt;:</span> <span class="dt">Int</span>) <span class="kw">where</span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8">  run&#39; _ _ _ <span class="fu">=</span> undefined</a>
<a class="sourceLine" id="cb15-9" data-line-number="9"></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="kw">instance</span> <span class="dt">Run</span> (<span class="st">&quot;tasks&quot;</span> <span class="fu">&gt;:</span> ()) <span class="kw">where</span></a>
<a class="sourceLine" id="cb15-11" data-line-number="11">  run&#39; _ _ _ <span class="fu">=</span> undefined</a></code></pre></div>
<p><code>run</code> é–¢æ•°ã® <code>matchField</code> é–¢æ•°ã®å¼•æ•°ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚‹ï¼</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="ot">run ::</span> <span class="dt">Options</span> <span class="ot">-&gt;</span> <span class="dt">IO</span> ()</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">run opts <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3">  date <span class="ot">&lt;-</span> maybe getTodaysDate pure <span class="fu">$</span> opts <span class="fu">^.</span> <span class="fu">#</span>date</a>
<a class="sourceLine" id="cb16-4" data-line-number="4">  matchField</a>
<a class="sourceLine" id="cb16-5" data-line-number="5">    (htabulateFor (<span class="dt">Proxy</span> <span class="fu">@</span> <span class="dt">Run</span>) <span class="fu">$</span> \m <span class="ot">-&gt;</span> <span class="dt">Field</span> (<span class="dt">Match</span> <span class="fu">$</span> run&#39; m date <span class="fu">.</span> runIdentity))</a>
<a class="sourceLine" id="cb16-6" data-line-number="6">    (opts <span class="fu">^.</span> <span class="fu">#</span>subcmd)</a></code></pre></div>
<p><code>Proxy @ Run</code> ã® <code>@</code> ã®éƒ¨åˆ†ã¯ <code>TypeApplications</code> æ‹¡å¼µã®ãƒ¢ãƒã ï¼ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ã¯ <code>Identity x</code> å‹ã¨ã—ã¦æ¥ã‚‹ã®ã§ <code>runIdentity</code> é–¢æ•°ã‚’ç”¨ã„ã¦å‰¥ãŒã—ï¼Œ<code>run' m date</code> ã¸ã¨é©ç”¨ã™ã‚‹ï¼ ã‚‚ã¡ã‚ã‚“ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’æ›¸ãå¿˜ã‚Œã¦ã„ãŸå ´åˆã¯ï¼Œã¡ã‚ƒã‚“ã¨å‹æ¤œæŸ»ã«å¼•ã£ã‹ã‹ã‚‹ï¼</p>
<h3 id="rio-ã§å¤§åŸŸå¤‰æ•°">rio ã§å¤§åŸŸå¤‰æ•°</h3>
<p><code>rio</code> ã§å¤§åŸŸå¤‰æ•°ã‚’æ‰±ã†ã«ã¯ <code>RIO env</code> ãƒ¢ãƒŠãƒ‰ã‚’ç”¨ã„ã‚‹ï¼ é©å½“ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¢ãƒŠãƒ‰ã‚’å®šç¾©ã—ã¦ã‚„ã‚ã†ï¼ ä»Šå›ã¯ã²ã¨ã¤ã—ã‹å¤§åŸŸå¤‰æ•°ãŒç„¡ã„ã®ã§ã‚ã‚“ã¾ã‚Šãƒ¡ãƒªãƒƒãƒˆã‚’æ„Ÿã˜ãªã„ã‹ã‚‚ã—ã‚Œãªã„ãŒâ€¦</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw">type</span> <span class="dt">TaskPad</span> <span class="fu">=</span> <span class="dt">RIO</span> <span class="dt">Env</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2"></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="kw">type</span> <span class="dt">Env</span> <span class="fu">=</span> <span class="dt">Record</span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4">  <span class="ch">&#39;[ &quot;date&quot; &gt;: Date</span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5">   ]</a></code></pre></div>
<p><code>run</code> é–¢æ•°ã‚‚æ›¸ãç›´ã—ã¦ã‚„ã‚‹ï¼</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="ot">run ::</span> <span class="dt">MonadUnliftIO</span> m <span class="ot">=&gt;</span> <span class="dt">Options</span> <span class="ot">-&gt;</span> m ()</a>
<a class="sourceLine" id="cb18-2" data-line-number="2">run opts <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3">  date <span class="ot">&lt;-</span> maybe getTodaysDate pure <span class="fu">$</span> opts <span class="fu">^.</span> <span class="fu">#</span>date</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">  <span class="kw">let</span> env <span class="fu">=</span> <span class="fu">#</span>date   <span class="fu">@=</span> date</a>
<a class="sourceLine" id="cb18-5" data-line-number="5">         <span class="fu">&lt;:</span> nil</a>
<a class="sourceLine" id="cb18-6" data-line-number="6">  runRIO env <span class="fu">$</span></a>
<a class="sourceLine" id="cb18-7" data-line-number="7">    matchField</a>
<a class="sourceLine" id="cb18-8" data-line-number="8">      (htabulateFor (<span class="dt">Proxy</span> <span class="fu">@</span> <span class="dt">Run</span>) <span class="fu">$</span> \m <span class="ot">-&gt;</span> <span class="dt">Field</span> (<span class="dt">Match</span> <span class="fu">$</span> run&#39; m <span class="fu">.</span> runIdentity))</a>
<a class="sourceLine" id="cb18-9" data-line-number="9">      (opts <span class="fu">^.</span> <span class="fu">#</span>subcmd)</a>
<a class="sourceLine" id="cb18-10" data-line-number="10"></a>
<a class="sourceLine" id="cb18-11" data-line-number="11"><span class="kw">class</span> <span class="dt">Run</span> kv <span class="kw">where</span></a>
<a class="sourceLine" id="cb18-12" data-line-number="12"><span class="ot">  run&#39; ::</span> proxy kv <span class="ot">-&gt;</span> <span class="dt">AssocValue</span> kv <span class="ot">-&gt;</span> <span class="dt">TaskPad</span> ()</a></code></pre></div>
<p>è©¦ã—ã« <code>new</code> ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã‚’æ›¸ã„ã¦ã¿ã‚ˆã†ï¼</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw">instance</span> <span class="dt">Run</span> (<span class="st">&quot;new&quot;</span> <span class="fu">&gt;:</span> ()) <span class="kw">where</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">  run&#39; _ _ <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb19-3" data-line-number="3">    date <span class="ot">&lt;-</span> asks (view <span class="fu">#</span>date)</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">    writeMemo <span class="fu">$</span> mkMemo date</a></code></pre></div>
<p><code>mkMemo</code> ã‚„ <code>writeMemo</code> ã«ã¤ã„ã¦ã¯æ¬¡ã®ã‚ˆã†ã«å®šç¾©ã—ã¦ã„ã‚‹ï¼ <code>Memo</code> å‹ã‚‚æ‹¡å¼µå¯èƒ½ãƒ¬ã‚³ãƒ¼ãƒ‰ã ï¼ æœ€è¿‘ã® extensible ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§æ‹¡å¼µå¯èƒ½ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒ <code>ToJson</code> å‹ã‚¯ãƒ©ã‚¹ã¨ <code>FromJson</code> å‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ãªã£ãŸã®ã§ï¼ŒYaml ã¸ã®å¤‰æ›ã¯ç‰¹ã«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’æ›¸ãã“ã¨ãªãè¡Œãˆã‚‹ã‚ˆã†ã«ãªã£ãŸï¼</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw">import</span> <span class="kw">qualified</span> <span class="dt">Data.Yaml</span> <span class="kw">as</span> <span class="dt">Y</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2"></a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="kw">type</span> <span class="dt">Memo</span> <span class="fu">=</span> <span class="dt">Record</span></a>
<a class="sourceLine" id="cb20-4" data-line-number="4">  <span class="ch">&#39;[ &quot;date&quot;  &gt;: Date</span></a>
<a class="sourceLine" id="cb20-5" data-line-number="5">   , <span class="st">&quot;tasks&quot;</span> <span class="fu">&gt;:</span> <span class="dt">Map</span> <span class="dt">Int</span> <span class="dt">Task</span></a>
<a class="sourceLine" id="cb20-6" data-line-number="6">   , <span class="st">&quot;memo&quot;</span>  <span class="fu">&gt;:</span> [<span class="dt">Text</span>]</a>
<a class="sourceLine" id="cb20-7" data-line-number="7">   ]</a>
<a class="sourceLine" id="cb20-8" data-line-number="8"></a>
<a class="sourceLine" id="cb20-9" data-line-number="9"><span class="kw">type</span> <span class="dt">Task</span> <span class="fu">=</span> <span class="dt">Record</span> (<span class="dt">TaskFields</span> <span class="fu">++</span> <span class="ch">&#39;[&quot;children&quot; &gt;: [SubTask]])</span></a>
<a class="sourceLine" id="cb20-10" data-line-number="10"><span class="kw">type</span> <span class="dt">SubTask</span> <span class="fu">=</span> <span class="dt">Record</span> <span class="dt">TaskFields</span></a>
<a class="sourceLine" id="cb20-11" data-line-number="11"></a>
<a class="sourceLine" id="cb20-12" data-line-number="12"><span class="kw">type</span> <span class="dt">TaskFields</span> <span class="fu">=</span></a>
<a class="sourceLine" id="cb20-13" data-line-number="13">  <span class="ch">&#39;[ &quot;name&quot; &gt;: Text</span></a>
<a class="sourceLine" id="cb20-14" data-line-number="14">   , <span class="st">&quot;done&quot;</span> <span class="fu">&gt;:</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb20-15" data-line-number="15">   ]</a>
<a class="sourceLine" id="cb20-16" data-line-number="16"></a>
<a class="sourceLine" id="cb20-17" data-line-number="17"><span class="ot">mkMemo ::</span> <span class="dt">Date</span> <span class="ot">-&gt;</span> <span class="dt">Memo</span></a>
<a class="sourceLine" id="cb20-18" data-line-number="18">mkMemo date</a>
<a class="sourceLine" id="cb20-19" data-line-number="19">    <span class="fu">=</span> <span class="fu">#</span>date  <span class="fu">@=</span> date</a>
<a class="sourceLine" id="cb20-20" data-line-number="20">   <span class="fu">&lt;:</span> <span class="fu">#</span>tasks <span class="fu">@=</span> mempty</a>
<a class="sourceLine" id="cb20-21" data-line-number="21">   <span class="fu">&lt;:</span> <span class="fu">#</span>memo  <span class="fu">@=</span> mempty</a>
<a class="sourceLine" id="cb20-22" data-line-number="22">   <span class="fu">&lt;:</span> nil</a>
<a class="sourceLine" id="cb20-23" data-line-number="23"></a>
<a class="sourceLine" id="cb20-24" data-line-number="24"><span class="ot">writeMemo ::</span> <span class="dt">MonadIO</span> m <span class="ot">=&gt;</span> <span class="dt">Memo</span> <span class="ot">-&gt;</span> m ()</a>
<a class="sourceLine" id="cb20-25" data-line-number="25">writeMemo memo <span class="fu">=</span></a>
<a class="sourceLine" id="cb20-26" data-line-number="26">  writeFileBinary (Text.unpack <span class="fu">$</span> memo <span class="fu">^.</span> <span class="fu">#</span>date <span class="fu">&lt;&gt;</span> <span class="st">&quot;.yaml&quot;</span>) (Y.encode memo)</a></code></pre></div>
<h3 id="rio-ã§ãƒ­ã‚®ãƒ³ã‚°">rio ã§ãƒ­ã‚®ãƒ³ã‚°</h3>
<p>ãƒ­ã‚®ãƒ³ã‚°ã¯å®Ÿç”¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é‡è¦ãªè¦ç´ ã ã‚ã†ï¼ <code>rio</code> ã§ã‚ã‚Œã°ã¾ãã¾ãç°¡å˜ã«æ›¸ã‘ã‚‹ï¼</p>
<p>ã¾ãšã¯ <code>Env</code> ã«ãƒ­ã‚®ãƒ³ã‚°ç”¨ã®é–¢æ•°ã‚’è¶³ã—ã¦ã‚„ã‚‹ï¼ <a href="https://hackage.haskell.org/package/rio-0.1.2.0/docs/RIO.html#t:LogFunc"><code>LogFunc</code></a> å‹ã‚„ <a href="https://hackage.haskell.org/package/rio-0.1.2.0/docs/RIO.html#t:HasLogFunc"><code>HasLogFunc</code></a> å‹ã‚¯ãƒ©ã‚¹ã¯ <code>rio</code> ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã ï¼</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">type</span> <span class="dt">Env</span> <span class="fu">=</span> <span class="dt">Record</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2">  <span class="ch">&#39;[ &quot;date&quot;   &gt;: Date</span></a>
<a class="sourceLine" id="cb21-3" data-line-number="3">   , <span class="st">&quot;logger&quot;</span> <span class="fu">&gt;:</span> <span class="dt">LogFunc</span></a>
<a class="sourceLine" id="cb21-4" data-line-number="4">   ]</a>
<a class="sourceLine" id="cb21-5" data-line-number="5"></a>
<a class="sourceLine" id="cb21-6" data-line-number="6"><span class="kw">instance</span> <span class="dt">HasLogFunc</span> <span class="dt">Env</span> <span class="kw">where</span></a>
<a class="sourceLine" id="cb21-7" data-line-number="7">  logFuncL <span class="fu">=</span> lens (view <span class="fu">#</span>logger) (\x y <span class="ot">-&gt;</span> x <span class="fu">&amp;</span> <span class="fu">#</span>logger <span class="ot">`set`</span> y)</a></code></pre></div>
<p>å®Ÿã¯ã“ã‚Œã ã‘ã§ <code>TaskPad</code> ãƒ¢ãƒŠãƒ‰(ã™ãªã‚ã¡ <code>RIO Env</code> ãƒ¢ãƒŠãƒ‰)ã®ä¸­ã§è‡ªç”±ã«ãƒ­ã‚®ãƒ³ã‚°é–¢æ•°ã‚’å‘¼ã¹ã‚‹ã‚ˆã†ã«ãªã‚‹ï¼ è©¦ã—ã« <code>new</code> ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã«ãƒ­ã‚®ãƒ³ã‚°ã‚’è¶³ã—ã¦ã¿ã‚ˆã†ï¼ <a href="https://hackage.haskell.org/package/rio-0.1.2.0/docs/RIO.html#v:logInfo"><code>logInfo</code></a> é–¢æ•°ãŒãƒ­ã‚®ãƒ³ã‚°é–¢æ•°ã®ã²ã¨ã¤ã ï¼</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="kw">instance</span> <span class="dt">Run</span> (<span class="st">&quot;new&quot;</span> <span class="fu">&gt;:</span> ()) <span class="kw">where</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2">  run&#39; _ _ <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb22-3" data-line-number="3">    date <span class="ot">&lt;-</span> asks (view <span class="fu">#</span>date)</a>
<a class="sourceLine" id="cb22-4" data-line-number="4">    writeMemo <span class="fu">$</span> mkMemo date</a>
<a class="sourceLine" id="cb22-5" data-line-number="5">    logInfo (display <span class="fu">$</span> <span class="st">&quot;create new task&#39;s file: &quot;</span> <span class="fu">&lt;&gt;</span> date <span class="fu">&lt;&gt;</span> <span class="st">&quot;.yaml&quot;</span>)</a></code></pre></div>
<p>ã‚ã¨ã¯ <code>run</code> é–¢æ•°ã‚’æ›¸ãæ›ãˆã‚ˆã†(<code>Env</code> å‹ã®ä¸­èº«ãŒå¤‰ã‚ã£ãŸã®ã§)ï¼</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="ot">run ::</span> <span class="dt">MonadUnliftIO</span> m <span class="ot">=&gt;</span> <span class="dt">Options</span> <span class="ot">-&gt;</span> m ()</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">run opts <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb23-3" data-line-number="3">  date    <span class="ot">&lt;-</span> maybe getTodaysDate pure <span class="fu">$</span> opts <span class="fu">^.</span> <span class="fu">#</span>date</a>
<a class="sourceLine" id="cb23-4" data-line-number="4">  logOpts <span class="ot">&lt;-</span> logOptionsHandle stdout (opts <span class="fu">^.</span> <span class="fu">#</span>verbose)</a>
<a class="sourceLine" id="cb23-5" data-line-number="5">  withLogFunc logOpts <span class="fu">$</span> \logger <span class="ot">-&gt;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb23-6" data-line-number="6">    <span class="kw">let</span> env <span class="fu">=</span> <span class="fu">#</span>date   <span class="fu">@=</span> date</a>
<a class="sourceLine" id="cb23-7" data-line-number="7">           <span class="fu">&lt;:</span> <span class="fu">#</span>logger <span class="fu">@=</span> logger</a>
<a class="sourceLine" id="cb23-8" data-line-number="8">           <span class="fu">&lt;:</span> nil</a>
<a class="sourceLine" id="cb23-9" data-line-number="9">    runRIO env <span class="fu">$</span></a>
<a class="sourceLine" id="cb23-10" data-line-number="10">      matchField</a>
<a class="sourceLine" id="cb23-11" data-line-number="11">        (htabulateFor (<span class="dt">Proxy</span> <span class="fu">@</span> <span class="dt">Run</span>) <span class="fu">$</span> \m <span class="ot">-&gt;</span> <span class="dt">Field</span> (<span class="dt">Match</span> <span class="fu">$</span> run&#39; m <span class="fu">.</span> runIdentity))</a>
<a class="sourceLine" id="cb23-12" data-line-number="12">        (opts <span class="fu">^.</span> <span class="fu">#</span>subcmd)</a></code></pre></div>
<p><code>LogFunc</code> å‹ã®å€¤ã‚’å¾—ã‚‹ã«ã¯ <a href="https://hackage.haskell.org/package/rio-0.1.2.0/docs/RIO.html#v:withLogFunc"><code>withLogFunc</code></a> é–¢æ•°ã‚’ç”¨ã„ã‚‹ã®ãŒè‰¯ã„ã ã‚ã†ï¼ <a href="https://hackage.haskell.org/package/rio-0.1.2.0/docs/RIO.html#t:LogOptions"><code>LogOptions</code></a> å‹ã®å€¤(ã“ã“ã§ã„ã† <code>logOpts</code>)ã‚’ç”Ÿæˆã™ã‚‹ <a href="https://hackage.haskell.org/package/rio-0.1.2.0/docs/RIO.html#v:logOptionsHandle"><code>logOptionsHandle</code></a> é–¢æ•°ã®äºŒå¼•æ•°ç›®ã« <code>True</code> ã‚’ä¸ãˆã‚‹ã“ã¨ã§ãƒ­ã‚°ãŒãƒ‡ãƒãƒƒã‚°ä»•æ§˜ã«ãªã‚‹(ãã†ã„ãˆã° <code>Options</code> å‹ã«ã¯ <code>--verbose</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã£ãŸ)ï¼ ã¡ãªã¿ã«ï¼Œãƒ‡ãƒãƒƒã‚°ä»•æ§˜ã®ã¨ãã«ã ã‘è¡¨ç¤ºã™ã‚‹ãƒ­ã‚®ãƒ³ã‚°é–¢æ•°ã¨ã—ã¦ <a href="https://hackage.haskell.org/package/rio-0.1.2.0/docs/RIO.html#v:logDebug"><code>logDebug</code></a> é–¢æ•°ãŒã‚ã‚‹ï¼</p>
<h2 id="ãŠã—ã¾ã„">ãŠã—ã¾ã„</h2>
<p>æ—©ãå®Œæˆã•ã›ã‚‹ã</p>
  </div>
</div>
</article>
]]></summary>
</entry>

</feed>
